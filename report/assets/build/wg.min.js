var wgLib=function(n){var r={};function i(t){if(r[t])return r[t].exports;var e=r[t]={i:t,l:!1,exports:{}};return n[t].call(e.exports,e,e.exports,i),e.l=!0,e.exports}return i.m=n,i.c=r,i.d=function(t,e,n){i.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},i.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)i.d(n,r,function(t){return e[t]}.bind(null,r));return n},i.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="",i(i.s=46)}([function(t,e,n){"use strict";n.r(e);var r="http://www.w3.org/1999/xhtml",i={svg:"http://www.w3.org/2000/svg",xhtml:r,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"},o=function(t){var e=t+="",n=e.indexOf(":");return 0<=n&&"xmlns"!==(e=t.slice(0,n))&&(t=t.slice(n+1)),i.hasOwnProperty(e)?{space:i[e],local:t}:t};var a=function(t){var e=o(t);return(e.local?function(t){return function(){return this.ownerDocument.createElementNS(t.space,t.local)}}:function(n){return function(){var t=this.ownerDocument,e=this.namespaceURI;return e===r&&t.documentElement.namespaceURI===r?t.createElement(n):t.createElementNS(e,n)}})(e)};function s(){}var f=function(t){return null==t?s:function(){return this.querySelector(t)}};function u(){return[]}var l=function(t){return null==t?u:function(){return this.querySelectorAll(t)}},c=function(t){return function(){return this.matches(t)}};if("undefined"!=typeof document){var h=document.documentElement;if(!h.matches){var d=h.webkitMatchesSelector||h.msMatchesSelector||h.mozMatchesSelector||h.oMatchesSelector;c=function(t){return function(){return d.call(this,t)}}}}var p=c,v=function(t){return new Array(t.length)};function g(t,e){this.ownerDocument=t.ownerDocument,this.namespaceURI=t.namespaceURI,this._next=null,this._parent=t,this.__data__=e}g.prototype={constructor:g,appendChild:function(t){return this._parent.insertBefore(t,this._next)},insertBefore:function(t,e){return this._parent.insertBefore(t,e)},querySelector:function(t){return this._parent.querySelector(t)},querySelectorAll:function(t){return this._parent.querySelectorAll(t)}};function _(t,e,n,r,i,o){for(var a,s=0,u=e.length,c=o.length;s<c;++s)(a=e[s])?(a.__data__=o[s],r[s]=a):n[s]=new g(t,o[s]);for(;s<u;++s)(a=e[s])&&(i[s]=a)}function M(t,e,n,r,i,o,a){var s,u,c,l={},f=e.length,h=o.length,d=new Array(f);for(s=0;s<f;++s)(u=e[s])&&(d[s]=c="$"+a.call(u,u.__data__,s,e),c in l?i[s]=u:l[c]=u);for(s=0;s<h;++s)(u=l[c="$"+a.call(t,o[s],s,o)])?((r[s]=u).__data__=o[s],l[c]=null):n[s]=new g(t,o[s]);for(s=0;s<f;++s)(u=e[s])&&l[d[s]]===u&&(i[s]=u)}function m(t,e){return t<e?-1:e<t?1:e<=t?0:NaN}var y=function(t){return t.ownerDocument&&t.ownerDocument.defaultView||t.document&&t||t.defaultView};function x(t,e){return t.style.getPropertyValue(e)||y(t).getComputedStyle(t,null).getPropertyValue(e)}function w(t){return t.trim().split(/^|\s+/)}function b(t){return t.classList||new S(t)}function S(t){this._node=t,this._names=w(t.getAttribute("class")||"")}function C(t,e){for(var n=b(t),r=-1,i=e.length;++r<i;)n.add(e[r])}function k(t,e){for(var n=b(t),r=-1,i=e.length;++r<i;)n.remove(e[r])}S.prototype={add:function(t){this._names.indexOf(t)<0&&(this._names.push(t),this._node.setAttribute("class",this._names.join(" ")))},remove:function(t){var e=this._names.indexOf(t);0<=e&&(this._names.splice(e,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(t){return 0<=this._names.indexOf(t)}};function T(){this.textContent=""}function A(){this.innerHTML=""}function N(){this.nextSibling&&this.parentNode.appendChild(this)}function D(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function O(){return null}function I(){var t=this.parentNode;t&&t.removeChild(this)}function z(){return this.parentNode.insertBefore(this.cloneNode(!1),this.nextSibling)}function j(){return this.parentNode.insertBefore(this.cloneNode(!0),this.nextSibling)}var E={},L=null;"undefined"!=typeof document&&("onmouseenter"in document.documentElement||(E={mouseenter:"mouseover",mouseleave:"mouseout"}));function P(n,t,e){return n=R(n,t,e),function(t){var e=t.relatedTarget;e&&(e===this||8&e.compareDocumentPosition(this))||n.call(this,t)}}function R(n,r,i){return function(t){var e=L;L=t;try{n.call(this,this.__data__,r,i)}finally{L=e}}}function F(o){return function(){var t=this.__on;if(t){for(var e,n=0,r=-1,i=t.length;n<i;++n)e=t[n],o.type&&e.type!==o.type||e.name!==o.name?t[++r]=e:this.removeEventListener(e.type,e.listener,e.capture);++r?t.length=r:delete this.__on}}}function U(u,c,l){var f=E.hasOwnProperty(u.type)?P:R;return function(t,e,n){var r,i=this.__on,o=f(c,e,n);if(i)for(var a=0,s=i.length;a<s;++a)if((r=i[a]).type===u.type&&r.name===u.name)return this.removeEventListener(r.type,r.listener,r.capture),this.addEventListener(r.type,r.listener=o,r.capture=l),void(r.value=c);this.addEventListener(u.type,o,l),r={type:u.type,name:u.name,value:c,listener:o,capture:l},i?i.push(r):this.__on=[r]}}function q(t,e,n,r){var i=L;t.sourceEvent=L,L=t;try{return e.apply(n,r)}finally{L=i}}function G(t,e,n){var r=y(t),i=r.CustomEvent;"function"==typeof i?i=new i(e,n):(i=r.document.createEvent("Event"),n?(i.initEvent(e,n.bubbles,n.cancelable),i.detail=n.detail):i.initEvent(e,!1,!1)),t.dispatchEvent(i)}var V=[null];function Y(t,e){this._groups=t,this._parents=e}function B(){return new Y([[document.documentElement]],V)}Y.prototype=B.prototype={constructor:Y,select:function(t){"function"!=typeof t&&(t=f(t));for(var e=this._groups,n=e.length,r=new Array(n),i=0;i<n;++i)for(var o,a,s=e[i],u=s.length,c=r[i]=new Array(u),l=0;l<u;++l)(o=s[l])&&(a=t.call(o,o.__data__,l,s))&&("__data__"in o&&(a.__data__=o.__data__),c[l]=a);return new Y(r,this._parents)},selectAll:function(t){"function"!=typeof t&&(t=l(t));for(var e=this._groups,n=e.length,r=[],i=[],o=0;o<n;++o)for(var a,s=e[o],u=s.length,c=0;c<u;++c)(a=s[c])&&(r.push(t.call(a,a.__data__,c,s)),i.push(a));return new Y(r,i)},filter:function(t){"function"!=typeof t&&(t=p(t));for(var e=this._groups,n=e.length,r=new Array(n),i=0;i<n;++i)for(var o,a=e[i],s=a.length,u=r[i]=[],c=0;c<s;++c)(o=a[c])&&t.call(o,o.__data__,c,a)&&u.push(o);return new Y(r,this._parents)},data:function(t,e){if(!t)return p=new Array(this.size()),l=-1,this.each(function(t){p[++l]=t}),p;var n,r=e?M:_,i=this._parents,o=this._groups;"function"!=typeof t&&(n=t,t=function(){return n});for(var a=o.length,s=new Array(a),u=new Array(a),c=new Array(a),l=0;l<a;++l){var f=i[l],h=o[l],d=h.length,p=t.call(f,f&&f.__data__,l,i),v=p.length,g=u[l]=new Array(v),m=s[l]=new Array(v);r(f,h,g,m,c[l]=new Array(d),p,e);for(var y,x,w=0,b=0;w<v;++w)if(y=g[w]){for(b<=w&&(b=w+1);!(x=m[b])&&++b<v;);y._next=x||null}}return(s=new Y(s,i))._enter=u,s._exit=c,s},enter:function(){return new Y(this._enter||this._groups.map(v),this._parents)},exit:function(){return new Y(this._exit||this._groups.map(v),this._parents)},merge:function(t){for(var e=this._groups,n=t._groups,r=e.length,i=n.length,o=Math.min(r,i),a=new Array(r),s=0;s<o;++s)for(var u,c=e[s],l=n[s],f=c.length,h=a[s]=new Array(f),d=0;d<f;++d)(u=c[d]||l[d])&&(h[d]=u);for(;s<r;++s)a[s]=e[s];return new Y(a,this._parents)},order:function(){for(var t=this._groups,e=-1,n=t.length;++e<n;)for(var r,i=t[e],o=i.length-1,a=i[o];0<=--o;)(r=i[o])&&(a&&a!==r.nextSibling&&a.parentNode.insertBefore(r,a),a=r);return this},sort:function(n){function t(t,e){return t&&e?n(t.__data__,e.__data__):!t-!e}n||(n=m);for(var e=this._groups,r=e.length,i=new Array(r),o=0;o<r;++o){for(var a,s=e[o],u=s.length,c=i[o]=new Array(u),l=0;l<u;++l)(a=s[l])&&(c[l]=a);c.sort(t)}return new Y(i,this._parents).order()},call:function(){var t=arguments[0];return arguments[0]=this,t.apply(null,arguments),this},nodes:function(){var t=new Array(this.size()),e=-1;return this.each(function(){t[++e]=this}),t},node:function(){for(var t=this._groups,e=0,n=t.length;e<n;++e)for(var r=t[e],i=0,o=r.length;i<o;++i){var a=r[i];if(a)return a}return null},size:function(){var t=0;return this.each(function(){++t}),t},empty:function(){return!this.node()},each:function(t){for(var e=this._groups,n=0,r=e.length;n<r;++n)for(var i,o=e[n],a=0,s=o.length;a<s;++a)(i=o[a])&&t.call(i,i.__data__,a,o);return this},attr:function(t,e){var n=o(t);if(arguments.length<2){var r=this.node();return n.local?r.getAttributeNS(n.space,n.local):r.getAttribute(n)}return this.each((null==e?n.local?function(t){return function(){this.removeAttributeNS(t.space,t.local)}}:function(t){return function(){this.removeAttribute(t)}}:"function"==typeof e?n.local?function(e,n){return function(){var t=n.apply(this,arguments);null==t?this.removeAttributeNS(e.space,e.local):this.setAttributeNS(e.space,e.local,t)}}:function(e,n){return function(){var t=n.apply(this,arguments);null==t?this.removeAttribute(e):this.setAttribute(e,t)}}:n.local?function(t,e){return function(){this.setAttributeNS(t.space,t.local,e)}}:function(t,e){return function(){this.setAttribute(t,e)}})(n,e))},style:function(t,e,n){return 1<arguments.length?this.each((null==e?function(t){return function(){this.style.removeProperty(t)}}:"function"==typeof e?function(e,n,r){return function(){var t=n.apply(this,arguments);null==t?this.style.removeProperty(e):this.style.setProperty(e,t,r)}}:function(t,e,n){return function(){this.style.setProperty(t,e,n)}})(t,e,null==n?"":n)):x(this.node(),t)},property:function(t,e){return 1<arguments.length?this.each((null==e?function(t){return function(){delete this[t]}}:"function"==typeof e?function(e,n){return function(){var t=n.apply(this,arguments);null==t?delete this[e]:this[e]=t}}:function(t,e){return function(){this[t]=e}})(t,e)):this.node()[t]},classed:function(t,e){var n=w(t+"");if(arguments.length<2){for(var r=b(this.node()),i=-1,o=n.length;++i<o;)if(!r.contains(n[i]))return!1;return!0}return this.each(("function"==typeof e?function(t,e){return function(){(e.apply(this,arguments)?C:k)(this,t)}}:e?function(t){return function(){C(this,t)}}:function(t){return function(){k(this,t)}})(n,e))},text:function(t){return arguments.length?this.each(null==t?T:("function"==typeof t?function(e){return function(){var t=e.apply(this,arguments);this.textContent=null==t?"":t}}:function(t){return function(){this.textContent=t}})(t)):this.node().textContent},html:function(t){return arguments.length?this.each(null==t?A:("function"==typeof t?function(e){return function(){var t=e.apply(this,arguments);this.innerHTML=null==t?"":t}}:function(t){return function(){this.innerHTML=t}})(t)):this.node().innerHTML},raise:function(){return this.each(N)},lower:function(){return this.each(D)},append:function(t){var e="function"==typeof t?t:a(t);return this.select(function(){return this.appendChild(e.apply(this,arguments))})},insert:function(t,e){var n="function"==typeof t?t:a(t),r=null==e?O:"function"==typeof e?e:f(e);return this.select(function(){return this.insertBefore(n.apply(this,arguments),r.apply(this,arguments)||null)})},remove:function(){return this.each(I)},clone:function(t){return this.select(t?j:z)},datum:function(t){return arguments.length?this.property("__data__",t):this.node().__data__},on:function(t,e,n){var r,i,o=(t+"").trim().split(/^|\s+/).map(function(t){var e="",n=t.indexOf(".");return 0<=n&&(e=t.slice(n+1),t=t.slice(0,n)),{type:t,name:e}}),a=o.length;if(!(arguments.length<2)){for(s=e?U:F,null==n&&(n=!1),r=0;r<a;++r)this.each(s(o[r],e,n));return this}var s=this.node().__on;if(s)for(var u,c=0,l=s.length;c<l;++c)for(r=0,u=s[c];r<a;++r)if((i=o[r]).type===u.type&&i.name===u.name)return u.value},dispatch:function(t,e){return this.each(("function"==typeof e?function(t,e){return function(){return G(this,t,e.apply(this,arguments))}}:function(t,e){return function(){return G(this,t,e)}})(t,e))}};var H=B,W=function(t){return"string"==typeof t?new Y([[document.querySelector(t)]],[document.documentElement]):new Y([[t]],V)},$=function(t){return W(a(t).call(document.documentElement))},X=0;function K(){return new Z}function Z(){this._="@"+(++X).toString(36)}Z.prototype=K.prototype={constructor:Z,get:function(t){for(var e=this._;!(e in t);)if(!(t=t.parentNode))return;return t[e]},set:function(t,e){return t[this._]=e},remove:function(t){return this._ in t&&delete t[this._]},toString:function(){return this._}};var J=function(){for(var t,e=L;t=e.sourceEvent;)e=t;return e},Q=function(t,e){var n=t.ownerSVGElement||t;if(n.createSVGPoint){var r=n.createSVGPoint();return r.x=e.clientX,r.y=e.clientY,[(r=r.matrixTransform(t.getScreenCTM().inverse())).x,r.y]}var i=t.getBoundingClientRect();return[e.clientX-i.left-t.clientLeft,e.clientY-i.top-t.clientTop]},tt=function(t){var e=J();return e.changedTouches&&(e=e.changedTouches[0]),Q(t,e)},et=function(t){return"string"==typeof t?new Y([document.querySelectorAll(t)],[document.documentElement]):new Y([null==t?[]:t],V)},nt=function(t,e,n){arguments.length<3&&(n=e,e=J().changedTouches);for(var r,i=0,o=e?e.length:0;i<o;++i)if((r=e[i]).identifier===n)return Q(t,r);return null},rt=function(t,e){null==e&&(e=J().touches);for(var n=0,r=e?e.length:0,i=new Array(r);n<r;++n)i[n]=Q(t,e[n]);return i};n.d(e,"create",function(){return $}),n.d(e,"creator",function(){return a}),n.d(e,"local",function(){return K}),n.d(e,"matcher",function(){return p}),n.d(e,"mouse",function(){return tt}),n.d(e,"namespace",function(){return o}),n.d(e,"namespaces",function(){return i}),n.d(e,"clientPoint",function(){return Q}),n.d(e,"select",function(){return W}),n.d(e,"selectAll",function(){return et}),n.d(e,"selection",function(){return H}),n.d(e,"selector",function(){return f}),n.d(e,"selectorAll",function(){return l}),n.d(e,"style",function(){return x}),n.d(e,"touch",function(){return nt}),n.d(e,"touches",function(){return rt}),n.d(e,"window",function(){return y}),n.d(e,"event",function(){return L}),n.d(e,"customEvent",function(){return q})},function(t,e,n){"use strict";function r(t,e,n,r,i,o,a,s){var u,c="function"==typeof t?t.options:t;if(e&&(c.render=e,c.staticRenderFns=n,c._compiled=!0),r&&(c.functional=!0),o&&(c._scopeId="data-v-"+o),a?(u=function(t){(t=t||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext)||"undefined"==typeof __VUE_SSR_CONTEXT__||(t=__VUE_SSR_CONTEXT__),i&&i.call(this,t),t&&t._registeredComponents&&t._registeredComponents.add(a)},c._ssrRegister=u):i&&(u=s?function(){i.call(this,this.$root.$options.shadowRoot)}:i),u)if(c.functional){c._injectStyles=u;var l=c.render;c.render=function(t,e){return u.call(e),l(t,e)}}else{var f=c.beforeCreate;c.beforeCreate=f?[].concat(f,u):[u]}return{exports:t,options:c}}n.d(e,"a",function(){return r})},function(t,e,n){"use strict";var r=function(t,e,n){t.prototype=e.prototype=n,n.constructor=t};function i(t,e){var n=Object.create(t.prototype);for(var r in e)n[r]=e[r];return n}function c(){}var o=1/.7,a="\\s*([+-]?\\d+)\\s*",s="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)\\s*",u="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)%\\s*",l=/^#([0-9a-f]{3})$/,f=/^#([0-9a-f]{6})$/,h=new RegExp("^rgb\\("+[a,a,a]+"\\)$"),d=new RegExp("^rgb\\("+[u,u,u]+"\\)$"),p=new RegExp("^rgba\\("+[a,a,a,s]+"\\)$"),v=new RegExp("^rgba\\("+[u,u,u,s]+"\\)$"),g=new RegExp("^hsl\\("+[s,u,u]+"\\)$"),m=new RegExp("^hsla\\("+[s,u,u,s]+"\\)$"),y={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};function x(t){var e;return t=(t+"").trim().toLowerCase(),(e=l.exec(t))?new S((e=parseInt(e[1],16))>>8&15|e>>4&240,e>>4&15|240&e,(15&e)<<4|15&e,1):(e=f.exec(t))?w(parseInt(e[1],16)):(e=h.exec(t))?new S(e[1],e[2],e[3],1):(e=d.exec(t))?new S(255*e[1]/100,255*e[2]/100,255*e[3]/100,1):(e=p.exec(t))?b(e[1],e[2],e[3],e[4]):(e=v.exec(t))?b(255*e[1]/100,255*e[2]/100,255*e[3]/100,e[4]):(e=g.exec(t))?k(e[1],e[2]/100,e[3]/100,1):(e=m.exec(t))?k(e[1],e[2]/100,e[3]/100,e[4]):y.hasOwnProperty(t)?w(y[t]):"transparent"===t?new S(NaN,NaN,NaN,0):null}function w(t){return new S(t>>16&255,t>>8&255,255&t,1)}function b(t,e,n,r){return r<=0&&(t=e=n=NaN),new S(t,e,n,r)}function _(t){return t instanceof c||(t=x(t)),t?new S((t=t.rgb()).r,t.g,t.b,t.opacity):new S}function M(t,e,n,r){return 1===arguments.length?_(t):new S(t,e,n,null==r?1:r)}function S(t,e,n,r){this.r=+t,this.g=+e,this.b=+n,this.opacity=+r}function C(t){return((t=Math.max(0,Math.min(255,Math.round(t)||0)))<16?"0":"")+t.toString(16)}function k(t,e,n,r){return r<=0?t=e=n=NaN:n<=0||1<=n?t=e=NaN:e<=0&&(t=NaN),new A(t,e,n,r)}function T(t,e,n,r){return 1===arguments.length?function(t){if(t instanceof A)return new A(t.h,t.s,t.l,t.opacity);if(t instanceof c||(t=x(t)),!t)return new A;if(t instanceof A)return t;var e=(t=t.rgb()).r/255,n=t.g/255,r=t.b/255,i=Math.min(e,n,r),o=Math.max(e,n,r),a=NaN,s=o-i,u=(o+i)/2;return s?(a=e===o?(n-r)/s+6*(n<r):n===o?(r-e)/s+2:(e-n)/s+4,s/=u<.5?o+i:2-o-i,a*=60):s=0<u&&u<1?0:a,new A(a,s,u,t.opacity)}(t):new A(t,e,n,null==r?1:r)}function A(t,e,n,r){this.h=+t,this.s=+e,this.l=+n,this.opacity=+r}function N(t,e,n){return 255*(t<60?e+(n-e)*t/60:t<180?n:t<240?e+(n-e)*(240-t)/60:e)}r(c,x,{displayable:function(){return this.rgb().displayable()},hex:function(){return this.rgb().hex()},toString:function(){return this.rgb()+""}}),r(S,M,i(c,{brighter:function(t){return t=null==t?o:Math.pow(o,t),new S(this.r*t,this.g*t,this.b*t,this.opacity)},darker:function(t){return t=null==t?.7:Math.pow(.7,t),new S(this.r*t,this.g*t,this.b*t,this.opacity)},rgb:function(){return this},displayable:function(){return 0<=this.r&&this.r<=255&&0<=this.g&&this.g<=255&&0<=this.b&&this.b<=255&&0<=this.opacity&&this.opacity<=1},hex:function(){return"#"+C(this.r)+C(this.g)+C(this.b)},toString:function(){var t=this.opacity;return(1===(t=isNaN(t)?1:Math.max(0,Math.min(1,t)))?"rgb(":"rgba(")+Math.max(0,Math.min(255,Math.round(this.r)||0))+", "+Math.max(0,Math.min(255,Math.round(this.g)||0))+", "+Math.max(0,Math.min(255,Math.round(this.b)||0))+(1===t?")":", "+t+")")}})),r(A,T,i(c,{brighter:function(t){return t=null==t?o:Math.pow(o,t),new A(this.h,this.s,this.l*t,this.opacity)},darker:function(t){return t=null==t?.7:Math.pow(.7,t),new A(this.h,this.s,this.l*t,this.opacity)},rgb:function(){var t=this.h%360+360*(this.h<0),e=isNaN(t)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*e,i=2*n-r;return new S(N(240<=t?t-240:t+120,i,r),N(t,i,r),N(t<120?t+240:t-120,i,r),this.opacity)},displayable:function(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1}}));var D=Math.PI/180,O=180/Math.PI,I=.96422,z=1,j=.82521,E=4/29,L=6/29,P=3*L*L,R=L*L*L;function F(t){if(t instanceof q)return new q(t.l,t.a,t.b,t.opacity);if(t instanceof $){if(isNaN(t.h))return new q(t.l,0,0,t.opacity);var e=t.h*D;return new q(t.l,Math.cos(e)*t.c,Math.sin(e)*t.c,t.opacity)}t instanceof S||(t=_(t));var n,r,i=B(t.r),o=B(t.g),a=B(t.b),s=G((.2225045*i+.7168786*o+.0606169*a)/z);return i===o&&o===a?n=r=s:(n=G((.4360747*i+.3850649*o+.1430804*a)/I),r=G((.0139322*i+.0971045*o+.7141733*a)/j)),new q(116*s-16,500*(n-s),200*(s-r),t.opacity)}function U(t,e,n,r){return 1===arguments.length?F(t):new q(t,e,n,null==r?1:r)}function q(t,e,n,r){this.l=+t,this.a=+e,this.b=+n,this.opacity=+r}function G(t){return R<t?Math.pow(t,1/3):t/P+E}function V(t){return L<t?t*t*t:P*(t-E)}function Y(t){return 255*(t<=.0031308?12.92*t:1.055*Math.pow(t,1/2.4)-.055)}function B(t){return(t/=255)<=.04045?t/12.92:Math.pow((t+.055)/1.055,2.4)}function H(t){if(t instanceof $)return new $(t.h,t.c,t.l,t.opacity);if(t instanceof q||(t=F(t)),0===t.a&&0===t.b)return new $(NaN,0,t.l,t.opacity);var e=Math.atan2(t.b,t.a)*O;return new $(e<0?e+360:e,Math.sqrt(t.a*t.a+t.b*t.b),t.l,t.opacity)}function W(t,e,n,r){return 1===arguments.length?H(t):new $(t,e,n,null==r?1:r)}function $(t,e,n,r){this.h=+t,this.c=+e,this.l=+n,this.opacity=+r}r(q,U,i(c,{brighter:function(t){return new q(this.l+18*(null==t?1:t),this.a,this.b,this.opacity)},darker:function(t){return new q(this.l-18*(null==t?1:t),this.a,this.b,this.opacity)},rgb:function(){var t=(this.l+16)/116,e=isNaN(this.a)?t:t+this.a/500,n=isNaN(this.b)?t:t-this.b/200;return new S(Y(3.1338561*(e=I*V(e))-1.6168667*(t=z*V(t))-.4906146*(n=j*V(n))),Y(-.9787684*e+1.9161415*t+.033454*n),Y(.0719453*e-.2289914*t+1.4052427*n),this.opacity)}})),r($,W,i(c,{brighter:function(t){return new $(this.h,this.c,this.l+18*(null==t?1:t),this.opacity)},darker:function(t){return new $(this.h,this.c,this.l-18*(null==t?1:t),this.opacity)},rgb:function(){return F(this).rgb()}}));var X=1.78277,K=-.29227,Z=-.90649,J=1.97294,Q=J*Z,tt=J*X,et=X*K- -.14861*Z;function nt(t,e,n,r){return 1===arguments.length?function(t){if(t instanceof rt)return new rt(t.h,t.s,t.l,t.opacity);t instanceof S||(t=_(t));var e=t.r/255,n=t.g/255,r=t.b/255,i=(et*r+Q*e-tt*n)/(et+Q-tt),o=r-i,a=(J*(n-i)-K*o)/Z,s=Math.sqrt(a*a+o*o)/(J*i*(1-i)),u=s?Math.atan2(a,o)*O-120:NaN;return new rt(u<0?u+360:u,s,i,t.opacity)}(t):new rt(t,e,n,null==r?1:r)}function rt(t,e,n,r){this.h=+t,this.s=+e,this.l=+n,this.opacity=+r}r(rt,nt,i(c,{brighter:function(t){return t=null==t?o:Math.pow(o,t),new rt(this.h,this.s,this.l*t,this.opacity)},darker:function(t){return t=null==t?.7:Math.pow(.7,t),new rt(this.h,this.s,this.l*t,this.opacity)},rgb:function(){var t=isNaN(this.h)?0:(this.h+120)*D,e=+this.l,n=isNaN(this.s)?0:this.s*e*(1-e),r=Math.cos(t),i=Math.sin(t);return new S(255*(e+n*(-.14861*r+X*i)),255*(e+n*(K*r+Z*i)),255*(e+n*(J*r)),this.opacity)}})),n.d(e,"a",function(){return x}),n.d(e,"f",function(){return M}),n.d(e,"d",function(){return T}),n.d(e,"e",function(){return U}),n.d(e,"c",function(){return W}),n.d(e,"b",function(){return nt})},function(t,e,n){var r,i,o;i=[],void 0===(o="function"==typeof(r=function(){return function e(t,n,r){var i,o,a=window,s="application/octet-stream",u=r||s,c=t,l=!n&&!r&&c,f=document.createElement("a"),h=function(t){return String(t)},d=a.Blob||a.MozBlob||a.WebKitBlob||h,p=n||"download";if(d=d.call?d.bind(a):Blob,"true"===String(this)&&(u=(c=[c,u])[0],c=c[1]),l&&l.length<2048&&(p=l.split("/").pop().split("?")[0],f.href=l,-1!==f.href.indexOf(l))){var v=new XMLHttpRequest;return v.open("GET",l,!0),v.responseType="blob",v.onload=function(t){e(t.target.response,p,s)},setTimeout(function(){v.send()},0),v}if(/^data:([\w+-]+\/[\w+.-]+)?[,;]/.test(c)){if(!(2096103.424<c.length&&d!==h))return navigator.msSaveBlob?navigator.msSaveBlob(x(c),p):w(c);c=x(c),u=c.type||s}else if(/([\x80-\xff])/.test(c)){for(var g=0,m=new Uint8Array(c.length),y=m.length;g<y;++g)m[g]=c.charCodeAt(g);c=new d([m],{type:u})}function x(t){for(var e=t.split(/[:;,]/),n=e[1],r="base64"==e[2]?atob:decodeURIComponent,i=r(e.pop()),o=i.length,a=0,s=new Uint8Array(o);a<o;++a)s[a]=i.charCodeAt(a);return new d([s],{type:n})}function w(t,e){if("download"in f)return f.href=t,f.setAttribute("download",p),f.className="download-js-link",f.innerHTML="downloading...",f.style.display="none",document.body.appendChild(f),setTimeout(function(){f.click(),document.body.removeChild(f),!0===e&&setTimeout(function(){a.URL.revokeObjectURL(f.href)},250)},66),!0;if(/(Version)\/(\d+)\.(\d+)(?:\.(\d+))?.*Safari\//.test(navigator.userAgent))return/^data:/.test(t)&&(t="data:"+t.replace(/^data:([\w\/\-\+]+)/,s)),window.open(t)||confirm("Displaying New Document\n\nUse Save As... to download, then click back to return to this page.")&&(location.href=t),!0;var n=document.createElement("iframe");document.body.appendChild(n),!e&&/^data:/.test(t)&&(t="data:"+t.replace(/^data:([\w\/\-\+]+)/,s)),n.src=t,setTimeout(function(){document.body.removeChild(n)},333)}if(i=c instanceof d?c:new d([c],{type:u}),navigator.msSaveBlob)return navigator.msSaveBlob(i,p);if(a.URL)w(a.URL.createObjectURL(i),!0);else{if("string"==typeof i||i.constructor===h)try{return w("data:"+u+";base64,"+a.btoa(i))}catch(t){return w("data:"+u+","+encodeURIComponent(i))}(o=new FileReader).onload=function(t){w(this.result)},o.readAsDataURL(i)}return!0}})?r.apply(e,i):r)||(t.exports=o)},function(t,e,n){"use strict";var u=n(2);function c(t,e,n,r,i){var o=t*t,a=o*t;return((1-3*t+3*o-a)*e+(4-6*o+3*a)*n+(1+3*t+3*o-3*a)*r+a*i)/6}var a=function(t){return function(){return t}};function r(e,n){return function(t){return e+t*n}}function i(t,e){var n=e-t;return n?r(t,180<n||n<-180?n-360*Math.round(n/360):n):a(isNaN(t)?e:t)}function o(o){return 1==(o=+o)?l:function(t,e){return e-t?(n=t,r=e,i=o,n=Math.pow(n,i),r=Math.pow(r,i)-n,i=1/i,function(t){return Math.pow(n+t*r,i)}):a(isNaN(t)?e:t);var n,r,i}}function l(t,e){var n=e-t;return n?r(t,n):a(isNaN(t)?e:t)}var s=function t(e){var a=o(e);function n(e,t){var n=a((e=Object(u.f)(e)).r,(t=Object(u.f)(t)).r),r=a(e.g,t.g),i=a(e.b,t.b),o=l(e.opacity,t.opacity);return function(t){return e.r=n(t),e.g=r(t),e.b=i(t),e.opacity=o(t),e+""}}return n.gamma=t,n}(1);function f(s){return function(t){var e,n,r=t.length,i=new Array(r),o=new Array(r),a=new Array(r);for(e=0;e<r;++e)n=Object(u.f)(t[e]),i[e]=n.r||0,o[e]=n.g||0,a[e]=n.b||0;return i=s(i),o=s(o),a=s(a),n.opacity=1,function(t){return n.r=i(t),n.g=o(t),n.b=a(t),n+""}}}var h=f(function(a){var s=a.length-1;return function(t){var e=t<=0?t=0:1<=t?s-(t=1):Math.floor(t*s),n=a[e],r=a[e+1],i=0<e?a[e-1]:2*n-r,o=e<s-1?a[e+2]:2*r-n;return c((t-e/s)*s,i,n,r,o)}}),m=(f(function(a){var s=a.length;return function(t){var e=Math.floor(((t%=1)<0?++t:t)*s),n=a[(e+s-1)%s],r=a[e%s],i=a[(e+1)%s],o=a[(e+2)%s];return c((t-e/s)*s,n,r,i,o)}}),function(e,n){return n-=e=+e,function(t){return e+n*t}}),d=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,p=new RegExp(d.source,"g");var v,g,y,x,w=function(t,r){var e,n,i,o,a,s=d.lastIndex=p.lastIndex=0,u=-1,c=[],l=[];for(t+="",r+="";(e=d.exec(t))&&(n=p.exec(r));)(i=n.index)>s&&(i=r.slice(s,i),c[u]?c[u]+=i:c[++u]=i),(e=e[0])===(n=n[0])?c[u]?c[u]+=n:c[++u]=n:(c[++u]=null,l.push({i:u,x:m(e,n)})),s=p.lastIndex;return s<r.length&&(i=r.slice(s),c[u]?c[u]+=i:c[++u]=i),c.length<2?l[0]?(a=l[0].x,function(t){return a(t)+""}):(o=r,function(){return o}):(r=l.length,function(t){for(var e,n=0;n<r;++n)c[(e=l[n]).i]=e.x(t);return c.join("")})},b=function(t,e){var n,r=typeof e;return null==e||"boolean"===r?a(e):("number"===r?m:"string"===r?(n=Object(u.a)(e))?(e=n,s):w:e instanceof u.a?s:e instanceof Date?function(e,n){var r=new Date;return n-=e=+e,function(t){return r.setTime(e+n*t),r}}:Array.isArray(e)?function(t,e){var n,r=e?e.length:0,i=t?Math.min(r,t.length):0,o=new Array(i),a=new Array(r);for(n=0;n<i;++n)o[n]=b(t[n],e[n]);for(;n<r;++n)a[n]=e[n];return function(t){for(n=0;n<i;++n)a[n]=o[n](t);return a}}:"function"!=typeof e.valueOf&&"function"!=typeof e.toString||isNaN(e)?function(t,e){var n,r={},i={};for(n in null!==t&&"object"==typeof t||(t={}),null!==e&&"object"==typeof e||(e={}),e)n in t?r[n]=b(t[n],e[n]):i[n]=e[n];return function(t){for(n in r)i[n]=r[n](t);return i}}:m)(t,e)},_=function(e,n){return n-=e=+e,function(t){return Math.round(e+n*t)}},M=180/Math.PI,S={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1},C=function(t,e,n,r,i,o){var a,s,u;return(a=Math.sqrt(t*t+e*e))&&(t/=a,e/=a),(u=t*n+e*r)&&(n-=t*u,r-=e*u),(s=Math.sqrt(n*n+r*r))&&(n/=s,r/=s,u/=s),t*r<e*n&&(t=-t,e=-e,u=-u,a=-a),{translateX:i,translateY:o,rotate:Math.atan2(e,t)*M,skewX:Math.atan(u)*M,scaleX:a,scaleY:s}};function k(h,d,p,v){function g(t){return t.length?t.pop()+" ":""}return function(t,e){var n,r,i,o,a,s,u,c,l=[],f=[];return t=h(t),e=h(e),function(t,e,n,r,i,o){if(t!==n||e!==r){var a=i.push("translate(",null,d,null,p);o.push({i:a-4,x:m(t,n)},{i:a-2,x:m(e,r)})}else(n||r)&&i.push("translate("+n+d+r+p)}(t.translateX,t.translateY,e.translateX,e.translateY,l,f),n=t.rotate,r=e.rotate,i=l,o=f,n!==r?(180<n-r?r+=360:180<r-n&&(n+=360),o.push({i:i.push(g(i)+"rotate(",null,v)-2,x:m(n,r)})):r&&i.push(g(i)+"rotate("+r+v),a=t.skewX,s=e.skewX,u=l,c=f,a!==s?c.push({i:u.push(g(u)+"skewX(",null,v)-2,x:m(a,s)}):s&&u.push(g(u)+"skewX("+s+v),function(t,e,n,r,i,o){if(t!==n||e!==r){var a=i.push(g(i)+"scale(",null,",",null,")");o.push({i:a-4,x:m(t,n)},{i:a-2,x:m(e,r)})}else 1===n&&1===r||i.push(g(i)+"scale("+n+","+r+")")}(t.scaleX,t.scaleY,e.scaleX,e.scaleY,l,f),t=e=null,function(t){for(var e,n=-1,r=f.length;++n<r;)l[(e=f[n]).i]=e.x(t);return l.join("")}}}var T=k(function(t){return"none"===t?S:(v||(v=document.createElement("DIV"),g=document.documentElement,y=document.defaultView),v.style.transform=t,t=y.getComputedStyle(g.appendChild(v),null).getPropertyValue("transform"),g.removeChild(v),t=t.slice(7,-1).split(","),C(+t[0],+t[1],+t[2],+t[3],+t[4],+t[5]))},"px, ","px)","deg)"),A=k(function(t){return null==t?S:(x||(x=document.createElementNS("http://www.w3.org/2000/svg","g")),x.setAttribute("transform",t),(t=x.transform.baseVal.consolidate())?(t=t.matrix,C(t.a,t.b,t.c,t.d,t.e,t.f)):S)},", ",")",")"),N=Math.SQRT2;function D(t){return((t=Math.exp(t))+1/t)/2}var O=function(t,e){var n,a,s=t[0],u=t[1],c=t[2],r=e[0],i=e[1],o=e[2],l=r-s,f=i-u,h=l*l+f*f;if(h<1e-12)a=Math.log(o/c)/N,n=function(t){return[s+t*l,u+t*f,c*Math.exp(N*t*a)]};else{var d=Math.sqrt(h),p=(o*o-c*c+4*h)/(2*c*2*d),v=(o*o-c*c-4*h)/(2*o*2*d),g=Math.log(Math.sqrt(p*p+1)-p),m=Math.log(Math.sqrt(v*v+1)-v);a=(m-g)/N,n=function(t){var e,n,r=t*a,i=D(g),o=c/(2*d)*(i*(n=N*r+g,((n=Math.exp(2*n))-1)/(n+1))-(e=g,((e=Math.exp(e))-1/e)/2));return[s+o*l,u+o*f,c*i/D(N*r+g)]}}return n.duration=1e3*a,n};function I(a){return function(e,t){var n=a((e=Object(u.d)(e)).h,(t=Object(u.d)(t)).h),r=l(e.s,t.s),i=l(e.l,t.l),o=l(e.opacity,t.opacity);return function(t){return e.h=n(t),e.s=r(t),e.l=i(t),e.opacity=o(t),e+""}}}I(i),I(l);function z(a){return function(e,t){var n=a((e=Object(u.c)(e)).h,(t=Object(u.c)(t)).h),r=l(e.c,t.c),i=l(e.l,t.l),o=l(e.opacity,t.opacity);return function(t){return e.h=n(t),e.c=r(t),e.l=i(t),e.opacity=o(t),e+""}}}z(i),z(l);function j(s){return function t(a){function e(e,t){var n=s((e=Object(u.b)(e)).h,(t=Object(u.b)(t)).h),r=l(e.s,t.s),i=l(e.l,t.l),o=l(e.opacity,t.opacity);return function(t){return e.h=n(t),e.s=r(t),e.l=i(Math.pow(t,a)),e.opacity=o(t),e+""}}return a=+a,e.gamma=t,e}(1)}j(i),j(l);n.d(e,"a",function(){return b}),n.d(e,"b",function(){return m}),n.d(e,"e",function(){return _}),n.d(e,"f",function(){return w}),n.d(e,"g",function(){return T}),n.d(e,"h",function(){return A}),n.d(e,"i",function(){return O}),n.d(e,"c",function(){return s}),n.d(e,"d",function(){return h})},function(t,e){t.exports=Vue},function(t,e,n){},function(t,e){t.exports=cytoscape},function(t,e,n){"use strict";var i,o,r=0,a=0,s=0,u=1e3,c=0,l=0,f=0,h="object"==typeof performance&&performance.now?performance:Date,d="object"==typeof window&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(t){setTimeout(t,17)};function p(){return l||(d(v),l=h.now()+f)}function v(){l=0}function g(){this._call=this._time=this._next=null}function m(t,e,n){var r=new g;return r.restart(t,e,n),r}function y(){l=(c=h.now())+f,r=a=0;try{!function(){p(),++r;for(var t,e=i;e;)0<=(t=l-e._time)&&e._call.call(null,t),e=e._next;--r}()}finally{r=0,function(){var t,e,n=i,r=1/0;for(;n;)n=n._call?(r>n._time&&(r=n._time),(t=n)._next):(e=n._next,n._next=null,t?t._next=e:i=e);o=t,w(r)}(),l=0}}function x(){var t=h.now(),e=t-c;u<e&&(f-=e,c=t)}function w(t){r||(a&&(a=clearTimeout(a)),24<t-l?(t<1/0&&(a=setTimeout(y,t-h.now()-f)),s&&(s=clearInterval(s))):(s||(c=h.now(),s=setInterval(x,u)),r=1,d(y)))}g.prototype=m.prototype={constructor:g,restart:function(t,e,n){if("function"!=typeof t)throw new TypeError("callback is not a function");n=(null==n?p():+n)+(null==e?0:+e),this._next||o===this||(o?o._next=this:i=this,o=this),this._call=t,this._time=n,w()},stop:function(){this._call&&(this._call=null,this._time=1/0,w())}};var b=function(e,n,t){var r=new g;return n=null==n?0:+n,r.restart(function(t){r.stop(),e(t+n)},n,t),r};n.d(e,"a",function(){return p}),n.d(e,"c",function(){return m}),n.d(e,"b",function(){return b})},function(t,e,n){"use strict";var o={value:function(){}};function r(){for(var t,e=0,n=arguments.length,r={};e<n;++e){if(!(t=arguments[e]+"")||t in r)throw new Error("illegal type: "+t);r[t]=[]}return new i(r)}function i(t){this._=t}function u(t,e){for(var n,r=0,i=t.length;r<i;++r)if((n=t[r]).name===e)return n.value}function c(t,e,n){for(var r=0,i=t.length;r<i;++r)if(t[r].name===e){t[r]=o,t=t.slice(0,r).concat(t.slice(r+1));break}return null!=n&&t.push({name:e,value:n}),t}i.prototype=r.prototype={constructor:i,on:function(t,e){var n,r,i=this._,o=(r=i,(t+"").trim().split(/^|\s+/).map(function(t){var e="",n=t.indexOf(".");if(0<=n&&(e=t.slice(n+1),t=t.slice(0,n)),t&&!r.hasOwnProperty(t))throw new Error("unknown type: "+t);return{type:t,name:e}})),a=-1,s=o.length;if(!(arguments.length<2)){if(null!=e&&"function"!=typeof e)throw new Error("invalid callback: "+e);for(;++a<s;)if(n=(t=o[a]).type)i[n]=c(i[n],t.name,e);else if(null==e)for(n in i)i[n]=c(i[n],t.name,null);return this}for(;++a<s;)if((n=(t=o[a]).type)&&(n=u(i[n],t.name)))return n},copy:function(){var t={},e=this._;for(var n in e)t[n]=e[n].slice();return new i(t)},call:function(t,e){if(0<(n=arguments.length-2))for(var n,r,i=new Array(n),o=0;o<n;++o)i[o]=arguments[o+2];if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(o=0,n=(r=this._[t]).length;o<n;++o)r[o].value.apply(e,i)},apply:function(t,e,n){if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(var r=this._[t],i=0,o=r.length;i<o;++i)r[i].value.apply(e,n)}};var a=r;n.d(e,"a",function(){return a})},function(t,e,n){"use strict";n.r(e);var b=n(0),r=n(9),d=n(8),s=Object(r.a)("start","end","interrupt"),u=[],c=0,p=2,m=function(t,e,n,r,i,o){var a=t.__transition;if(a){if(n in a)return}else t.__transition={};!function(o,a,s){var u,c=o.__transition;function l(t){var e,n,r,i;if(1!==s.state)return h();for(e in c)if((i=c[e]).name===s.name){if(3===i.state)return Object(d.b)(l);4===i.state?(i.state=6,i.timer.stop(),i.on.call("interrupt",o,o.__data__,i.index,i.group),delete c[e]):+e<a&&(i.state=6,i.timer.stop(),delete c[e])}if(Object(d.b)(function(){3===s.state&&(s.state=4,s.timer.restart(f,s.delay,s.time),f(t))}),s.state=p,s.on.call("start",o,o.__data__,s.index,s.group),s.state===p){for(s.state=3,u=new Array(r=s.tween.length),e=0,n=-1;e<r;++e)(i=s.tween[e].value.call(o,o.__data__,s.index,s.group))&&(u[++n]=i);u.length=n+1}}function f(t){for(var e=t<s.duration?s.ease.call(null,t/s.duration):(s.timer.restart(h),s.state=5,1),n=-1,r=u.length;++n<r;)u[n].call(null,e);5===s.state&&(s.on.call("end",o,o.__data__,s.index,s.group),h())}function h(){for(var t in s.state=6,s.timer.stop(),delete c[a],c)return;delete o.__transition}(c[a]=s).timer=Object(d.c)(function(t){s.state=1,s.timer.restart(l,s.delay,s.time),s.delay<=t&&l(t-s.delay)},0,s.time)}(t,n,{name:e,index:r,group:i,on:s,tween:u,time:o.time,delay:o.delay,duration:o.duration,ease:o.ease,timer:null,state:c})};function l(t,e){var n=y(t,e);if(n.state>c)throw new Error("too late; already scheduled");return n}function f(t,e){var n=y(t,e);if(n.state>p)throw new Error("too late; already started");return n}function y(t,e){var n=t.__transition;if(!n||!(n=n[e]))throw new Error("transition not found");return n}var i=function(t,e){var n,r,i,o=t.__transition,a=!0;if(o){for(i in e=null==e?null:e+"",o)(n=o[i]).name===e?(r=n.state>p&&n.state<5,n.state=6,n.timer.stop(),r&&n.on.call("interrupt",t,t.__data__,n.index,n.group),delete o[i]):a=!1;a&&delete t.__transition}},_=n(4);function M(t,e,n){var r=t._id;return t.each(function(){var t=f(this,r);(t.value||(t.value={}))[e]=n.apply(this,arguments)}),function(t){return y(t,r).value[e]}}var o=n(2),S=function(t,e){var n;return("number"==typeof e?_.b:e instanceof o.a?_.c:(n=Object(o.a)(e))?(e=n,_.c):_.f)(t,e)};var a=b.selection.prototype.constructor;var h=0;function x(t,e,n,r){this._groups=t,this._parents=e,this._name=n,this._id=r}function v(t){return Object(b.selection)().transition(t)}function g(){return++h}var w=b.selection.prototype;x.prototype=v.prototype={constructor:x,select:function(t){var e=this._name,n=this._id;"function"!=typeof t&&(t=Object(b.selector)(t));for(var r=this._groups,i=r.length,o=new Array(i),a=0;a<i;++a)for(var s,u,c=r[a],l=c.length,f=o[a]=new Array(l),h=0;h<l;++h)(s=c[h])&&(u=t.call(s,s.__data__,h,c))&&("__data__"in s&&(u.__data__=s.__data__),f[h]=u,m(f[h],e,n,h,f,y(s,n)));return new x(o,this._parents,e,n)},selectAll:function(t){var e=this._name,n=this._id;"function"!=typeof t&&(t=Object(b.selectorAll)(t));for(var r=this._groups,i=r.length,o=[],a=[],s=0;s<i;++s)for(var u,c=r[s],l=c.length,f=0;f<l;++f)if(u=c[f]){for(var h,d=t.call(u,u.__data__,f,c),p=y(u,n),v=0,g=d.length;v<g;++v)(h=d[v])&&m(h,e,n,v,d,p);o.push(d),a.push(u)}return new x(o,a,e,n)},filter:function(t){"function"!=typeof t&&(t=Object(b.matcher)(t));for(var e=this._groups,n=e.length,r=new Array(n),i=0;i<n;++i)for(var o,a=e[i],s=a.length,u=r[i]=[],c=0;c<s;++c)(o=a[c])&&t.call(o,o.__data__,c,a)&&u.push(o);return new x(r,this._parents,this._name,this._id)},merge:function(t){if(t._id!==this._id)throw new Error;for(var e=this._groups,n=t._groups,r=e.length,i=n.length,o=Math.min(r,i),a=new Array(r),s=0;s<o;++s)for(var u,c=e[s],l=n[s],f=c.length,h=a[s]=new Array(f),d=0;d<f;++d)(u=c[d]||l[d])&&(h[d]=u);for(;s<r;++s)a[s]=e[s];return new x(a,this._parents,this._name,this._id)},selection:function(){return new a(this._groups,this._parents)},transition:function(){for(var t=this._name,e=this._id,n=g(),r=this._groups,i=r.length,o=0;o<i;++o)for(var a,s=r[o],u=s.length,c=0;c<u;++c)if(a=s[c]){var l=y(a,e);m(a,t,n,c,s,{time:l.time+l.delay+l.duration,delay:0,duration:l.duration,ease:l.ease})}return new x(r,this._parents,t,n)},call:w.call,nodes:w.nodes,node:w.node,size:w.size,empty:w.empty,each:w.each,on:function(t,e){var n,r,i,o,a,s,u=this._id;return arguments.length<2?y(this.node(),u).on.on(t):this.each((n=u,i=e,s=((r=t)+"").trim().split(/^|\s+/).every(function(t){var e=t.indexOf(".");return 0<=e&&(t=t.slice(0,e)),!t||"start"===t})?l:f,function(){var t=s(this,n),e=t.on;e!==o&&(a=(o=e).copy()).on(r,i),t.on=a}))},attr:function(t,e){var n=Object(b.namespace)(t),r="transform"===n?_.h:S;return this.attrTween(t,"function"==typeof e?(n.local?function(n,r,i){var o,a,s;return function(){var t,e=i(this);if(null!=e)return(t=this.getAttributeNS(n.space,n.local))===e?null:t===o&&e===a?s:s=r(o=t,a=e);this.removeAttributeNS(n.space,n.local)}}:function(n,r,i){var o,a,s;return function(){var t,e=i(this);if(null!=e)return(t=this.getAttribute(n))===e?null:t===o&&e===a?s:s=r(o=t,a=e);this.removeAttribute(n)}})(n,r,M(this,"attr."+t,e)):null==e?(n.local?function(t){return function(){this.removeAttributeNS(t.space,t.local)}}:function(t){return function(){this.removeAttribute(t)}})(n):(n.local?function(e,n,r){var i,o;return function(){var t=this.getAttributeNS(e.space,e.local);return t===r?null:t===i?o:o=n(i=t,r)}}:function(e,n,r){var i,o;return function(){var t=this.getAttribute(e);return t===r?null:t===i?o:o=n(i=t,r)}})(n,r,e+""))},attrTween:function(t,e){var n="attr."+t;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(null==e)return this.tween(n,null);if("function"!=typeof e)throw new Error;var r=Object(b.namespace)(t);return this.tween(n,(r.local?function(r,t){function e(){var e=this,n=t.apply(e,arguments);return n&&function(t){e.setAttributeNS(r.space,r.local,n(t))}}return e._value=t,e}:function(r,t){function e(){var e=this,n=t.apply(e,arguments);return n&&function(t){e.setAttribute(r,n(t))}}return e._value=t,e})(r,e))},style:function(t,e,n){var r,i,o,a,s,u,c,l,f,h,d,p,v,g,m,y,x,w="transform"==(t+="")?_.g:S;return null==e?this.styleTween(t,(v=t,g=w,function(){var t=Object(b.style)(this,v),e=(this.style.removeProperty(v),Object(b.style)(this,v));return t===e?null:t===m&&e===y?x:x=g(m=t,y=e)})).on("end.style."+t,(p=t,function(){this.style.removeProperty(p)})):this.styleTween(t,"function"==typeof e?(c=w,l=M(this,"style."+(u=t),e),function(){var t=Object(b.style)(this,u),e=l(this);return null==e&&(this.style.removeProperty(u),e=Object(b.style)(this,u)),t===e?null:t===f&&e===h?d:d=c(f=t,h=e)}):(r=t,i=w,o=e+"",function(){var t=Object(b.style)(this,r);return t===o?null:t===a?s:s=i(a=t,o)}),n)},styleTween:function(t,e,n){var r="style."+(t+="");if(arguments.length<2)return(r=this.tween(r))&&r._value;if(null==e)return this.tween(r,null);if("function"!=typeof e)throw new Error;return this.tween(r,function(r,t,i){function e(){var e=this,n=t.apply(e,arguments);return n&&function(t){e.style.setProperty(r,n(t),i)}}return e._value=t,e}(t,e,null==n?"":n))},text:function(t){return this.tween("text","function"==typeof t?(n=M(this,"text",t),function(){var t=n(this);this.textContent=null==t?"":t}):(e=null==t?"":t+"",function(){this.textContent=e}));var e,n},remove:function(){return this.on("end.remove",(n=this._id,function(){var t=this.parentNode;for(var e in this.__transition)if(+e!==n)return;t&&t.removeChild(this)}));var n},tween:function(t,e){var n=this._id;if(t+="",arguments.length<2){for(var r,i=y(this.node(),n).tween,o=0,a=i.length;o<a;++o)if((r=i[o]).name===t)return r.value;return null}return this.each((null==e?function(i,o){var a,s;return function(){var t=f(this,i),e=t.tween;if(e!==a)for(var n=0,r=(s=a=e).length;n<r;++n)if(s[n].name===o){(s=s.slice()).splice(n,1);break}t.tween=s}}:function(o,a,s){var u,c;if("function"!=typeof s)throw new Error;return function(){var t=f(this,o),e=t.tween;if(e!==u){c=(u=e).slice();for(var n={name:a,value:s},r=0,i=c.length;r<i;++r)if(c[r].name===a){c[r]=n;break}r===i&&c.push(n)}t.tween=c}})(n,t,e))},delay:function(t){var e=this._id;return arguments.length?this.each(("function"==typeof t?function(t,e){return function(){l(this,t).delay=+e.apply(this,arguments)}}:function(t,e){return e=+e,function(){l(this,t).delay=e}})(e,t)):y(this.node(),e).delay},duration:function(t){var e=this._id;return arguments.length?this.each(("function"==typeof t?function(t,e){return function(){f(this,t).duration=+e.apply(this,arguments)}}:function(t,e){return e=+e,function(){f(this,t).duration=e}})(e,t)):y(this.node(),e).duration},ease:function(t){var e=this._id;return arguments.length?this.each(function(t,e){if("function"!=typeof e)throw new Error;return function(){f(this,t).ease=e}}(e,t)):y(this.node(),e).ease}};var C={time:null,delay:0,duration:250,ease:n(24).a};function k(t,e){for(var n;!(n=t.__transition)||!(n=n[e]);)if(!(t=t.parentNode))return C.time=Object(d.a)(),C;return n}b.selection.prototype.interrupt=function(t){return this.each(function(){i(this,t)})},b.selection.prototype.transition=function(t){var e,n;t=t instanceof x?(e=t._id,t._name):(e=g(),(n=C).time=Object(d.a)(),null==t?null:t+"");for(var r=this._groups,i=r.length,o=0;o<i;++o)for(var a,s=r[o],u=s.length,c=0;c<u;++c)(a=s[c])&&m(a,t,e,c,s,n||k(a,e));return new x(r,this._parents,t,e)};var T=[null],A=function(t,e){var n,r,i=t.__transition;if(i)for(r in e=null==e?null:e+"",i)if(1<(n=i[r]).state&&n.name===e)return new x([[t]],T,e,+r);return null};n.d(e,"transition",function(){return v}),n.d(e,"active",function(){return A}),n.d(e,"interrupt",function(){return i})},function(t,e,n){"use strict";var r=n(7),a=n.n(r),i=n(3),o=n.n(i),s=n(2),u=[{selector:"core",style:{"active-bg-size":"2px","active-bg-opacity":.1}},{selector:"node",style:{width:"label",height:"label",shape:"roundrectangle",label:function(t){return t.data("id")+" "+t.data("name")},"font-size":"16px","text-max-width":"120px",padding:"10px",color:function(t){return e=t.data("color"),n=Object(s.a)(e),125<Math.round((299*n.r+587*n.g+114*n.b)/1e3)?"black":"white";var e,n},"background-color":function(t){return t.data("color")},"text-valign":"center","text-halign":"center","text-wrap":"wrap","border-color":"#A16D00","border-width":"2px","z-index":"10","overlay-padding":0}},{selector:"node.compact",style:{width:function(t){return t.scratch("_isResult")?"label":"5px"},height:function(t){return t.scratch("_isResult")?(t.data("name")?t.data("name"):t.data("id")).length<=32?"100px":"label":"5px"},shape:function(t){return t.scratch("_isResult")?"roundrectangle":"ellipse"},label:function(t){return t.scratch("_isResult")?t.data("name")?t.data("name"):t.data("id"):""},"font-size":"32px","text-max-width":"250px"}},{selector:"node:selected",style:{"border-color":"#D5A056","border-width":"3px","font-weight":"bold"}},{selector:"edge",style:{opacity:"0.8","curve-style":"unbundled-bezier","target-arrow-shape":"triangle","target-arrow-color":"#D19D00","line-color":"#D19D00","overlay-padding":0}}],c={props:{containerId:{type:String,default:"wg-dag-container"},data:{type:Array,required:!0},styles:{default:function(){return u}},disableCompactMode:{type:Boolean,default:!1}},data:function(){return{contextMenuShown:!1,downloadType:"png",isCompact:"On"}},methods:{draw:function(){var n=this,t=document.getElementById(this.containerId),e=a()({container:t,maxZoom:4,autoungrabify:!0,style:this.styles,elements:this.data}),r=(this.cy=e).collection();e.nodes().forEach(function(t){var e=t.scratch("_callback");e&&t.on("click",e),t.scratch("_leavesKept")&&r.merge(t.predecessors()).merge(t)}),r.nonempty()&&e.remove(e.nodes().difference(r)),"On"===this.isCompact&&e.nodes().addClass("compact"),this.runLayout(),e.on("mouseover","node",function(t){t.target.predecessors().union(t.target.successors()).union(t.target).absoluteComplement().animate({style:{opacity:.1},duration:500})}),e.on("mouseout","node",function(t){e.nodes().stop(!0,!1).animate({style:{opacity:1},duration:300}),e.edges().stop(!0,!1).animate({style:{opacity:.8},duration:300})}),document.body.addEventListener("click",this.cancelContextMenu);var i=this.containerId+"-contextmenu",o=this.$refs.wrapper.querySelector("#".concat(i," .dropdown-menu"));o.addEventListener("click",function(t){return t.stopPropagation()}),t.addEventListener("contextmenu",function(t){n.contextMenuShown=!0;var e=n.$refs.wrapper.getBoundingClientRect();o.style.left=t.clientX-e.left+"px",o.style.top=t.clientY-e.top+"px",t.preventDefault()})},download:function(){"png"==this.downloadType?o()(this.cy.png({scale:3}),this.containerId+".png","image/png"):"json"==this.downloadType&&o()(JSON.stringify(this.cy.json()),this.containerId+".json","application/json"),this.cancelContextMenu()},fit:function(){this.cy.fit(),this.cancelContextMenu()},cancelContextMenu:function(){this.contextMenuShown=!1},runLayout:function(){this.cy.layout({name:"dagre",nodeSep:"On"===this.isCompact?20:50,rankDir:"TB",rankSep:80}).run()}},watch:{data:function(){var t=document.getElementById(this.containerId);t&&(t.innerHTML="",this.draw())},isCompact:function(){this.cy.nodes().toggleClass("compact"),this.runLayout()}},created:function(){var n=this;this.cy=null,this.$parent.$watch("isActive",function(t,e){0!=n.cy.width()&&0!=n.cy.height()||(n.cy.resize(),n.cy.fit())})},mounted:function(){this.draw()},beforeDestroy:function(){document.body.removeEventListener("click",this.cancelContextMenu)}},l=(n(25),n(1)),f=Object(l.a)(c,function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{ref:"wrapper",staticClass:"dag-wrapper"},[n("div",{staticClass:"dropdown context-menu-wrapper",class:{"is-active":e.contextMenuShown},attrs:{id:e.containerId+"-contextmenu"}},[n("div",{staticClass:"dropdown-menu",class:{"is-active":e.contextMenuShown},attrs:{role:"menu"}},[n("div",{staticClass:"dropdown-content"},[n("a",{staticClass:"dropdown-item",attrs:{role:"menuitem"},on:{click:e.fit}},[e._v("Resize")]),e._v(" "),n("hr",{staticClass:"dropdown-divider"}),e._v(" "),n("a",{staticClass:"dropdown-item",attrs:{role:"menuitem"},on:{click:e.download}},[e._v("Download")]),e._v(" "),n("div",{staticClass:"dropdown-item",attrs:{role:"menuitem"}},[n("label",{staticClass:"radio"},[n("input",{directives:[{name:"model",rawName:"v-model",value:e.downloadType,expression:"downloadType"}],attrs:{type:"radio",name:e.containerId+"-downloadType",value:"png"},domProps:{checked:e._q(e.downloadType,"png")},on:{change:function(t){e.downloadType="png"}}}),e._v(" PNG\n          ")]),e._v(" "),n("label",{staticClass:"radio"},[n("input",{directives:[{name:"model",rawName:"v-model",value:e.downloadType,expression:"downloadType"}],attrs:{type:"radio",name:e.containerId+"-downloadType",value:"json"},domProps:{checked:e._q(e.downloadType,"json")},on:{change:function(t){e.downloadType="json"}}}),e._v(" JSON\n          ")])])])])]),e._v(" "),e.disableCompactMode?e._e():n("p",[n("span",{staticClass:"switch-label"},[e._v("Compact mode: ")]),e._v(" "),n("b-switch",{attrs:{type:"is-primary","true-value":"On","false-value":"Off"},model:{value:e.isCompact,callback:function(t){e.isCompact=t},expression:"isCompact"}},[e._v(e._s(e.isCompact)+"\n    ")])],1),e._v(" "),n("div",{staticClass:"wg-dag-container",attrs:{id:e.containerId}})])},[],!1,null,"7cd3da7b",null);e.a=f.exports},function(t,e,n){},function(t,e,n){},function(t,e,n){},function(t,e,n){},function(t,e,n){},function(t,e,n){},function(t,e,n){},,,,,,function(t,e,n){"use strict";function r(t){return+t}function i(t){return((t*=2)<=1?t*t*t:(t-=2)*t*t+2)/2}(function t(e){function n(t){return Math.pow(t,e)}return e=+e,n.exponent=t,n})(3),function t(e){function n(t){return 1-Math.pow(1-t,e)}return e=+e,n.exponent=t,n}(3),function t(e){function n(t){return((t*=2)<=1?Math.pow(t,e):2-Math.pow(2-t,e))/2}return e=+e,n.exponent=t,n}(3),Math.PI;var o=1.70158,a=(function t(e){function n(t){return t*t*((e+1)*t-e)}return e=+e,n.overshoot=t,n}(o),function t(e){function n(t){return--t*t*((e+1)*t+e)+1}return e=+e,n.overshoot=t,n}(o),function t(e){function n(t){return((t*=2)<1?t*t*((e+1)*t-e):(t-=2)*t*((e+1)*t+e)+2)/2}return e=+e,n.overshoot=t,n}(o),2*Math.PI);(function e(n,r){var i=Math.asin(1/(n=Math.max(1,n)))*(r/=a);function t(t){return n*Math.pow(2,10*--t)*Math.sin((i-t)/r)}return t.amplitude=function(t){return e(t,r*a)},t.period=function(t){return e(n,t)},t})(1,.3),function e(n,r){var i=Math.asin(1/(n=Math.max(1,n)))*(r/=a);function t(t){return 1-n*Math.pow(2,-10*(t=+t))*Math.sin((t+i)/r)}return t.amplitude=function(t){return e(t,r*a)},t.period=function(t){return e(n,t)},t}(1,.3),function e(n,r){var i=Math.asin(1/(n=Math.max(1,n)))*(r/=a);function t(t){return((t=2*t-1)<0?n*Math.pow(2,10*t)*Math.sin((i-t)/r):2-n*Math.pow(2,-10*t)*Math.sin((i+t)/r))/2}return t.amplitude=function(t){return e(t,r*a)},t.period=function(t){return e(n,t)},t}(1,.3);n.d(e,"b",function(){return r}),n.d(e,"a",function(){return i})},function(t,e,n){"use strict";var r=n(6);n.n(r).a},function(t,e,n){!function(t,z,e){"use strict";var M=1e-10;function h(e,t){var n,r=function(t){for(var e=[],n=0;n<t.length;++n)for(var r=n+1;r<t.length;++r)for(var i=I(t[n],t[r]),o=0;o<i.length;++o){var a=i[o];a.parentIndex=[n,r],e.push(a)}return e}(e),i=r.filter(function(t){return function(t,e){for(var n=0;n<e.length;++n)if(C(t,e[n])>e[n].radius+M)return!1;return!0}(t,e)}),o=0,a=0,s=[];if(1<i.length){var u=k(i);for(n=0;n<i.length;++n){var c=i[n];c.angle=Math.atan2(c.x-u.x,c.y-u.y)}i.sort(function(t,e){return e.angle-t.angle});var l=i[i.length-1];for(n=0;n<i.length;++n){var f=i[n];a+=(l.x+f.x)*(f.y-l.y);for(var h={x:(f.x+l.x)/2,y:(f.y+l.y)/2},d=null,p=0;p<f.parentIndex.length;++p)if(-1<l.parentIndex.indexOf(f.parentIndex[p])){var v=e[f.parentIndex[p]],g=Math.atan2(f.x-v.x,f.y-v.y),m=Math.atan2(l.x-v.x,l.y-v.y),y=m-g;y<0&&(y+=2*Math.PI);var x=m-y/2,w=C(h,{x:v.x+v.radius*Math.sin(x),y:v.y+v.radius*Math.cos(x)});w>2*v.radius&&(w=2*v.radius),(null===d||d.width>w)&&(d={circle:v,width:w,p1:f,p2:l})}null!==d&&(s.push(d),o+=S(d.circle.radius,d.width),l=f)}}else{var b=e[0];for(n=1;n<e.length;++n)e[n].radius<b.radius&&(b=e[n]);var _=!1;for(n=0;n<e.length;++n)if(C(e[n],b)>Math.abs(b.radius-e[n].radius)){_=!0;break}_?o=a=0:(o=b.radius*b.radius*Math.PI,s.push({circle:b,p1:{x:b.x,y:b.y+b.radius},p2:{x:b.x-M,y:b.y+b.radius},width:2*b.radius}))}return a/=2,t&&(t.area=o+a,t.arcArea=o,t.polygonArea=a,t.arcs=s,t.innerPoints=i,t.intersectionPoints=r),o+a}function S(t,e){return t*t*Math.acos(1-e/t)-(t-e)*Math.sqrt(e*(2*t-e))}function C(t,e){return Math.sqrt((t.x-e.x)*(t.x-e.x)+(t.y-e.y)*(t.y-e.y))}function c(t,e,n){if(t+e<=n)return 0;if(n<=Math.abs(t-e))return Math.PI*Math.min(t,e)*Math.min(t,e);var r=t-(n*n-e*e+t*t)/(2*n),i=e-(n*n-t*t+e*e)/(2*n);return S(t,r)+S(e,i)}function I(t,e){var n=C(t,e),r=t.radius,i=e.radius;if(r+i<=n||n<=Math.abs(r-i))return[];var o=(r*r-i*i+n*n)/(2*n),a=Math.sqrt(r*r-o*o),s=t.x+o*(e.x-t.x)/n,u=t.y+o*(e.y-t.y)/n,c=-(e.y-t.y)*(a/n),l=-(e.x-t.x)*(a/n);return[{x:s+c,y:u-l},{x:s-c,y:u+l}]}function k(t){for(var e={x:0,y:0},n=0;n<t.length;++n)e.x+=t[n].x,e.y+=t[n].y;return e.x/=t.length,e.y/=t.length,e}function T(t){for(var e=new Array(t),n=0;n<t;++n)e[n]=0;return e}function A(t,e){return T(t).map(function(){return T(e)})}function v(t,e){for(var n=0,r=0;r<t.length;++r)n+=t[r]*e[r];return n}function N(t){return Math.sqrt(v(t,t))}function D(t,e,n){for(var r=0;r<e.length;++r)t[r]=e[r]*n}function O(t,e,n,r,i){for(var o=0;o<t.length;++o)t[o]=e*n[o]+r*i[o]}function d(t,e,n){var r,i=(n=n||{}).maxIterations||200*e.length,o=n.nonZeroDelta||1.05,a=n.zeroDelta||.001,s=n.minErrorDelta||1e-6,u=n.minErrorDelta||1e-5,c=void 0!==n.rho?n.rho:1,l=void 0!==n.chi?n.chi:2,f=void 0!==n.psi?n.psi:-.5,h=void 0!==n.sigma?n.sigma:.5,d=e.length,p=new Array(d+1);p[0]=e,p[0].fx=t(e);for(var v=p[0].id=0;v<d;++v){var g=e.slice();g[v]=g[v]?g[v]*o:a,p[v+1]=g,p[v+1].fx=t(g),p[v+1].id=v+1}function m(t){for(var e=0;e<t.length;e++)p[d][e]=t[e];p[d].fx=t.fx}for(var y=function(t,e){return t.fx-e.fx},x=e.slice(),w=e.slice(),b=e.slice(),_=e.slice(),M=0;M<i;++M){if(p.sort(y),n.history){var S=p.map(function(t){var e=t.slice();return e.fx=t.fx,e.id=t.id,e});S.sort(function(t,e){return t.id-e.id}),n.history.push({x:p[0].slice(),fx:p[0].fx,simplex:S})}for(v=r=0;v<d;++v)r=Math.max(r,Math.abs(p[0][v]-p[1][v]));if(Math.abs(p[0].fx-p[d].fx)<s&&r<u)break;for(v=0;v<d;++v){for(var C=x[v]=0;C<d;++C)x[v]+=p[C][v];x[v]/=d}var k=p[d];if(O(w,1+c,x,-c,k),w.fx=t(w),w.fx<p[0].fx)O(_,1+l,x,-l,k),_.fx=t(_),_.fx<w.fx?m(_):m(w);else if(w.fx>=p[d-1].fx){var T=!1;if(w.fx>k.fx?(O(b,1+f,x,-f,k),b.fx=t(b),b.fx<k.fx?m(b):T=!0):(O(b,1-f*c,x,f*c,k),b.fx=t(b),b.fx<w.fx?m(b):T=!0),T){if(1<=h)break;for(v=1;v<p.length;++v)O(p[v],1-h,p[0],h,p[v]),p[v].fx=t(p[v])}}else m(w)}return p.sort(y),{fx:p[0].fx,x:p[0]}}function p(i,o,a,s,u,c,l){var f=a.fx,h=v(a.fxprime,o),d=f,t=f,p=h,e=0;function n(t,e,n){for(var r=0;r<16;++r)if(u=(t+e)/2,O(s.x,1,a.x,u,o),d=s.fx=i(s.x,s.fxprime),p=v(s.fxprime,o),f+c*u*h<d||n<=d)e=u;else{if(Math.abs(p)<=-l*h)return u;0<=p*(e-t)&&(e=t),t=u,n=d}return 0}u=u||1,c=c||1e-6,l=l||.1;for(var r=0;r<10;++r){if(O(s.x,1,a.x,u,o),d=s.fx=i(s.x,s.fxprime),p=v(s.fxprime,o),f+c*u*h<d||r&&t<=d)return n(e,u,t);if(Math.abs(p)<=-l*h)return u;if(0<=p)return n(u,e,d);t=d,e=u,u*=2}return u}function j(t,e,n){var r,i,o,a={x:e.slice(),fx:0,fxprime:e.slice()},s={x:e.slice(),fx:0,fxprime:e.slice()},u=e.slice(),c=1;o=(n=n||{}).maxIterations||20*e.length,a.fx=t(a.x,a.fxprime),D(r=a.fxprime.slice(),a.fxprime,-1);for(var l=0;l<o;++l){if(c=p(t,r,a,s,c),n.history&&n.history.push({x:a.x.slice(),fx:a.fx,fxprime:a.fxprime.slice(),alpha:c}),c){O(u,1,s.fxprime,-1,a.fxprime);var f=v(a.fxprime,a.fxprime),h=Math.max(0,v(u,s.fxprime)/f);O(r,h,r,-1,s.fxprime),i=a,a=s,s=i}else D(r,a.fxprime,-1);if(N(a.fxprime)<=1e-5)break}return n.history&&n.history.push({x:a.x.slice(),fx:a.fx,fxprime:a.fxprime.slice(),alpha:c}),a}function o(i,t){(t=t||{}).maxIterations=t.maxIterations||500;var e=t.initialLayout||f,o=t.lossFunction||P;i=function(t){t=t.slice();var e,n,r,i,o=[],a={};for(e=0;e<t.length;++e){var s=t[e];1==s.sets.length?o.push(s.sets[0]):2==s.sets.length&&(r=s.sets[0],i=s.sets[1],a[[r,i]]=!0,a[[i,r]]=!0)}for(o.sort(function(t,e){return e<t}),e=0;e<o.length;++e)for(r=o[e],n=e+1;n<o.length;++n)i=o[n],[r,i]in a||t.push({sets:[r,i],size:0});return t}(i);var n,a=e(i,t),r=[],s=[];for(n in a)a.hasOwnProperty(n)&&(r.push(a[n].x),r.push(a[n].y),s.push(n));for(var u=d(function(t){for(var e={},n=0;n<s.length;++n){var r=s[n];e[r]={x:t[2*n],y:t[2*n+1],radius:a[r].radius}}return o(e,i)},r,t),c=u.x,l=0;l<s.length;++l)n=s[l],a[n].x=c[2*l],a[n].y=c[2*l+1];return a}var E=1e-10;function L(e,n,r){return Math.min(e,n)*Math.min(e,n)*Math.PI<=r+E?Math.abs(e-n):function(t,e,n,r){var i=(r=r||{}).maxIterations||100,o=r.tolerance||1e-10,a=t(e),s=t(n),u=n-e;if(0<a*s)throw"Initial bisect points must have opposite signs";if(0===a)return e;if(0===s)return n;for(var c=0;c<i;++c){var l=e+(u/=2),f=t(l);if(0<=f*a&&(e=l),Math.abs(u)<o||0===f)return l}return e+u}(function(t){return c(e,n,t)-r},0,e+n)}function f(t,e){var n=s(t,e),r=e.lossFunction||P;if(8<=t.length){var i=function(t,e){var n,r=(e=e||{}).restarts||10,i=[],o={};for(n=0;n<t.length;++n){var a=t[n];1==a.sets.length&&(o[a.sets[0]]=i.length,i.push(a))}var s,u,c,l,f,h=(s=t,c=o,l=A((u=i).length,u.length),f=A(u.length,u.length),s.filter(function(t){return 2==t.sets.length}).map(function(t){var e=c[t.sets[0]],n=c[t.sets[1]],r=L(Math.sqrt(u[e].size/Math.PI),Math.sqrt(u[n].size/Math.PI),t.size);l[e][n]=l[n][e]=r;var i=0;t.size+1e-10>=Math.min(u[e].size,u[n].size)?i=1:t.size<=1e-10&&(i=-1),f[e][n]=f[n][e]=i}),{distances:l,constraints:f}),d=h.distances,p=h.constraints,v=N(d.map(N))/d.length;d=d.map(function(t){return t.map(function(t){return t/v})});var g,m,y=function(t,e){return function(t,e,n,r){var i,o=0;for(i=0;i<e.length;++i)e[i]=0;for(i=0;i<n.length;++i)for(var a=t[2*i],s=t[2*i+1],u=i+1;u<n.length;++u){var c=t[2*u],l=t[2*u+1],f=n[i][u],h=r[i][u],d=(c-a)*(c-a)+(l-s)*(l-s),p=Math.sqrt(d),v=d-f*f;0<h&&p<=f||h<0&&f<=p||(o+=2*v*v,e[2*i]+=4*v*(a-c),e[2*i+1]+=4*v*(s-l),e[2*u]+=4*v*(c-a),e[2*u+1]+=4*v*(l-s))}return o}(t,e,d,p)};for(n=0;n<r;++n){var x=T(2*d.length).map(Math.random);m=j(y,x,e),(!g||m.fx<g.fx)&&(g=m)}var w=g.x,b={};for(n=0;n<i.length;++n){var _=i[n];b[_.sets[0]]={x:w[2*n]*v,y:w[2*n+1]*v,radius:Math.sqrt(_.size/Math.PI)}}if(e.history)for(n=0;n<e.history.length;++n)D(e.history[n].x,v);return b}(t,e),o=r(i,t),a=r(n,t);o+1e-8<a&&(n=i)}return n}function s(t,e){for(var n,r=e&&e.lossFunction?e.lossFunction:P,i={},o={},a=0;a<t.length;++a){var s=t[a];1==s.sets.length&&(n=s.sets[0],i[n]={x:1e10,y:1e10,rowid:i.length,size:s.size,radius:Math.sqrt(s.size/Math.PI)},o[n]=[])}for(t=t.filter(function(t){return 2==t.sets.length}),a=0;a<t.length;++a){var u=t[a],c=u.hasOwnProperty("weight")?u.weight:1,l=u.sets[0],f=u.sets[1];u.size+E>=Math.min(i[l].size,i[f].size)&&(c=0),o[l].push({set:f,size:u.size,weight:c}),o[f].push({set:l,size:u.size,weight:c})}var h=[];for(n in o)if(o.hasOwnProperty(n)){var d=0;for(a=0;a<o[n].length;++a)d+=o[n][a].size*o[n][a].weight;h.push({set:n,size:d})}function p(t,e){return e.size-t.size}h.sort(p);var v={};function g(t){return t.set in v}function m(t,e){i[e].x=t.x,i[e].y=t.y,v[e]=!0}for(m({x:0,y:0},h[0].set),a=1;a<h.length;++a){var y=h[a].set,x=o[y].filter(g);if(n=i[y],x.sort(p),0===x.length)throw"ERROR: missing pairwise overlap information";for(var w=[],b=0;b<x.length;++b){var _=i[x[b].set],M=L(n.radius,_.radius,x[b].size);w.push({x:_.x+M,y:_.y}),w.push({x:_.x-M,y:_.y}),w.push({y:_.y+M,x:_.x}),w.push({y:_.y-M,x:_.x});for(var S=b+1;S<x.length;++S)for(var C=i[x[S].set],k=L(n.radius,C.radius,x[S].size),T=I({x:_.x,y:_.y,radius:M},{x:C.x,y:C.y,radius:k}),A=0;A<T.length;++A)w.push(T[A])}var N=1e50,D=w[0];for(b=0;b<w.length;++b){i[y].x=w[b].x,i[y].y=w[b].y;var O=r(i,t);O<N&&(N=O,D=w[b])}m(D,y)}return i}function P(e,t){for(var n=0,r=0;r<t.length;++r){var i,o=t[r];if(1!=o.sets.length){if(2==o.sets.length){var a=e[o.sets[0]],s=e[o.sets[1]];i=c(a.radius,s.radius,C(a,s))}else i=h(o.sets.map(function(t){return e[t]}));var u=o.hasOwnProperty("weight")?o.weight:1;n+=u*(i-o.size)*(i-o.size)}}return n}function g(t,e,n){var r;if(null===n?t.sort(function(t,e){return e.radius-t.radius}):t.sort(n),0<t.length){var i=t[0].x,o=t[0].y;for(r=0;r<t.length;++r)t[r].x-=i,t[r].y-=o}if(2==t.length){var a=C(t[0],t[1]);a<Math.abs(t[1].radius-t[0].radius)&&(t[1].x=t[0].x+t[0].radius-t[1].radius-1e-10,t[1].y=t[0].y)}if(1<t.length){var s,u,c=Math.atan2(t[1].x,t[1].y)-e,l=Math.cos(c),f=Math.sin(c);for(r=0;r<t.length;++r)s=t[r].x,u=t[r].y,t[r].x=l*s-f*u,t[r].y=f*s+l*u}if(2<t.length){for(var h=Math.atan2(t[2].x,t[2].y)-e;h<0;)h+=2*Math.PI;for(;h>2*Math.PI;)h-=2*Math.PI;if(h>Math.PI){var d=t[1].y/(1e-10+t[1].x);for(r=0;r<t.length;++r){var p=(t[r].x+d*t[r].y)/(1+d*d);t[r].x=2*p-t[r].x,t[r].y=2*p*d-t[r].y}}}}function m(t){function e(t){return t.parent!==t&&(t.parent=e(t.parent)),t.parent}t.map(function(t){t.parent=t});for(var n=0;n<t.length;++n)for(var r=n+1;r<t.length;++r){var i=t[n].radius+t[r].radius;C(t[n],t[r])+1e-10<i&&(o=t[r],a=t[n],s=void 0,s=e(o),u=e(a),s.parent=u)}var o,a,s,u,c,l={};for(n=0;n<t.length;++n)(c=e(t[n]).parent.setid)in l||(l[c]=[]),l[c].push(t[n]);t.map(function(t){delete t.parent});var f=[];for(c in l)l.hasOwnProperty(c)&&f.push(l[c]);return f}function y(r){var t=function(e){var t=Math.max.apply(null,r.map(function(t){return t[e]+t.radius})),n=Math.min.apply(null,r.map(function(t){return t[e]-t.radius}));return{max:t,min:n}};return{xRange:t("x"),yRange:t("y")}}function R(t,e,n){null===e&&(e=Math.PI/2);var r,i,u=[];for(i in t)if(t.hasOwnProperty(i)){var o=t[i];u.push({x:o.x,y:o.y,radius:o.radius,setid:i})}var a=m(u);for(r=0;r<a.length;++r){g(a[r],e,n);var s=y(a[r]);a[r].size=(s.xRange.max-s.xRange.min)*(s.yRange.max-s.yRange.min),a[r].bounds=s}a.sort(function(t,e){return e.size-t.size});var c=(u=a[0]).bounds,l=(c.xRange.max-c.xRange.min)/50;function f(t,e,n){if(t){var r,i,o,a=t.bounds;e?r=c.xRange.max-a.xRange.min+l:(r=c.xRange.max-a.xRange.max,(o=(a.xRange.max-a.xRange.min)/2-(c.xRange.max-c.xRange.min)/2)<0&&(r+=o)),n?i=c.yRange.max-a.yRange.min+l:(i=c.yRange.max-a.yRange.max,(o=(a.yRange.max-a.yRange.min)/2-(c.yRange.max-c.yRange.min)/2)<0&&(i+=o));for(var s=0;s<t.length;++s)t[s].x+=r,t[s].y+=i,u.push(t[s])}}for(var h=1;h<a.length;)f(a[h],!0,!1),f(a[h+1],!1,!0),f(a[h+2],!0,!0),h+=3,c=y(u);var d={};for(r=0;r<u.length;++r)d[u[r].setid]=u[r];return d}function F(t,e,n,r){var i=[],o=[];for(var a in t)t.hasOwnProperty(a)&&(o.push(a),i.push(t[a]));e-=2*r,n-=2*r;var s=y(i),u=s.xRange,c=s.yRange;if(u.max==u.min||c.max==c.min)return console.log("not scaling solution: zero size detected"),t;for(var l=e/(u.max-u.min),f=n/(c.max-c.min),h=Math.min(f,l),d=(e-(u.max-u.min)*h)/2,p=(n-(c.max-c.min)*h)/2,v={},g=0;g<i.length;++g){var m=i[g];v[o[g]]={radius:h*m.radius,x:r+d+(m.x-u.min)*h,y:r+p+(m.y-c.min)*h}}return v}function U(p,v){return function(){for(var t,e=z.select(this),n=e.datum(),r=p[n.sets[0]].radius||50,i=v(n)||"",o=i.split(/\s+/).reverse(),a=(i.length+o.length)/3,s=o.pop(),u=[s],c=0,l=e.text(null).append("tspan").text(s);s=o.pop();)u.push(s),t=u.join(" "),l.text(t),t.length>a&&l.node().getComputedTextLength()>r&&(u.pop(),l.text(u.join(" ")),u=[s],l=e.append("tspan").text(s),c++);var f=.35-1.1*c/2,h=e.attr("x"),d=e.attr("y");e.selectAll("tspan").attr("x",h).attr("y",d).attr("dy",function(t,e){return f+1.1*e+"em"})}}function x(t,e,n){var r,i,o=e[0].radius-C(e[0],t);for(r=1;r<e.length;++r)(i=e[r].radius-C(e[r],t))<=o&&(o=i);for(r=0;r<n.length;++r)(i=C(n[r],t)-n[r].radius)<=o&&(o=i);return o}function w(e,n){var t,r=[];for(t=0;t<e.length;++t){var i=e[t];r.push({x:i.x,y:i.y}),r.push({x:i.x+i.radius/2,y:i.y}),r.push({x:i.x-i.radius/2,y:i.y}),r.push({x:i.x,y:i.y+i.radius/2}),r.push({x:i.x,y:i.y-i.radius/2})}var o=r[0],a=x(r[0],e,n);for(t=1;t<r.length;++t){var s=x(r[t],e,n);a<=s&&(o=r[t],a=s)}var u=d(function(t){return-1*x({x:t[0],y:t[1]},e,n)},[o.x,o.y],{maxIterations:500,minErrorDelta:1e-10}).x,c={x:u[0],y:u[1]},l=!0;for(t=0;t<e.length;++t)if(C(c,e[t])>e[t].radius){l=!1;break}for(t=0;t<n.length;++t)if(C(c,n[t])<n[t].radius){l=!1;break}if(!l)if(1==e.length)c={x:e[0].x,y:e[0].y};else{var f={};h(e,f),c=0===f.arcs.length?{x:0,y:-1e3,disjoint:!0}:1==f.arcs.length?{x:f.arcs[0].circle.x,y:f.arcs[0].circle.y}:n.length?w(e,[]):k(f.arcs.map(function(t){return t.p1}))}return c}function b(t){var e={},n=[];for(var r in t)n.push(r),e[r]=[];for(var i=0;i<n.length;i++)for(var o=t[n[i]],a=i+1;a<n.length;++a){var s=t[n[a]],u=C(o,s);u+s.radius<=o.radius+1e-10?e[n[a]].push(n[i]):u+o.radius<=s.radius+1e-10&&e[n[i]].push(n[a])}return e}function q(t,e){for(var n={},r=b(t),i=0;i<e.length;++i){for(var o=e[i].sets,a={},s={},u=0;u<o.length;++u){a[o[u]]=!0;for(var c=r[o[u]],l=0;l<c.length;++l)s[c[l]]=!0}var f=[],h=[];for(var d in t)d in a?f.push(t[d]):d in s||h.push(t[d]);var p=w(f,h);(n[o]=p).disjoint&&0<e[i].size&&console.log("WARNING: area "+o+" not represented on screen")}return n}function l(t,e,n){var r=[];return r.push("\nM",t,e),r.push("\nm",-n,0),r.push("\na",n,n,0,1,0,2*n,0),r.push("\na",n,n,0,1,0,2*-n,0),r.join(" ")}function G(t){var e=t.split(" ");return{x:parseFloat(e[1]),y:parseFloat(e[2]),radius:-parseFloat(e[4])}}function V(t){var e={};h(t,e);var n=e.arcs;if(0===n.length)return"M 0 0";if(1==n.length){var r=n[0].circle;return l(r.x,r.y,r.radius)}for(var i=["\nM",n[0].p2.x,n[0].p2.y],o=0;o<n.length;++o){var a=n[o],s=a.circle.radius,u=a.width>s;i.push("\nA",s,s,0,u?1:0,1,a.p1.x,a.p1.y)}return i.join(" ")}t.intersectionArea=h,t.circleCircleIntersection=I,t.circleOverlap=c,t.circleArea=S,t.distance=C,t.venn=o,t.greedyLayout=s,t.scaleSolution=F,t.normalizeSolution=R,t.bestInitialLayout=f,t.lossFunction=P,t.disjointCluster=m,t.distanceFromIntersectArea=L,t.VennDiagram=function(){var w=600,b=350,_=15,M=1e3,S=Math.PI/2,C=!0,k=!0,T=!0,A=null,N=null,n={},r=["#1f77b4","#ff7f0e","#2ca02c","#d62728","#9467bd","#8c564b","#e377c2","#7f7f7f","#bcbd22","#17becf"],i=0,D=function(t){if(t in n)return n[t];var e=n[t]=r[i];return r.length<=(i+=1)&&(i=0),e},O=o,I=P;function e(t){var e=t.datum(),n={};e.forEach(function(t){0==t.size&&1==t.sets.length&&(n[t.sets[0]]=1)}),e=e.filter(function(t){return!t.sets.some(function(t){return t in n})});var i={},r={};if(0<e.length){var o=O(e,{lossFunction:I});C&&(o=R(o,S,N)),i=F(o,w,b,_),r=q(i,e)}var a={};function s(t){return t.sets in a?a[t.sets]:1==t.sets.length?""+t.sets[0]:void 0}e.forEach(function(t){t.label&&(a[t.sets]=t.label)}),t.selectAll("svg").data([i]).enter().append("svg");var u=t.select("svg").attr("width",w).attr("height",b),c={},l=!1;u.selectAll(".venn-area path").each(function(t){var e=z.select(this).attr("d");1==t.sets.length&&e&&(l=!0,c[t.sets[0]]=G(e))});var f=function(e){return function(r){var t=e.sets.map(function(t){var e=c[t],n=i[t];return e||(e={x:w/2,y:b/2,radius:1}),n||(n={x:w/2,y:b/2,radius:1}),{x:e.x*(1-r)+n.x*r,y:e.y*(1-r)+n.y*r,radius:e.radius*(1-r)+n.radius*r}});return V(t)}},h=u.selectAll(".venn-area").data(e,function(t){return t.sets}),d=h.enter().append("g").attr("class",function(t){return"venn-area venn-"+(1==t.sets.length?"circle":"intersection")}).attr("data-venn-sets",function(t){return t.sets.join("_")}),p=d.append("path"),v=d.append("text").attr("class","label").text(function(t){return s(t)}).attr("text-anchor","middle").attr("dy",".35em").attr("x",w/2).attr("y",b/2);T&&(p.style("fill-opacity","0").filter(function(t){return 1==t.sets.length}).style("fill",function(t){return D(t.sets)}).style("fill-opacity",".25"),v.style("fill",function(t){return 1==t.sets.length?D(t.sets):"#444"}));var g=t;l?(g=t.transition("venn").duration(M)).selectAll("path").attrTween("d",f):g.selectAll("path").attr("d",function(t){return V(t.sets.map(function(t){return i[t]}))});var m=g.selectAll("text").filter(function(t){return t.sets in r}).text(function(t){return s(t)}).attr("x",function(t){return Math.floor(r[t.sets].x)}).attr("y",function(t){return Math.floor(r[t.sets].y)});k&&(l?"on"in m?m.on("end",U(i,s)):m.each("end",U(i,s)):m.each(U(i,s)));var y=h.exit().transition("venn").duration(M).remove();y.selectAll("path").attrTween("d",f);var x=y.selectAll("text").attr("x",w/2).attr("y",b/2);return null!==A&&(v.style("font-size","0px"),m.style("font-size",A),x.style("font-size","0px")),{circles:i,textCentres:r,nodes:h,enter:d,update:g,exit:y}}return e.wrap=function(t){return arguments.length?(k=t,e):k},e.width=function(t){return arguments.length?(w=t,e):w},e.height=function(t){return arguments.length?(b=t,e):b},e.padding=function(t){return arguments.length?(_=t,e):_},e.colours=function(t){return arguments.length?(D=t,e):D},e.fontSize=function(t){return arguments.length?(A=t,e):A},e.duration=function(t){return arguments.length?(M=t,e):M},e.layoutFunction=function(t){return arguments.length?(O=t,e):O},e.normalize=function(t){return arguments.length?(C=t,e):C},e.styled=function(t){return arguments.length?(T=t,e):T},e.orientation=function(t){return arguments.length?(S=t,e):S},e.orientationOrder=function(t){return arguments.length?(N=t,e):N},e.lossFunction=function(t){return arguments.length?(I=t,e):I},e},t.wrapText=U,t.computeTextCentres=q,t.computeTextCentre=w,t.sortAreas=function(t,n){for(var e=b(t.selectAll("svg").datum()),r={},i=0;i<n.sets.length;++i){var o=n.sets[i];for(var a in e)for(var s=e[a],u=0;u<s.length;++u)if(s[u]==o){r[a]=!0;break}}function c(t){for(var e=0;e<t.length;++e)if(!(t[e]in r))return!1;return!0}t.selectAll("g").sort(function(t,e){return t.sets.length!=e.sets.length?t.sets.length-e.sets.length:t==n?c(e.sets)?-1:1:e==n?c(t.sets)?1:-1:e.size-t.size})},t.circlePath=l,t.circleFromPath=G,t.intersectionAreaPath=V,Object.defineProperty(t,"__esModule",{value:!0})}(e,n(0),n(10))},function(t,e,n){t.exports=function(){"use strict";var c=4,l=1e-7,f=10,i="function"==typeof Float32Array;function r(t,e){return 1-3*e+3*t}function o(t,e){return 3*e-6*t}function a(t){return 3*t}function h(t,e,n){return((r(e,n)*t+o(e,n))*t+a(e))*t}function d(t,e,n){return 3*r(e,n)*t*t+2*o(e,n)*t+a(e)}var j=function(a,e,s,n){if(!(0<=a&&a<=1&&0<=s&&s<=1))throw new Error("bezier x values must be in [0, 1] range");var u=i?new Float32Array(11):new Array(11);if(a!==e||s!==n)for(var t=0;t<11;++t)u[t]=h(.1*t,a,s);function r(t){for(var e=0,n=1;10!==n&&u[n]<=t;++n)e+=.1;var r=(t-u[--n])/(u[n+1]-u[n]),i=e+.1*r,o=d(i,a,s);return.001<=o?function(t,e,n,r){for(var i=0;i<c;++i){var o=d(e,n,r);if(0===o)return e;var a=h(e,n,r)-t;e-=a/o}return e}(t,i,a,s):0===o?i:function(t,e,n,r,i){for(var o,a,s=0;0<(o=h(a=e+(n-e)/2,r,i)-t)?n=a:e=a,Math.abs(o)>l&&++s<f;);return a}(t,e,e+.1,a,s)}return function(t){return a===e&&s===n?t:0===t?0:1===t?1:h(r(t),e,n)}},E={ease:[.25,.1,.25,1],linear:[0,0,1,1],"ease-in":[.42,0,1,1],"ease-out":[0,0,.58,1],"ease-in-out":[.42,0,.58,1]},s=!1;try{var t=Object.defineProperty({},"passive",{get:function(){s=!0}});window.addEventListener("test",null,t)}catch(t){}var L={$:function(t){return"string"!=typeof t?t:document.querySelector(t)},on:function(t,e,n){var r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:{passive:!1};e instanceof Array||(e=[e]);for(var i=0;i<e.length;i++)t.addEventListener(e[i],n,!!s&&r)},off:function(t,e,n){e instanceof Array||(e=[e]);for(var r=0;r<e.length;r++)t.removeEventListener(e[r],n)},cumulativeOffset:function(t){for(var e=0,n=0;e+=t.offsetTop||0,n+=t.offsetLeft||0,t=t.offsetParent;);return{top:e,left:n}}},P="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},e=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},R=["mousedown","wheel","DOMMouseScroll","mousewheel","keyup","touchmove"],F={container:"body",duration:500,easing:"ease",offset:0,force:!0,cancelable:!0,onStart:!1,onDone:!1,onCancel:!1,x:!1,y:!0};function n(t){F=e({},F,t)}var u=function(){var c=void 0,l=void 0,f=void 0,h=void 0,d=void 0,p=void 0,v=void 0,g=void 0,m=void 0,y=void 0,x=void 0,w=void 0,b=void 0,_=void 0,M=void 0,S=void 0,C=void 0,k=void 0,T=void 0,A=void 0,N=function(t){v&&(A=t,T=!0)},D=void 0,e=void 0,n=void 0,r=void 0;function O(t){var e=t.scrollTop;return"body"===t.tagName.toLowerCase()&&(e=e||document.documentElement.scrollTop),e}function I(t){var e=t.scrollLeft;return"body"===t.tagName.toLowerCase()&&(e=e||document.documentElement.scrollLeft),e}function z(t){if(T)return i();e||(e=t),n=t-e,r=Math.min(n/f,1),r=D(r),o(l,M+k*r,b+C*r),n<f?window.requestAnimationFrame(z):i()}function i(){T||o(l,S,_),e=!1,L.off(l,R,N),T&&y&&y(A,c),!T&&m&&m(c)}function o(t,e,n){w&&(t.scrollTop=e),x&&(t.scrollLeft=n),"body"===t.tagName.toLowerCase()&&(w&&(document.documentElement.scrollTop=e),x&&(document.documentElement.scrollLeft=n))}return function(t,e){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{};if("object"===(void 0===e?"undefined":P(e))?n=e:"number"==typeof e&&(n.duration=e),!(c=L.$(t)))return console.warn("[vue-scrollto warn]: Trying to scroll to an element that is not on the page: "+t);l=L.$(n.container||F.container),f=n.duration||F.duration,h=n.easing||F.easing,d=n.offset||F.offset,p=n.hasOwnProperty("force")?!1!==n.force:F.force,v=n.hasOwnProperty("cancelable")?!1!==n.cancelable:F.cancelable,g=n.onStart||F.onStart,m=n.onDone||F.onDone,y=n.onCancel||F.onCancel,x=void 0===n.x?F.x:n.x,w=void 0===n.y?F.y:n.y;var r=L.cumulativeOffset(l),i=L.cumulativeOffset(c);if("function"==typeof d&&(d=d()),M=O(l),S=i.top-r.top+d,b=I(l),_=i.left-r.left+d,T=!1,k=S-M,C=_-b,!p){var o=M,a=o+l.offsetHeight,s=S,u=s+c.offsetHeight;if(o<=s&&u<=a)return}return"string"==typeof h&&(h=E[h]||E.ease),D=j.apply(j,h),k||C?(g&&g(c),L.on(l,R,N,{passive:!0}),window.requestAnimationFrame(z),function(){T=!(A=null)}):void 0}}(),p=[];function v(t){var e=function(t){for(var e=0;e<p.length;++e)if(p[e].el===t)return p[e]}(t);return e||(p.push(e={el:t,binding:{}}),e)}function g(t){t.preventDefault();var e=v(this).binding;if("string"==typeof e.value)return u(e.value);u(e.value.el||e.value.element,e.value)}var m={bind:function(t,e){v(t).binding=e,L.on(t,"click",g)},unbind:function(t){!function(t){for(var e=0;e<p.length;++e)if(p[e].el===t)return p.splice(e,1)}(t),L.off(t,"click",g)},update:function(t,e){v(t).binding=e},scrollTo:u,bindings:p},y=function(t,e){e&&n(e),t.directive("scroll-to",m),t.prototype.$scrollTo=m.scrollTo};return"undefined"!=typeof window&&window.Vue&&(window.VueScrollTo=m,window.VueScrollTo.setDefaults=n,window.Vue.use(y)),m.install=y,m}()},function(t,e,n){"use strict";var r=n(12);n.n(r).a},function(t,e,n){"use strict";var r=n(13);n.n(r).a},function(t,e,n){"use strict";var r=n(14);n.n(r).a},function(t,e,n){"use strict";var r=n(15);n.n(r).a},function(t,e,n){"use strict";var r=n(16);n.n(r).a},function(t,e,n){"use strict";var r=n(17);n.n(r).a},function(t,e,n){"use strict";var r=n(18);n.n(r).a},function(t,e,n){},,,,,,,,,,,function(t,e,n){"use strict";n.r(e);var r=n(5),i=n.n(r),o={props:{data:{type:Array,required:!0},method:{type:String,required:!0,validator:function(t){return-1!==["gsea","ora"].indexOf(t.toLowerCase())}}},data:function(){return{perPage:20}},computed:{isPaginated:function(){return this.perPage<1e3}},filters:{number:function(t){return 5<t.toString().length?t.toPrecision(5):t}}},a=(n(28),n(1)),s=Object(a.a)(o,function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"wg-result-table",attrs:{id:"wg-result-table"}},[n("b-table",{attrs:{data:e.data,"per-page":e.perPage,"default-sort":["FDR","asc","pValue","asc"],paginated:e.isPaginated,striped:"",hoverable:"","mobile-cards":""},scopedSlots:e._u([{key:"default",fn:function(t){return[n("b-table-column",{attrs:{field:"geneSet",label:"Gene Set",sortable:""}},[n("span",{staticClass:"gene-set-link",on:{click:t.row.options.callback}},[e._v(e._s(t.row.geneSet))])]),e._v(" "),void 0!==t.row.description?[n("b-table-column",{attrs:{field:"description",label:"Description"}},[e._v("\n        "+e._s(t.row.description)+"\n      ")])]:e._e(),e._v(" "),"ora"==e.method.toLowerCase()?[n("b-table-column",{attrs:{field:"size",label:"Size",sortable:"",numeric:""}},[e._v("\n          "+e._s(t.row.size)+"\n        ")]),e._v(" "),n("b-table-column",{attrs:{field:"expect",label:"Expect",sortable:"",numeric:""}},[e._v("\n          "+e._s(e._f("number")(t.row.expect))+"\n        ")]),e._v(" "),n("b-table-column",{attrs:{field:"enrichmentRatio",label:"Ratio",sortable:"",numeric:""}},[e._v("\n          "+e._s(e._f("number")(t.row.enrichmentRatio))+"\n        ")])]:e._e(),e._v(" "),"gsea"==e.method.toLowerCase()?[n("b-table-column",{attrs:{field:"size",label:"Size",sortable:"",numeric:""}},[e._v("\n          "+e._s(t.row.size)+"\n        ")]),e._v(" "),n("b-table-column",{attrs:{field:"leadingEdgeNum",label:"Leading Edge Number",sortable:"",numeric:""}},[e._v("\n          "+e._s(t.row.leadingEdgeNum)+"\n        ")]),e._v(" "),n("b-table-column",{attrs:{field:"enrichmentScore",label:"ES",sortable:"",numeric:""}},[e._v("\n          "+e._s(e._f("number")(t.row.enrichmentScore))+"\n        ")]),e._v(" "),n("b-table-column",{attrs:{field:"normalizedEnrichmentScore",label:"NES",sortable:"",numeric:""}},[e._v("\n          "+e._s(e._f("number")(t.row.normalizedEnrichmentScore))+"\n        ")])]:e._e(),e._v(" "),n("b-table-column",{attrs:{field:"pValue",label:"P Value",sortable:"",numeric:""}},[e._v("\n        "+e._s(e._f("number")(t.row.pValue))+"\n      ")]),e._v(" "),n("b-table-column",{attrs:{field:"FDR",label:"FDR",sortable:"",numeric:""}},[e._v("\n        "+e._s(e._f("number")(t.row.FDR))+"\n      ")])]}}])}),e._v(" "),n("b-select",{class:{"shift-page-select":e.isPaginated,"page-shift":!e.isPaginated},model:{value:e.perPage,callback:function(t){e.perPage=t},expression:"perPage"}},[n("option",{attrs:{value:"10"}},[e._v("10 per page")]),e._v(" "),n("option",{attrs:{value:"20"}},[e._v("20 per page")]),e._v(" "),n("option",{attrs:{value:"50"}},[e._v("50 per page")]),e._v(" "),n("option",{attrs:{value:"1000"}},[e._v("All")])])],1)},[],!1,null,"0ffda66a",null).exports,u=function(t,e){return t<e?-1:e<t?1:e<=t?0:NaN},c=function(o){var n;return 1===o.length&&(n=o,o=function(t,e){return u(n(t),e)}),{left:function(t,e,n,r){for(null==n&&(n=0),null==r&&(r=t.length);n<r;){var i=n+r>>>1;o(t[i],e)<0?n=i+1:r=i}return n},right:function(t,e,n,r){for(null==n&&(n=0),null==r&&(r=t.length);n<r;){var i=n+r>>>1;0<o(t[i],e)?r=i:n=i+1}return n}}};var l=c(u),f=l.right,h=(l.left,f);var m=function(t,e){var n,r,i,o=t.length,a=-1;if(null==e){for(;++a<o;)if(null!=(n=t[a])&&n<=n)for(r=i=n;++a<o;)null!=(n=t[a])&&(n<r&&(r=n),i<n&&(i=n))}else for(;++a<o;)if(null!=(n=e(t[a],a,t))&&n<=n)for(r=i=n;++a<o;)null!=(n=e(t[a],a,t))&&(n<r&&(r=n),i<n&&(i=n));return[r,i]},d=Array.prototype,p=(d.slice,d.map,function(t,e,n){t=+t,e=+e,n=(i=arguments.length)<2?(e=t,t=0,1):i<3?1:+n;for(var r=-1,i=0|Math.max(0,Math.ceil((e-t)/n)),o=new Array(i);++r<i;)o[r]=t+r*n;return o}),v=Math.sqrt(50),g=Math.sqrt(10),y=Math.sqrt(2),x=function(t,e,n){var r,i,o,a,s=-1;if(n=+n,(t=+t)===(e=+e)&&0<n)return[t];if((r=e<t)&&(i=t,t=e,e=i),0===(a=w(t,e,n))||!isFinite(a))return[];if(0<a)for(t=Math.ceil(t/a),e=Math.floor(e/a),o=new Array(i=Math.ceil(e-t+1));++s<i;)o[s]=(t+s)*a;else for(t=Math.floor(t*a),e=Math.ceil(e*a),o=new Array(i=Math.ceil(t-e+1));++s<i;)o[s]=(t-s)/a;return r&&o.reverse(),o};function w(t,e,n){var r=(e-t)/Math.max(0,n),i=Math.floor(Math.log(r)/Math.LN10),o=r/Math.pow(10,i);return 0<=i?(v<=o?10:g<=o?5:y<=o?2:1)*Math.pow(10,i):-Math.pow(10,-i)/(v<=o?10:g<=o?5:y<=o?2:1)}function b(t,e,n){var r=Math.abs(e-t)/Math.max(0,n),i=Math.pow(10,Math.floor(Math.log(r)/Math.LN10)),o=r/i;return v<=o?i*=10:g<=o?i*=5:y<=o&&(i*=2),e<t?-i:i}function _(t,e){switch(arguments.length){case 0:break;case 1:this.range(t);break;default:this.range(e).domain(t)}return this}function M(t,e){switch(arguments.length){case 0:break;case 1:this.interpolator(t);break;default:this.interpolator(e).domain(t)}return this}var S="$";function C(){}function k(t,e){var n=new C;if(t instanceof C)t.each(function(t,e){n.set(e,t)});else if(Array.isArray(t)){var r,i=-1,o=t.length;if(null==e)for(;++i<o;)n.set(i,t[i]);else for(;++i<o;)n.set(e(r=t[i],i,t),r)}else if(t)for(var a in t)n.set(a,t[a]);return n}C.prototype=k.prototype={constructor:C,has:function(t){return S+t in this},get:function(t){return this[S+t]},set:function(t,e){return this[S+t]=e,this},remove:function(t){var e=S+t;return e in this&&delete this[e]},clear:function(){for(var t in this)t[0]===S&&delete this[t]},keys:function(){var t=[];for(var e in this)e[0]===S&&t.push(e.slice(1));return t},values:function(){var t=[];for(var e in this)e[0]===S&&t.push(this[e]);return t},entries:function(){var t=[];for(var e in this)e[0]===S&&t.push({key:e.slice(1),value:this[e]});return t},size:function(){var t=0;for(var e in this)e[0]===S&&++t;return t},empty:function(){for(var t in this)if(t[0]===S)return!1;return!0},each:function(t){for(var e in this)e[0]===S&&t(this[e],e.slice(1),this)}};var T=k;function A(){}var N=T.prototype;A.prototype={constructor:A,has:N.has,add:function(t){return this[S+(t+="")]=t,this},remove:N.remove,clear:N.clear,values:N.keys,size:N.size,empty:N.empty,each:N.each};var D=Array.prototype,O=D.map,I=D.slice,z={name:"implicit"};function j(){var o,a,t=function t(){var o=T(),a=[],r=[],i=z;function s(t){var e=t+"",n=o.get(e);if(!n){if(i!==z)return i;o.set(e,n=a.push(t))}return r[(n-1)%r.length]}return s.domain=function(t){if(!arguments.length)return a.slice();a=[],o=T();for(var e,n,r=-1,i=t.length;++r<i;)o.has(n=(e=t[r])+"")||o.set(n,a.push(e));return s},s.range=function(t){return arguments.length?(r=I.call(t),s):r.slice()},s.unknown=function(t){return arguments.length?(i=t,s):i},s.copy=function(){return t(a,r).unknown(i)},_.apply(s,arguments),s}().unknown(void 0),s=t.domain,u=t.range,c=[0,1],l=!1,f=0,h=0,d=.5;function e(){var t=s().length,e=c[1]<c[0],n=c[e-0],r=c[1-e];o=(r-n)/Math.max(1,t-f+2*h),l&&(o=Math.floor(o)),n+=(r-n-o*(t-f))*d,a=o*(1-f),l&&(n=Math.round(n),a=Math.round(a));var i=p(t).map(function(t){return n+o*t});return u(e?i.reverse():i)}return delete t.unknown,t.domain=function(t){return arguments.length?(s(t),e()):s()},t.range=function(t){return arguments.length?(c=[+t[0],+t[1]],e()):c.slice()},t.rangeRound=function(t){return c=[+t[0],+t[1]],l=!0,e()},t.bandwidth=function(){return a},t.step=function(){return o},t.round=function(t){return arguments.length?(l=!!t,e()):l},t.padding=function(t){return arguments.length?(f=Math.min(1,h=+t),e()):f},t.paddingInner=function(t){return arguments.length?(f=Math.min(1,t),e()):f},t.paddingOuter=function(t){return arguments.length?(h=+t,e()):h},t.align=function(t){return arguments.length?(d=Math.max(0,Math.min(1,t)),e()):d},t.copy=function(){return j(s(),c).round(l).paddingInner(f).paddingOuter(h).align(d)},_.apply(e(),arguments)}var E=n(4),L=function(t){return function(){return t}},P=function(t){return+t},R=[0,1];function F(t){return t}function U(e,n){return(n-=e=+e)?function(t){return(t-e)/n}:L(isNaN(n)?NaN:.5)}function q(t){var e,n=t[0],r=t[t.length-1];return r<n&&(e=n,n=r,r=e),function(t){return Math.max(n,Math.min(r,t))}}function G(t,e,n){var r=t[0],i=t[1],o=e[0],a=e[1];return o=i<r?(r=U(i,r),n(a,o)):(r=U(r,i),n(o,a)),function(t){return o(r(t))}}function V(n,t,e){var r=Math.min(n.length,t.length)-1,i=new Array(r),o=new Array(r),a=-1;for(n[r]<n[0]&&(n=n.slice().reverse(),t=t.slice().reverse());++a<r;)i[a]=U(n[a],n[a+1]),o[a]=e(t[a],t[a+1]);return function(t){var e=h(n,t,1,r)-1;return o[e](i[e](t))}}function Y(t,e){return e.domain(t.domain()).range(t.range()).interpolate(t.interpolate()).clamp(t.clamp()).unknown(t.unknown())}function B(){var n,r,e,i,o,a,s=R,u=R,c=E.a,l=F;function f(){return i=2<Math.min(s.length,u.length)?V:G,o=a=null,h}function h(t){return isNaN(t=+t)?e:(o||(o=i(s.map(n),u,c)))(n(l(t)))}return h.invert=function(t){return l(r((a||(a=i(u,s.map(n),E.b)))(t)))},h.domain=function(t){return arguments.length?(s=O.call(t,P),l===F||(l=q(s)),f()):s.slice()},h.range=function(t){return arguments.length?(u=I.call(t),f()):u.slice()},h.rangeRound=function(t){return u=I.call(t),c=E.e,f()},h.clamp=function(t){return arguments.length?(l=t?q(s):F,h):l!==F},h.interpolate=function(t){return arguments.length?(c=t,f()):c},h.unknown=function(t){return arguments.length?(e=t,h):e},function(t,e){return n=t,r=e,f()}}function H(t,e){return B()(t,e)}var W=function(t,e){if((n=(t=e?t.toExponential(e-1):t.toExponential()).indexOf("e"))<0)return null;var n,r=t.slice(0,n);return[1<r.length?r[0]+r.slice(2):r,+t.slice(n+1)]},$=function(t){return(t=W(Math.abs(t)))?t[1]:NaN},X=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function K(t){return new Z(t)}function Z(t){if(!(e=X.exec(t)))throw new Error("invalid format: "+t);var e;this.fill=e[1]||" ",this.align=e[2]||">",this.sign=e[3]||"-",this.symbol=e[4]||"",this.zero=!!e[5],this.width=e[6]&&+e[6],this.comma=!!e[7],this.precision=e[8]&&+e[8].slice(1),this.trim=!!e[9],this.type=e[10]||""}K.prototype=Z.prototype,Z.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(null==this.width?"":Math.max(1,0|this.width))+(this.comma?",":"")+(null==this.precision?"":"."+Math.max(0,0|this.precision))+(this.trim?"~":"")+this.type};var J,Q,tt,et,nt=function(t,e){var n=W(t,e);if(!n)return t+"";var r=n[0],i=n[1];return i<0?"0."+new Array(-i).join("0")+r:r.length>i+1?r.slice(0,i+1)+"."+r.slice(i+1):r+new Array(i-r.length+2).join("0")},rt={"%":function(t,e){return(100*t).toFixed(e)},b:function(t){return Math.round(t).toString(2)},c:function(t){return t+""},d:function(t){return Math.round(t).toString(10)},e:function(t,e){return t.toExponential(e)},f:function(t,e){return t.toFixed(e)},g:function(t,e){return t.toPrecision(e)},o:function(t){return Math.round(t).toString(8)},p:function(t,e){return nt(100*t,e)},r:nt,s:function(t,e){var n=W(t,e);if(!n)return t+"";var r=n[0],i=n[1],o=i-(J=3*Math.max(-8,Math.min(8,Math.floor(i/3))))+1,a=r.length;return o===a?r:a<o?r+new Array(o-a+1).join("0"):0<o?r.slice(0,o)+"."+r.slice(o):"0."+new Array(1-o).join("0")+W(t,Math.max(0,e+o-1))[0]},X:function(t){return Math.round(t).toString(16).toUpperCase()},x:function(t){return Math.round(t).toString(16)}},it=function(t){return t},ot=["y","z","a","f","p","n","","m","","k","M","G","T","P","E","Z","Y"];Q=function(t){var e,s,u,_=t.grouping&&t.thousands?(s=t.grouping,u=t.thousands,function(t,e){for(var n=t.length,r=[],i=0,o=s[0],a=0;0<n&&0<o&&(e<a+o+1&&(o=Math.max(1,e-a)),r.push(t.substring(n-=o,n+o)),!((a+=o+1)>e));)o=s[i=(i+1)%s.length];return r.reverse().join(u)}):it,r=t.currency,M=t.decimal,S=t.numerals?(e=t.numerals,function(t){return t.replace(/[0-9]/g,function(t){return e[+t]})}):it,i=t.percent||"%";function a(t){var c=(t=K(t)).fill,l=t.align,f=t.sign,e=t.symbol,h=t.zero,d=t.width,p=t.comma,v=t.precision,g=t.trim,m=t.type;"n"===m?(p=!0,m="g"):rt[m]||(null==v&&(v=12),g=!0,m="g"),(h||"0"===c&&"="===l)&&(h=!0,c="0",l="=");var y="$"===e?r[0]:"#"===e&&/[boxX]/.test(m)?"0"+m.toLowerCase():"",x="$"===e?r[1]:/[%p]/.test(m)?i:"",w=rt[m],b=/[defgprs%]/.test(m);function n(t){var e,n,r,i=y,o=x;if("c"===m)o=w(t)+o,t="";else{var a=(t=+t)<0;if(t=w(Math.abs(t),v),g&&(t=function(t){t:for(var e,n=t.length,r=1,i=-1;r<n;++r)switch(t[r]){case".":i=e=r;break;case"0":0===i&&(i=r),e=r;break;default:if(0<i){if(!+t[r])break t;i=0}}return 0<i?t.slice(0,i)+t.slice(e+1):t}(t)),a&&0==+t&&(a=!1),i=(a?"("===f?f:"-":"-"===f||"("===f?"":f)+i,o=("s"===m?ot[8+J/3]:"")+o+(a&&"("===f?")":""),b)for(e=-1,n=t.length;++e<n;)if((r=t.charCodeAt(e))<48||57<r){o=(46===r?M+t.slice(e+1):t.slice(e))+o,t=t.slice(0,e);break}}p&&!h&&(t=_(t,1/0));var s=i.length+t.length+o.length,u=s<d?new Array(d-s+1).join(c):"";switch(p&&h&&(t=_(u+t,u.length?d-o.length:1/0),u=""),l){case"<":t=i+t+o+u;break;case"=":t=i+u+t+o;break;case"^":t=u.slice(0,s=u.length>>1)+i+t+o+u.slice(s);break;default:t=u+i+t+o}return S(t)}return v=null==v?6:/[gprs]/.test(m)?Math.max(1,Math.min(21,v)):Math.max(0,Math.min(20,v)),n.toString=function(){return t+""},n}return{format:a,formatPrefix:function(t,e){var n=a(((t=K(t)).type="f",t)),r=3*Math.max(-8,Math.min(8,Math.floor($(e)/3))),i=Math.pow(10,-r),o=ot[8+r/3];return function(t){return n(i*t)+o}}}}({decimal:".",thousands:",",grouping:[3],currency:["$",""]}),tt=Q.format,et=Q.formatPrefix;var at=function(t,e,n,r){var i,o,a,s,u,c,l=b(t,e,n);switch((r=K(null==r?",f":r)).type){case"s":var f=Math.max(Math.abs(t),Math.abs(e));return null!=r.precision||isNaN((u=l,c=f,i=Math.max(0,3*Math.max(-8,Math.min(8,Math.floor($(c)/3)))-$(Math.abs(u)))))||(r.precision=i),et(r,f);case"":case"e":case"g":case"p":case"r":null!=r.precision||isNaN((a=l,s=Math.max(Math.abs(t),Math.abs(e)),a=Math.abs(a),s=Math.abs(s)-a,i=Math.max(0,$(s)-$(a))+1))||(r.precision=i-("e"===r.type));break;case"f":case"%":null!=r.precision||isNaN((o=l,i=Math.max(0,-$(Math.abs(o)))))||(r.precision=i-2*("%"===r.type))}return tt(r)};function st(s){var u=s.domain;return s.ticks=function(t){var e=u();return x(e[0],e[e.length-1],null==t?10:t)},s.tickFormat=function(t,e){var n=u();return at(n[0],n[n.length-1],null==t?10:t,e)},s.nice=function(t){null==t&&(t=10);var e,n=u(),r=0,i=n.length-1,o=n[r],a=n[i];return a<o&&(e=o,o=a,a=e,e=r,r=i,i=e),0<(e=w(o,a,t))?e=w(o=Math.floor(o/e)*e,a=Math.ceil(a/e)*e,t):e<0&&(e=w(o=Math.ceil(o*e)/e,a=Math.floor(a*e)/e,t)),0<e?(n[r]=Math.floor(o/e)*e,n[i]=Math.ceil(a/e)*e,u(n)):e<0&&(n[r]=Math.ceil(o*e)/e,n[i]=Math.floor(a*e)/e,u(n)),s},s}function ut(){var t=H(F,F);return t.copy=function(){return Y(t,ut())},_.apply(t,arguments),st(t)}var ct=new Date,lt=new Date;function ft(o,a,n,r){function s(t){return o(t=new Date(+t)),t}return(s.floor=s).ceil=function(t){return o(t=new Date(t-1)),a(t,1),o(t),t},s.round=function(t){var e=s(t),n=s.ceil(t);return t-e<n-t?e:n},s.offset=function(t,e){return a(t=new Date(+t),null==e?1:Math.floor(e)),t},s.range=function(t,e,n){var r,i=[];if(t=s.ceil(t),n=null==n?1:Math.floor(n),!(t<e&&0<n))return i;for(;i.push(r=new Date(+t)),a(t,n),o(t),r<t&&t<e;);return i},s.filter=function(n){return ft(function(t){if(t<=t)for(;o(t),!n(t);)t.setTime(t-1)},function(t,e){if(t<=t)if(e<0)for(;++e<=0;)for(;a(t,-1),!n(t););else for(;0<=--e;)for(;a(t,1),!n(t););})},n&&(s.count=function(t,e){return ct.setTime(+t),lt.setTime(+e),o(ct),o(lt),Math.floor(n(ct,lt))},s.every=function(e){return e=Math.floor(e),isFinite(e)&&0<e?1<e?s.filter(r?function(t){return r(t)%e==0}:function(t){return s.count(0,t)%e==0}):s:null}),s}var ht=ft(function(){},function(t,e){t.setTime(+t+e)},function(t,e){return e-t});ht.every=function(n){return n=Math.floor(n),isFinite(n)&&0<n?1<n?ft(function(t){t.setTime(Math.floor(t/n)*n)},function(t,e){t.setTime(+t+e*n)},function(t,e){return(e-t)/n}):ht:null};ht.range;var dt=6e4,pt=36e5,vt=ft(function(t){t.setTime(1e3*Math.floor(t/1e3))},function(t,e){t.setTime(+t+1e3*e)},function(t,e){return(e-t)/1e3},function(t){return t.getUTCSeconds()}),gt=(vt.range,ft(function(t){t.setTime(Math.floor(t/dt)*dt)},function(t,e){t.setTime(+t+e*dt)},function(t,e){return(e-t)/dt},function(t){return t.getMinutes()})),mt=(gt.range,ft(function(t){var e=t.getTimezoneOffset()*dt%pt;e<0&&(e+=pt),t.setTime(Math.floor((+t-e)/pt)*pt+e)},function(t,e){t.setTime(+t+e*pt)},function(t,e){return(e-t)/pt},function(t){return t.getHours()})),yt=(mt.range,ft(function(t){t.setHours(0,0,0,0)},function(t,e){t.setDate(t.getDate()+e)},function(t,e){return(e-t-(e.getTimezoneOffset()-t.getTimezoneOffset())*dt)/864e5},function(t){return t.getDate()-1})),xt=yt;yt.range;function wt(e){return ft(function(t){t.setDate(t.getDate()-(t.getDay()+7-e)%7),t.setHours(0,0,0,0)},function(t,e){t.setDate(t.getDate()+7*e)},function(t,e){return(e-t-(e.getTimezoneOffset()-t.getTimezoneOffset())*dt)/6048e5})}var bt=wt(0),_t=wt(1),Mt=wt(2),St=wt(3),Ct=wt(4),kt=wt(5),Tt=wt(6),At=(bt.range,_t.range,Mt.range,St.range,Ct.range,kt.range,Tt.range,ft(function(t){t.setDate(1),t.setHours(0,0,0,0)},function(t,e){t.setMonth(t.getMonth()+e)},function(t,e){return e.getMonth()-t.getMonth()+12*(e.getFullYear()-t.getFullYear())},function(t){return t.getMonth()})),Nt=(At.range,ft(function(t){t.setMonth(0,1),t.setHours(0,0,0,0)},function(t,e){t.setFullYear(t.getFullYear()+e)},function(t,e){return e.getFullYear()-t.getFullYear()},function(t){return t.getFullYear()}));Nt.every=function(n){return isFinite(n=Math.floor(n))&&0<n?ft(function(t){t.setFullYear(Math.floor(t.getFullYear()/n)*n),t.setMonth(0,1),t.setHours(0,0,0,0)},function(t,e){t.setFullYear(t.getFullYear()+e*n)}):null};var Dt=Nt,Ot=(Nt.range,ft(function(t){t.setUTCSeconds(0,0)},function(t,e){t.setTime(+t+e*dt)},function(t,e){return(e-t)/dt},function(t){return t.getUTCMinutes()})),It=(Ot.range,ft(function(t){t.setUTCMinutes(0,0,0)},function(t,e){t.setTime(+t+e*pt)},function(t,e){return(e-t)/pt},function(t){return t.getUTCHours()})),zt=(It.range,ft(function(t){t.setUTCHours(0,0,0,0)},function(t,e){t.setUTCDate(t.getUTCDate()+e)},function(t,e){return(e-t)/864e5},function(t){return t.getUTCDate()-1})),jt=zt;zt.range;function Et(e){return ft(function(t){t.setUTCDate(t.getUTCDate()-(t.getUTCDay()+7-e)%7),t.setUTCHours(0,0,0,0)},function(t,e){t.setUTCDate(t.getUTCDate()+7*e)},function(t,e){return(e-t)/6048e5})}var Lt=Et(0),Pt=Et(1),Rt=Et(2),Ft=Et(3),Ut=Et(4),qt=Et(5),Gt=Et(6),Vt=(Lt.range,Pt.range,Rt.range,Ft.range,Ut.range,qt.range,Gt.range,ft(function(t){t.setUTCDate(1),t.setUTCHours(0,0,0,0)},function(t,e){t.setUTCMonth(t.getUTCMonth()+e)},function(t,e){return e.getUTCMonth()-t.getUTCMonth()+12*(e.getUTCFullYear()-t.getUTCFullYear())},function(t){return t.getUTCMonth()})),Yt=(Vt.range,ft(function(t){t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},function(t,e){t.setUTCFullYear(t.getUTCFullYear()+e)},function(t,e){return e.getUTCFullYear()-t.getUTCFullYear()},function(t){return t.getUTCFullYear()}));Yt.every=function(n){return isFinite(n=Math.floor(n))&&0<n?ft(function(t){t.setUTCFullYear(Math.floor(t.getUTCFullYear()/n)*n),t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},function(t,e){t.setUTCFullYear(t.getUTCFullYear()+e*n)}):null};var Bt=Yt;Yt.range;function Ht(t){if(0<=t.y&&t.y<100){var e=new Date(-1,t.m,t.d,t.H,t.M,t.S,t.L);return e.setFullYear(t.y),e}return new Date(t.y,t.m,t.d,t.H,t.M,t.S,t.L)}function Wt(t){if(0<=t.y&&t.y<100){var e=new Date(Date.UTC(-1,t.m,t.d,t.H,t.M,t.S,t.L));return e.setUTCFullYear(t.y),e}return new Date(Date.UTC(t.y,t.m,t.d,t.H,t.M,t.S,t.L))}function $t(t){return{y:t,m:0,d:1,H:0,M:0,S:0,L:0}}var Xt,Kt,Zt,Jt={"-":"",_:" ",0:"0"},Qt=/^\s*\d+/,te=/^%/,ee=/[\\^$*+?|[\]().{}]/g;function ne(t,e,n){var r=t<0?"-":"",i=(r?-t:t)+"",o=i.length;return r+(o<n?new Array(n-o+1).join(e)+i:i)}function re(t){return t.replace(ee,"\\$&")}function ie(t){return new RegExp("^(?:"+t.map(re).join("|")+")","i")}function oe(t){for(var e={},n=-1,r=t.length;++n<r;)e[t[n].toLowerCase()]=n;return e}function ae(t,e,n){var r=Qt.exec(e.slice(n,n+1));return r?(t.w=+r[0],n+r[0].length):-1}function se(t,e,n){var r=Qt.exec(e.slice(n,n+1));return r?(t.u=+r[0],n+r[0].length):-1}function ue(t,e,n){var r=Qt.exec(e.slice(n,n+2));return r?(t.U=+r[0],n+r[0].length):-1}function ce(t,e,n){var r=Qt.exec(e.slice(n,n+2));return r?(t.V=+r[0],n+r[0].length):-1}function le(t,e,n){var r=Qt.exec(e.slice(n,n+2));return r?(t.W=+r[0],n+r[0].length):-1}function fe(t,e,n){var r=Qt.exec(e.slice(n,n+4));return r?(t.y=+r[0],n+r[0].length):-1}function he(t,e,n){var r=Qt.exec(e.slice(n,n+2));return r?(t.y=+r[0]+(68<+r[0]?1900:2e3),n+r[0].length):-1}function de(t,e,n){var r=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(e.slice(n,n+6));return r?(t.Z=r[1]?0:-(r[2]+(r[3]||"00")),n+r[0].length):-1}function pe(t,e,n){var r=Qt.exec(e.slice(n,n+2));return r?(t.m=r[0]-1,n+r[0].length):-1}function ve(t,e,n){var r=Qt.exec(e.slice(n,n+2));return r?(t.d=+r[0],n+r[0].length):-1}function ge(t,e,n){var r=Qt.exec(e.slice(n,n+3));return r?(t.m=0,t.d=+r[0],n+r[0].length):-1}function me(t,e,n){var r=Qt.exec(e.slice(n,n+2));return r?(t.H=+r[0],n+r[0].length):-1}function ye(t,e,n){var r=Qt.exec(e.slice(n,n+2));return r?(t.M=+r[0],n+r[0].length):-1}function xe(t,e,n){var r=Qt.exec(e.slice(n,n+2));return r?(t.S=+r[0],n+r[0].length):-1}function we(t,e,n){var r=Qt.exec(e.slice(n,n+3));return r?(t.L=+r[0],n+r[0].length):-1}function be(t,e,n){var r=Qt.exec(e.slice(n,n+6));return r?(t.L=Math.floor(r[0]/1e3),n+r[0].length):-1}function _e(t,e,n){var r=te.exec(e.slice(n,n+1));return r?n+r[0].length:-1}function Me(t,e,n){var r=Qt.exec(e.slice(n));return r?(t.Q=+r[0],n+r[0].length):-1}function Se(t,e,n){var r=Qt.exec(e.slice(n));return r?(t.Q=1e3*+r[0],n+r[0].length):-1}function Ce(t,e){return ne(t.getDate(),e,2)}function ke(t,e){return ne(t.getHours(),e,2)}function Te(t,e){return ne(t.getHours()%12||12,e,2)}function Ae(t,e){return ne(1+xt.count(Dt(t),t),e,3)}function Ne(t,e){return ne(t.getMilliseconds(),e,3)}function De(t,e){return Ne(t,e)+"000"}function Oe(t,e){return ne(t.getMonth()+1,e,2)}function Ie(t,e){return ne(t.getMinutes(),e,2)}function ze(t,e){return ne(t.getSeconds(),e,2)}function je(t){var e=t.getDay();return 0===e?7:e}function Ee(t,e){return ne(bt.count(Dt(t),t),e,2)}function Le(t,e){var n=t.getDay();return t=4<=n||0===n?Ct(t):Ct.ceil(t),ne(Ct.count(Dt(t),t)+(4===Dt(t).getDay()),e,2)}function Pe(t){return t.getDay()}function Re(t,e){return ne(_t.count(Dt(t),t),e,2)}function Fe(t,e){return ne(t.getFullYear()%100,e,2)}function Ue(t,e){return ne(t.getFullYear()%1e4,e,4)}function qe(t){var e=t.getTimezoneOffset();return(0<e?"-":(e*=-1,"+"))+ne(e/60|0,"0",2)+ne(e%60,"0",2)}function Ge(t,e){return ne(t.getUTCDate(),e,2)}function Ve(t,e){return ne(t.getUTCHours(),e,2)}function Ye(t,e){return ne(t.getUTCHours()%12||12,e,2)}function Be(t,e){return ne(1+jt.count(Bt(t),t),e,3)}function He(t,e){return ne(t.getUTCMilliseconds(),e,3)}function We(t,e){return He(t,e)+"000"}function $e(t,e){return ne(t.getUTCMonth()+1,e,2)}function Xe(t,e){return ne(t.getUTCMinutes(),e,2)}function Ke(t,e){return ne(t.getUTCSeconds(),e,2)}function Ze(t){var e=t.getUTCDay();return 0===e?7:e}function Je(t,e){return ne(Lt.count(Bt(t),t),e,2)}function Qe(t,e){var n=t.getUTCDay();return t=4<=n||0===n?Ut(t):Ut.ceil(t),ne(Ut.count(Bt(t),t)+(4===Bt(t).getUTCDay()),e,2)}function tn(t){return t.getUTCDay()}function en(t,e){return ne(Pt.count(Bt(t),t),e,2)}function nn(t,e){return ne(t.getUTCFullYear()%100,e,2)}function rn(t,e){return ne(t.getUTCFullYear()%1e4,e,4)}function on(){return"+0000"}function an(){return"%"}function sn(t){return+t}function un(t){return Math.floor(+t/1e3)}Xt=function(t){var r=t.dateTime,i=t.date,o=t.time,e=t.periods,n=t.days,a=t.shortDays,s=t.months,u=t.shortMonths,c=ie(e),l=oe(e),f=ie(n),h=oe(n),d=ie(a),p=oe(a),v=ie(s),g=oe(s),m=ie(u),y=oe(u),x={a:function(t){return a[t.getDay()]},A:function(t){return n[t.getDay()]},b:function(t){return u[t.getMonth()]},B:function(t){return s[t.getMonth()]},c:null,d:Ce,e:Ce,f:De,H:ke,I:Te,j:Ae,L:Ne,m:Oe,M:Ie,p:function(t){return e[+(12<=t.getHours())]},Q:sn,s:un,S:ze,u:je,U:Ee,V:Le,w:Pe,W:Re,x:null,X:null,y:Fe,Y:Ue,Z:qe,"%":an},w={a:function(t){return a[t.getUTCDay()]},A:function(t){return n[t.getUTCDay()]},b:function(t){return u[t.getUTCMonth()]},B:function(t){return s[t.getUTCMonth()]},c:null,d:Ge,e:Ge,f:We,H:Ve,I:Ye,j:Be,L:He,m:$e,M:Xe,p:function(t){return e[+(12<=t.getUTCHours())]},Q:sn,s:un,S:Ke,u:Ze,U:Je,V:Qe,w:tn,W:en,x:null,X:null,y:nn,Y:rn,Z:on,"%":an},b={a:function(t,e,n){var r=d.exec(e.slice(n));return r?(t.w=p[r[0].toLowerCase()],n+r[0].length):-1},A:function(t,e,n){var r=f.exec(e.slice(n));return r?(t.w=h[r[0].toLowerCase()],n+r[0].length):-1},b:function(t,e,n){var r=m.exec(e.slice(n));return r?(t.m=y[r[0].toLowerCase()],n+r[0].length):-1},B:function(t,e,n){var r=v.exec(e.slice(n));return r?(t.m=g[r[0].toLowerCase()],n+r[0].length):-1},c:function(t,e,n){return S(t,r,e,n)},d:ve,e:ve,f:be,H:me,I:me,j:ge,L:we,m:pe,M:ye,p:function(t,e,n){var r=c.exec(e.slice(n));return r?(t.p=l[r[0].toLowerCase()],n+r[0].length):-1},Q:Me,s:Se,S:xe,u:se,U:ue,V:ce,w:ae,W:le,x:function(t,e,n){return S(t,i,e,n)},X:function(t,e,n){return S(t,o,e,n)},y:he,Y:fe,Z:de,"%":_e};function _(u,c){return function(t){var e,n,r,i=[],o=-1,a=0,s=u.length;for(t instanceof Date||(t=new Date(+t));++o<s;)37===u.charCodeAt(o)&&(i.push(u.slice(a,o)),null!=(n=Jt[e=u.charAt(++o)])?e=u.charAt(++o):n="e"===e?" ":"0",(r=c[e])&&(e=r(t,n)),i.push(e),a=o+1);return i.push(u.slice(a,o)),i.join("")}}function M(i,o){return function(t){var e,n,r=$t(1900);if(S(r,i,t+="",0)!=t.length)return null;if("Q"in r)return new Date(r.Q);if("p"in r&&(r.H=r.H%12+12*r.p),"V"in r){if(r.V<1||53<r.V)return null;"w"in r||(r.w=1),r.d="Z"in r?(e=4<(n=(e=Wt($t(r.y))).getUTCDay())||0===n?Pt.ceil(e):Pt(e),e=jt.offset(e,7*(r.V-1)),r.y=e.getUTCFullYear(),r.m=e.getUTCMonth(),e.getUTCDate()+(r.w+6)%7):(e=4<(n=(e=o($t(r.y))).getDay())||0===n?_t.ceil(e):_t(e),e=xt.offset(e,7*(r.V-1)),r.y=e.getFullYear(),r.m=e.getMonth(),e.getDate()+(r.w+6)%7)}else("W"in r||"U"in r)&&("w"in r||(r.w="u"in r?r.u%7:"W"in r?1:0),n="Z"in r?Wt($t(r.y)).getUTCDay():o($t(r.y)).getDay(),r.m=0,r.d="W"in r?(r.w+6)%7+7*r.W-(n+5)%7:r.w+7*r.U-(n+6)%7);return"Z"in r?(r.H+=r.Z/100|0,r.M+=r.Z%100,Wt(r)):o(r)}}function S(t,e,n,r){for(var i,o,a=0,s=e.length,u=n.length;a<s;){if(u<=r)return-1;if(37===(i=e.charCodeAt(a++))){if(i=e.charAt(a++),!(o=b[i in Jt?e.charAt(a++):i])||(r=o(t,n,r))<0)return-1}else if(i!=n.charCodeAt(r++))return-1}return r}return x.x=_(i,x),x.X=_(o,x),x.c=_(r,x),w.x=_(i,w),w.X=_(o,w),w.c=_(r,w),{format:function(t){var e=_(t+="",x);return e.toString=function(){return t},e},parse:function(t){var e=M(t+="",Ht);return e.toString=function(){return t},e},utcFormat:function(t){var e=_(t+="",w);return e.toString=function(){return t},e},utcParse:function(t){var e=M(t,Wt);return e.toString=function(){return t},e}}}({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]}),Xt.format,Xt.parse,Kt=Xt.utcFormat,Zt=Xt.utcParse;var cn="%Y-%m-%dT%H:%M:%S.%LZ";Date.prototype.toISOString||Kt(cn);+new Date("2000-01-01T00:00:00.000Z")||Zt(cn);function ln(){var e,n,r,i,o,a=0,s=1,u=F,c=!1;function l(t){return isNaN(t=+t)?o:u(0===r?.5:(t=(i(t)-e)*r,c?Math.max(0,Math.min(1,t)):t))}return l.domain=function(t){return arguments.length?(e=i(a=+t[0]),n=i(s=+t[1]),r=e===n?0:1/(n-e),l):[a,s]},l.clamp=function(t){return arguments.length?(c=!!t,l):c},l.interpolator=function(t){return arguments.length?(u=t,l):u},l.unknown=function(t){return arguments.length?(o=t,l):o},function(t){return e=(i=t)(a),n=t(s),r=e===n?0:1/(n-e),l}}function fn(t,e){return e.domain(t.domain()).interpolator(t.interpolator()).clamp(t.clamp()).unknown(t.unknown())}var hn=Array.prototype.slice,dn=function(t){return t},pn=1,vn=2,gn=3,mn=4,yn=1e-6;function xn(t){return"translate("+(t+.5)+",0)"}function wn(t){return"translate(0,"+(t+.5)+")"}function bn(){return!this.__axis}function _n(v,g){var m=[],y=null,x=null,w=6,b=6,_=3,M=v===pn||v===mn?-1:1,S=v===mn||v===vn?"x":"y",C=v===pn||v===gn?xn:wn;function e(t){var e=null==y?g.ticks?g.ticks.apply(g,m):g.domain():y,n=null==x?g.tickFormat?g.tickFormat.apply(g,m):dn:x,r=Math.max(w,0)+_,i=g.range(),o=+i[0]+.5,a=+i[i.length-1]+.5,s=(g.bandwidth?function(e){var n=Math.max(0,e.bandwidth()-1)/2;return e.round()&&(n=Math.round(n)),function(t){return+e(t)+n}}:function(e){return function(t){return+e(t)}})(g.copy()),u=t.selection?t.selection():t,c=u.selectAll(".domain").data([null]),l=u.selectAll(".tick").data(e,g).order(),f=l.exit(),h=l.enter().append("g").attr("class","tick"),d=l.select("line"),p=l.select("text");c=c.merge(c.enter().insert("path",".tick").attr("class","domain").attr("stroke","currentColor")),l=l.merge(h),d=d.merge(h.append("line").attr("stroke","currentColor").attr(S+"2",M*w)),p=p.merge(h.append("text").attr("fill","currentColor").attr(S,M*r).attr("dy",v===pn?"0em":v===gn?"0.71em":"0.32em")),t!==u&&(c=c.transition(t),l=l.transition(t),d=d.transition(t),p=p.transition(t),f=f.transition(t).attr("opacity",yn).attr("transform",function(t){return isFinite(t=s(t))?C(t):this.getAttribute("transform")}),h.attr("opacity",yn).attr("transform",function(t){var e=this.parentNode.__axis;return C(e&&isFinite(e=e(t))?e:s(t))})),f.remove(),c.attr("d",v===mn||v==vn?b?"M"+M*b+","+o+"H0.5V"+a+"H"+M*b:"M0.5,"+o+"V"+a:b?"M"+o+","+M*b+"V0.5H"+a+"V"+M*b:"M"+o+",0.5H"+a),l.attr("opacity",1).attr("transform",function(t){return C(s(t))}),d.attr(S+"2",M*w),p.attr(S,M*r).text(n),u.filter(bn).attr("fill","none").attr("font-size",10).attr("font-family","sans-serif").attr("text-anchor",v===vn?"start":v===mn?"end":"middle"),u.each(function(){this.__axis=s})}return e.scale=function(t){return arguments.length?(g=t,e):g},e.ticks=function(){return m=hn.call(arguments),e},e.tickArguments=function(t){return arguments.length?(m=null==t?[]:hn.call(t),e):m.slice()},e.tickValues=function(t){return arguments.length?(y=null==t?null:hn.call(t),e):y&&y.slice()},e.tickFormat=function(t){return arguments.length?(x=t,e):x},e.tickSize=function(t){return arguments.length?(w=b=+t,e):w},e.tickSizeInner=function(t){return arguments.length?(w=+t,e):w},e.tickSizeOuter=function(t){return arguments.length?(b=+t,e):b},e.tickPadding=function(t){return arguments.length?(_=+t,e):_},e}function Mn(t){return _n(gn,t)}function Sn(t){return _n(mn,t)}var Cn=n(0),kn=n(3),Tn=n.n(kn);function An(t){return(An="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var Nn=function(t){return"normalizedEnrichmentScore"in t&&t.normalizedEnrichmentScore<0?"FDR"in t&&.05<t.FDR?"#ffcf76":"darkorange":"FDR"in t&&.05<t.FDR?"lightsteelblue":"steelblue"},Dn={props:{containerId:{type:String,default:"wg-bar-container"},dimensions:{type:Object,default:function(){return{width:960,height:500}}},labelWidth:{type:Number,default:200},margins:{type:Object,default:function(){return{top:40,right:30,bottom:40,left:20}}},data:{type:Array,required:!0},valueKey:{type:String,required:!0},xLabel:{type:String}},data:function(){return{contextMenuShown:!1,downloadType:"png"}},computed:{processedData:function(){var n=this,i={};return this.data.map(function(t){for(var e=(t["description"in t&&t.description?"description":"geneSet"]),n=e,r=1;n in i;)n=e+"_"+r,r+=1;return t.label=n,i[n]=!0,t}).sort(function(t,e){return e[n.valueKey]-t[n.valueKey]})},xExtent:function(){var e=this,t=m(this.data.map(function(t){return t[e.valueKey]}));return 0<t[0]&&0<t[1]?t[0]=0:t[0]<0&&t[1]<0&&(t[1]=0),t},xAxisLabel:function(){return this.xLabel||this.valueKey},canvasWidth:function(){return this.dimensions.width-this.margins.left-this.margins.right},canvasHeight:function(){return this.dimensions.height-this.margins.top-this.margins.bottom}},methods:{plotBar:function(){var n=this;if(0!==this.processedData.length){var t=0,e=0;0==this.xExtent[0]?e=200<this.labelWidth?this.labelWidth:200:0==this.xExtent[1]&&(t=200<-this.labelWidth?this.labelWidth:200);var r=ut().range([0,this.canvasWidth-e+t]),i=j().rangeRound([0,this.canvasHeight]).padding(.1),o=Mn(r),a=Sn(i).tickSize(0).tickPadding(6);r.domain(this.xExtent).nice(),i.domain(this.processedData.map(function(t){return t.label}));var s=Object(Cn.select)("#wg-bar-container").html(null).append("svg").attr("width",this.dimensions.width).attr("height",this.dimensions.height),u=s.append("g").attr("transform","translate("+this.margins.left+","+this.margins.top+")");this.canvas=u;var c=(this.svg=s).append("g").attr("class","legend").attr("font-size",12),l=0;if(0<this.xExtent[1]&&(c.append("rect").attr("fill","steelblue").attr("x",0).attr("y",0).attr("width",20).attr("height",10),c.append("rect").attr("fill","lightsteelblue").attr("x",120).attr("y",0).attr("width",20).attr("height",10),l+=1),this.xExtent[0]<0){var f=0<this.xExtent[1]?22:0;c.append("rect").attr("fill","darkorange").attr("x",f).attr("y",0).attr("width",20).attr("height",10),c.append("rect").attr("fill","#ffcf76").attr("x",120+f).attr("y",0).attr("width",20).attr("height",10),l+=1}var h=1==l?23:45;if(c.append("text").attr("x",h).attr("y",10).text("FDR  0.05"),c.append("text").attr("x",120+h).attr("y",10).text("FDR > 0.05"),u.append("g").attr("class","x-axis").attr("transform","translate(".concat(e+t,", ").concat(this.canvasHeight,")")).style("font-size","12px").call(o).append("text").attr("class","x-label").attr("x",r(0)).attr("y",30).attr("fill","#000").text(this.xAxisLabel),20<this.processedData.length){var d=_n(pn,r);u.append("g").attr("class","x-axis-top").attr("transform","translate(".concat(e+t,", 0)")).style("font-size","12px").call(d)}var p=u.append("g").attr("class","y-axis").style("font-size","12px").attr("transform","translate(".concat(e+r(0)+t,",0)")).call(a).selectAll(".tick").filter(function(t,e){return n.processedData[e][n.valueKey]<0});u.selectAll(".y-axis .tick line").remove(),p.select("text").attr("x",9).style("text-anchor","start");u.selectAll(".wg-bar").data(this.processedData).enter().append("rect").attr("class","wg-bar").attr("fill",Nn).attr("x",function(t){return r(Math.min(0,t[n.valueKey]))}).attr("y",function(t){return i(t.label)}).attr("transform","translate(".concat(e+t,",0)")).attr("width",function(t){return Math.abs(r(t[n.valueKey])-r(0))}).attr("height",i.bandwidth).call(function(t){t.each(function(t,e,n){t.hasOwnProperty("options")&&"object"===An(t.options)&&t.options.constructor===Object&&"function"==typeof t.options.callback&&Object(Cn.select)(n[e]).on("click",t.options.callback)})});var v=this.containerId+"-contextmenu";s.on("contextmenu",function(){n.contextMenuShown=!0;var t=Object(Cn.mouse)(Object(Cn.select)("#"+v).node());Object(Cn.select)("#".concat(v," .dropdown-menu")).style("left",t[0]+"px").style("top",t[1]+"px"),Cn.event.preventDefault()});for(var g=document.querySelectorAll("#"+this.containerId+" .y-axis .tick"),m=document.querySelector("#"+this.containerId+" svg").getBoundingClientRect().x,y=99999,x=0,w=0;x<g.length;x++)if((w=g[x].getBoundingClientRect().x)<y&&(y=w),g[x].getBoundingClientRect().x<m){var b=g[x].getElementsByTagName("text")[0];for(b.textContent=b.textContent.slice(0,-3)+"...";g[x].getBoundingClientRect().x<m;)b.textContent=b.textContent.slice(0,-4)+"..."}0<e&&u.attr("transform","translate(".concat(this.margins.left-y/2,", ").concat(this.margins.top,")"))}},download:function(){var n=this.dimensions.width,r=this.dimensions.height,t="data:image/svg+xml;base64,"+btoa('<svg xmlns="http://www.w3.org/2000/svg" version="1.1" viewBox="0 0 '.concat(n," ").concat(r,'" width="').concat(2*n,'" height="').concat(2*r,'">')+unescape(encodeURIComponent(this.svg.html()))+"</svg>");if("svg"==this.downloadType)Tn()(t,"wg_bar.svg");else if("png"==this.downloadType){var i=new Image;i.src=t,i.onload=function(){var t=document.createElement("canvas"),e=t.getContext("2d");t.width=2*n,t.height=2*r,e.drawImage(i,0,0),Tn()(t.toDataURL("image/png"),"wg_bar.png")}}this.cancelContextMenu()},cancelContextMenu:function(){this.contextMenuShown=!1}},watch:{data:"plotBar",dimensions:"plotBar"},created:function(){this.canvas=null,this.svg=null,document.body.addEventListener("click",this.cancelContextMenu)},mounted:function(){},updated:function(){},beforeDestroy:function(){this.canvas.selectAll(".wg-bar").on("click",null),this.svg.on("contextmenu",null),Object(Cn.select)("#"+this.containerId+"-contextmenu").on("click",null),document.body.removeEventListener("click",this.cancelContextMenu)}},On=(n(29),Object(a.a)(Dn,function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"wg-bar-wrapper"},[n("div",{staticClass:"dropdown context-menu-wrapper",class:{"is-active":e.contextMenuShown},attrs:{id:e.containerId+"-contextmenu"}},[n("div",{staticClass:"dropdown-menu",class:{"is-active":e.contextMenuShown},attrs:{role:"menu"}},[n("div",{staticClass:"dropdown-content"},[n("a",{staticClass:"dropdown-item",attrs:{role:"menuitem"},on:{click:e.download}},[e._v("Download")]),e._v(" "),n("div",{staticClass:"dropdown-item",attrs:{role:"menuitem"},on:{click:function(t){t.stopPropagation()}}},[n("label",{staticClass:"radio"},[n("input",{directives:[{name:"model",rawName:"v-model",value:e.downloadType,expression:"downloadType"}],attrs:{type:"radio",name:e.containerId+"-downloadType",value:"png"},domProps:{checked:e._q(e.downloadType,"png")},on:{change:function(t){e.downloadType="png"}}}),e._v(" PNG\n        ")]),e._v(" "),n("label",{staticClass:"radio"},[n("input",{directives:[{name:"model",rawName:"v-model",value:e.downloadType,expression:"downloadType"}],attrs:{type:"radio",name:"containerId + '-downloadType'",value:"svg"},domProps:{checked:e._q(e.downloadType,"svg")},on:{change:function(t){e.downloadType="svg"}}}),e._v(" SVG\n        ")])])])])]),e._v(" "),n("div",{staticClass:"wg-bar-container",attrs:{id:e.containerId}},[e._v("No significant results.")])])},[],!1,null,"33775dce",null).exports),In=n(26),zn={props:{containerId:{type:String,default:"venn-container"},input:{type:Number,required:!0},reference:{type:Number,required:!0},overlap:{type:Number,required:!0},width:{type:Number,default:500},height:{type:Number,default:300}},data:function(){return{contextMenuShown:!1,downloadType:"png"}},computed:{vennData:function(){return[{sets:["Input"],size:this.input,label:"Mapped input: "+this.input},{sets:["Reference"],size:this.reference,label:"Gene set: "+this.reference},{sets:["Input","Reference"],size:this.overlap,label:this.overlap.toString()}]}},methods:{draw:function(){var e=this,t=Object(In.VennDiagram)().width(this.width).height(this.height),n=Object(Cn.select)("#"+this.containerId).html(null).datum(this.vennData).call(t),r=["steelblue","darkorange"];n.selectAll(".venn-circle path").style("fill",function(t,e){return r[e]}),document.body.addEventListener("click",this.cancelContextMenu);var i=this.containerId+"-contextmenu";Object(Cn.select)("#"+i).on("click",function(){return Cn.event.stopPropagation()}),n.on("contextmenu",function(){e.contextMenuShown=!0;var t=Object(Cn.mouse)(Object(Cn.select)("#"+i).node());Object(Cn.select)("#".concat(i," .dropdown-menu")).style("left",t[0]+"px").style("top",t[1]+"px"),Cn.event.preventDefault()}),this.svg=n},download:function(){var n=this.width,r=this.height,t="data:image/svg+xml;base64,"+btoa('<svg xmlns="http://www.w3.org/2000/svg" version="1.1" viewBox="0 0 '.concat(n," ").concat(r,'" width="').concat(2*n,'" height="').concat(2*r,'">')+this.svg.html()+"</svg>");if("svg"==this.downloadType)Tn()(t,"wg_venn.svg");else if("png"==this.downloadType){var i=new Image;i.src=t,i.onload=function(){var t=document.createElement("canvas"),e=t.getContext("2d");t.width=2*n,t.height=2*r,e.drawImage(i,0,0),Tn()(t.toDataURL("image/png"),"wg_venn.png")}}this.cancelContextMenu()},cancelContextMenu:function(){this.contextMenuShown=!1}},created:function(){this.svg=null},mounted:function(){this.draw()},beforeDestroy:function(){this.svg.on("contextmenu",null),Object(Cn.select)("#"+this.containerId+"-contextmenu").on("click",null),document.body.removeEventListener("click",this.cancelContextMenu)},watch:{input:"draw",reference:"draw",overlap:"draw"}},jn=(n(30),Object(a.a)(zn,function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"venn-wrapper"},[n("div",{staticClass:"dropdown context-menu-wrapper",class:{"is-active":e.contextMenuShown},attrs:{id:e.containerId+"-contextmenu"}},[n("div",{staticClass:"dropdown-menu",class:{"is-active":e.contextMenuShown},attrs:{role:"menu"}},[n("div",{staticClass:"dropdown-content"},[n("a",{staticClass:"dropdown-item",attrs:{role:"menuitem"},on:{click:e.download}},[e._v("Download")]),e._v(" "),n("div",{staticClass:"dropdown-item",attrs:{role:"menuitem"}},[n("label",{staticClass:"radio"},[n("input",{directives:[{name:"model",rawName:"v-model",value:e.downloadType,expression:"downloadType"}],attrs:{type:"radio",name:e.containerId+"-downloadType",value:"png"},domProps:{checked:e._q(e.downloadType,"png")},on:{change:function(t){e.downloadType="png"}}}),e._v(" PNG\n        ")]),e._v(" "),n("label",{staticClass:"radio"},[n("input",{directives:[{name:"model",rawName:"v-model",value:e.downloadType,expression:"downloadType"}],attrs:{type:"radio",name:e.containerId+"-downloadType",value:"svg"},domProps:{checked:e._q(e.downloadType,"svg")},on:{change:function(t){e.downloadType="svg"}}}),e._v(" SVG\n        ")])])])])]),e._v(" "),n("div",{staticClass:"venn-container",attrs:{id:e.containerId}})])},[],!1,null,"4dc3ad69",null).exports),En=n(7),Ln=n.n(En),Pn={props:{containerId:{type:String,default:"wg-network-container"},geneSetId:{type:String,required:!0},highlightList:{type:Array},organism:{type:String,required:!0},hostName:{type:String,default:"www.webgestalt.org"}},data:function(){return{contextMenuShown:!1,downloadType:"png",isLoading:!1,elements:[]}},methods:{draw:function(){var n=this;if(this.elements){var t,e=document.getElementById(this.containerId),r=this.elements.length<500,i=Ln()({container:e,style:(t=r,[{selector:"core",style:{"active-bg-size":"2px","active-bg-opacity":.1}},{selector:"node",style:{width:t?"20px":"5px",height:t?"20px":"5px",padding:"10px",shape:"ellipse",label:"data(id)","font-size":t?"14px":"10px","text-valign":"center","text-halign":"center","z-index":"10","overlay-padding":0}},{selector:"edge",style:{"overlay-padding":0}},{selector:"node.highlight",style:{"background-color":"#ff7474"}}]),elements:this.elements}),o=i.layout({name:r?"cose":"concentric",animate:!1,nodeDimensionsIncludeLabels:!0,idealEdgeLength:function(t){return 72},componentSpacing:16,nodeOverlap:64,numIter:500,avoidOverlap:!0,spacingFactor:.5,concentric:function(t){return t.data("highlight")?2:1},levelWidth:function(t){return 1}});o.run(),setTimeout(function(){o.stop()},2e3),document.body.addEventListener("click",this.cancelContextMenu);var a=this.containerId+"-contextmenu",s=this.$refs.wrapper.querySelector("#".concat(a," .dropdown-menu"));return s.addEventListener("click",function(t){return t.stopPropagation()}),e.addEventListener("contextmenu",function(t){n.contextMenuShown=!0;var e=n.$refs.wrapper.getBoundingClientRect();s.style.left=t.clientX-e.left+"px",s.style.top=t.clientY-e.top+"px",t.preventDefault()}),this.cy=i,window.cy=i}},parseNet:function(t){this.elements=[];for(var e=t.split("\n"),n=[],r=0;r<e.length;r++){var i=e[r].trim().split("\t");1!==i.length&&(this.elements.push({group:"edges",data:{id:"edge-".concat(i[0],"-").concat(i[1]),source:i[0],target:i[1]}}),-1===n.indexOf(i[0])&&n.push(i[0]),-1===n.indexOf(i[1])&&n.push(i[1]))}for(var o=0;o<n.length;o++)this.elements.push({group:"nodes",data:{id:n[o],highlight:-1!==this.highlightList.indexOf(n[o])},classes:-1!==this.highlightList.indexOf(n[o])?"highlight":""})},download:function(){"png"==this.downloadType?Tn()(this.cy.png({scale:3}),this.containerId+".png","image/png"):"json"==this.downloadType&&Tn()(JSON.stringify(this.cy.json()),this.containerId+".json","application/json"),this.cancelContextMenu()},fit:function(){this.cy.fit(),this.cancelContextMenu()},cancelContextMenu:function(){this.contextMenuShown=!1}},created:function(){this.cy=null},mounted:function(){var e=this;this.isLoading=!0;var t="".concat(this.hostName,"/api/networkmodule?organism=").concat(this.organism,"&id=").concat(this.geneSetId);fetch(t).then(function(t){return t.text()}).then(function(t){e.parseNet(t),e.draw(),e.isLoading=!1})},beforeDestroy:function(){document.body.removeEventListener("click",this.cancelContextMenu)}},Rn=(n(31),Object(a.a)(Pn,function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{ref:"wrapper",staticClass:"wg-net-wrapper"},[n("div",{staticClass:"dropdown context-menu-wrapper",class:{"is-active":e.contextMenuShown},attrs:{id:e.containerId+"-contextmenu"}},[n("div",{staticClass:"dropdown-menu",class:{"is-active":e.contextMenuShown},attrs:{role:"menu"}},[n("div",{staticClass:"dropdown-content"},[n("a",{staticClass:"dropdown-item",attrs:{role:"menuitem"},on:{click:e.fit}},[e._v("Resize")]),e._v(" "),n("hr",{staticClass:"dropdown-divider"}),e._v(" "),n("a",{staticClass:"dropdown-item",attrs:{role:"menuitem"},on:{click:e.download}},[e._v("Download")]),e._v(" "),n("div",{staticClass:"dropdown-item",attrs:{role:"menuitem"}},[n("label",{staticClass:"radio"},[n("input",{directives:[{name:"model",rawName:"v-model",value:e.downloadType,expression:"downloadType"}],attrs:{type:"radio",name:e.containerId+"-downloadType",value:"png"},domProps:{checked:e._q(e.downloadType,"png")},on:{change:function(t){e.downloadType="png"}}}),e._v(" PNG\n          ")]),e._v(" "),n("label",{staticClass:"radio"},[n("input",{directives:[{name:"model",rawName:"v-model",value:e.downloadType,expression:"downloadType"}],attrs:{type:"radio",name:e.containerId+"-downloadType",value:"json"},domProps:{checked:e._q(e.downloadType,"json")},on:{change:function(t){e.downloadType="json"}}}),e._v(" JSON\n          ")])])])])]),e._v(" "),n("div",{staticClass:"cy-container"},[n("div",{attrs:{id:e.containerId}})]),e._v(" "),n("b-loading",{attrs:{"is-full-page":!1,active:e.isLoading},on:{"update:active":function(t){e.isLoading=t}}})],1)},[],!1,null,"9fb15cc2",null).exports),Fn={props:{data:{type:Object,required:!0},info:{type:Array,required:!0},method:{type:String,required:!0,validator:function(t){return-1!==["gsea","ora"].indexOf(t.toLowerCase())}},standardId:{type:String,required:!0},mappedInputSize:{type:Number,required:!1},organism:{type:String},setsWithNet:{type:[Array,Boolean],default:[]},hostName:{type:String,default:"www.webgestalt.org"}},data:function(){return{activeGeneSetId:"",selectedGeneSetIdName:"",isGeneNetModalActive:!1,perPage:10,contextMenuShown:!1,contextMenuX:"0px",contextMenuY:"0px",downloadType:"png"}},computed:{currentData:function(){return this.activeGeneSetId&&this.data.hasOwnProperty(this.activeGeneSetId)?this.data[this.activeGeneSetId]:[]},geneSetInfo:function(){var e={};return this.info.forEach(function(t){return e[t.geneSet]=t}),e},selectList:function(){var e=this;return this.info.map(function(t){return{filterField:void 0===t.description?t.geneSet:t.geneSet+": "+t.description,geneSet:t.geneSet}}).filter(function(t){return 0<=t.filterField.toLowerCase().indexOf(e.selectedGeneSetIdName.toLowerCase())})},geneSetIds:function(){return Object.keys(this.data)},vennReferenceNum:function(){return this.geneSetInfo[this.activeGeneSetId].size},vennOverlapNum:function(){return this.geneSetInfo[this.activeGeneSetId].overlap},activeGeneSymbolList:function(){return this.currentData.map(function(t){return t.geneSymbol})},isPaginated:function(){return this.perPage<1e3},contextMenuStyle:function(){return{position:"absolute",left:this.contextMenuX,top:this.contextMenuY}}},methods:{downloadTable:function(){var e=this,t=this.info.find(function(t){return t.geneSet==e.activeGeneSetId}),n='"ID: '.concat(t.geneSet,"; Name: ").concat(t.description,'"\n');"ora"==this.method?(n+='"size='.concat(t.size,"; overlap=").concat(t.overlap,"; expect=").concat(t.expect.toFixed(2),"; enrichmentRatio=").concat(t.enrichmentRatio.toFixed(2),"; PValue=").concat(t.pValue.toExponential(3),"; FDR=").concat(t.FDR.toExponential(3),'"\n'),n+='"User ID","Gene Symbol","Gene Name","Entrez Gene"\n'):(n+='"Size='.concat(t.size,"; leadingEdgeNum=").concat(t.leadingEdgeNum,"; enrichmentScore=").concat(t.enrichmentScore.toFixed(2),"; normalizedEnrichmentScore=").concat(t.normalizedEnrichmentScore.toFixed(2),"; PValue=").concat(t.pValue.toExponential(3),"; FDR=").concat(t.FDR.toExponential(3),'"\n'),n+='"User ID","Gene Symbol","Gene Name","Entrez Gene","Score"\n');for(var r=0,i=this.currentData.length;r<i;r++){var o=this.currentData[r];n+='"'.concat(o.userId,'","').concat(o.geneSymbol,'","').concat(o.geneName,'","').concat(o.entrezgene,'"'),n+=void 0!==o.score?',"'.concat(o.score,'"\n'):"\n"}Tn()(n,this.activeGeneSetId+".csv","text/plain")},downloadGseaPlot:function(){var t=this.geneSetInfo[this.activeGeneSetId].plotPath.replace(/^\./,"");"svg"==this.downloadType&&(t=t.replace(/.png$/,".svg")),Tn()(document.location.pathname+t)},sortByScore:function(t,e,n){var r=Math.abs(t.score),i=Math.abs(e.score);return n?r-i:i-r},showContextMenu:function(t){this.contextMenuShown=!0,this.contextMenuX=t.pageX+"px",this.contextMenuY=t.pageY+"px"},cancelContextMenu:function(){this.contextMenuShown=!1}},watch:{selectedGeneSetIdName:function(e,t){var n=this.selectList.filter(function(t){return t.filterField==e});0!==n.length&&(this.activeGeneSetId=n[0].geneSet)}},components:{WgVenn:jn,WgGeneNetwork:Rn},created:function(){var n=this;this.$bus.$on("select-gene-set",function(t,e){n.selectedGeneSetIdName=void 0===e?t:t+": "+e}),document.body.addEventListener("click",this.cancelContextMenu)},beforeDestroy:function(){document.body.removeEventListener("click",this.cancelContextMenu)},filters:{number:function(t){return 5<t.toString().length?t.toPrecision(5):t}}},Un=(n(32),Object(a.a)(Fn,function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"wg-gene-table",attrs:{id:"wg-gene-table"}},[n("div",{staticClass:"columns is-desktop"},[n("div",{staticClass:"column"},[n("b-field",{attrs:{label:"Select an enriched gene set..."}},[n("b-autocomplete",{staticClass:"select-gene-set",attrs:{"open-on-focus":!0,"keep-first":!0,data:e.selectList,field:"filterField"},on:{select:function(t){t&&(e.selectedGeneSetIdName=t.geneSet)}},model:{value:e.selectedGeneSetIdName,callback:function(t){e.selectedGeneSetIdName=t},expression:"selectedGeneSetIdName"}})],1),e._v(" "),e.activeGeneSetId?[n("h4",{staticClass:"title is-4 gene-set-headline"},[e._v("Gene set: "),n("a",{staticClass:"out-link",attrs:{href:e.geneSetInfo[e.activeGeneSetId].link,target:"_blank"}},[e._v("\n        "+e._s(e.geneSetInfo[e.activeGeneSetId].geneSet)+"\n        "),n("b-icon",{attrs:{icon:"open-in-new",size:"is-small"}})],1),e._v("\n      "+e._s(e.geneSetInfo[e.activeGeneSetId].description)+"\n      "),n("button",{staticClass:"button is-rounded is-white download-table",on:{click:e.downloadTable}},[n("b-tooltip",{attrs:{label:"Download table",type:"is-dark"}},[n("b-icon",{attrs:{icon:"download",size:"is-small"}})],1)],1),e._v(" "),!0===e.setsWithNet||Array.isArray(e.setsWithNet)&&e.activeGeneSetId in e.setsWithNet?[n("button",{staticClass:"button is-rounded is-white network-modal",on:{click:function(t){e.isGeneNetModalActive=!0}}},[n("b-tooltip",{attrs:{label:"Show gene network",type:"is-dark"}},[n("b-icon",{attrs:{icon:"vector-triangle",size:"is-small"}})],1)],1),e._v(" "),n("b-modal",{attrs:{active:e.isGeneNetModalActive,width:"80vw"},on:{"update:active":function(t){e.isGeneNetModalActive=t}}},[n("wg-gene-network",{attrs:{"container-id":"wg-gene-net-modal","gene-set-id":e.activeGeneSetId,"highlight-list":e.activeGeneSymbolList,organism:e.organism,hostName:e.hostName}})],1)]:e._e()],2),e._v(" "),"ora"==e.method.toLowerCase()?n("div",[n("div",{staticClass:"columns"},[n("div",{staticClass:"column is-3 has-text-centered"},[n("p",{staticClass:"subtitle is-6"},[e._v("FDR")]),e._v(" "),n("p",{staticClass:"title is-5"},[e._v(e._s(e._f("number")(e.geneSetInfo[e.activeGeneSetId].FDR)))])]),e._v(" "),n("div",{staticClass:"column is-3 has-text-centered"},[n("p",{staticClass:"subtitle is-6"},[e._v("P Value")]),e._v(" "),n("p",{staticClass:"title is-5"},[e._v(e._s(e._f("number")(e.geneSetInfo[e.activeGeneSetId].pValue)))])])]),e._v(" "),n("div",{staticClass:"columns"},[n("div",{staticClass:"column is-3 has-text-centered"},[n("p",{staticClass:"subtitle is-6"},[e._v("Gene Set Size")]),e._v(" "),n("p",{staticClass:"title is-5"},[e._v(e._s(e.geneSetInfo[e.activeGeneSetId].size))])]),e._v(" "),n("div",{staticClass:"column is-3 has-text-centered"},[n("p",{staticClass:"subtitle is-6"},[e._v("Expected Value")]),e._v(" "),n("p",{staticClass:"title is-5"},[e._v(e._s(e._f("number")(e.geneSetInfo[e.activeGeneSetId].expect)))])]),e._v(" "),n("div",{staticClass:"column is-3 has-text-centered"},[n("p",{staticClass:"subtitle is-6"},[e._v("Overlap")]),e._v(" "),n("p",{staticClass:"title is-5"},[e._v(e._s(e.geneSetInfo[e.activeGeneSetId].overlap))])]),e._v(" "),n("div",{staticClass:"column is-3 has-text-centered"},[n("p",{staticClass:"subtitle is-6"},[e._v("Enrichment Ratio")]),e._v(" "),n("p",{staticClass:"title is-5"},[e._v(e._s(e._f("number")(e.geneSetInfo[e.activeGeneSetId].enrichmentRatio)))])])])]):e._e(),e._v(" "),"gsea"==e.method.toLowerCase()?n("div",[n("div",{staticClass:"columns"},[n("div",{staticClass:"column is-3 has-text-centered"},[n("p",{staticClass:"subtitle is-6"},[e._v("FDR")]),e._v(" "),n("p",{staticClass:"title is-5"},[e._v(e._s(e._f("number")(e.geneSetInfo[e.activeGeneSetId].FDR)))])]),e._v(" "),n("div",{staticClass:"column is-3 has-text-centered"},[n("p",{staticClass:"subtitle is-6"},[e._v("P Value")]),e._v(" "),n("p",{staticClass:"title is-5"},[e._v(e._s(e._f("number")(e.geneSetInfo[e.activeGeneSetId].pValue)))])])]),e._v(" "),n("div",{staticClass:"columns"},[n("div",{staticClass:"column is-3 has-text-centered"},[n("p",{staticClass:"subtitle is-6"},[e._v("Size")]),e._v(" "),n("p",{staticClass:"title is-5"},[e._v(e._s(e.geneSetInfo[e.activeGeneSetId].size))])]),e._v(" "),n("div",{staticClass:"column is-3 has-text-centered"},[n("p",{staticClass:"subtitle is-6"},[e._v("Number of leading edge IDs")]),e._v(" "),n("p",{staticClass:"title is-5"},[e._v(e._s(e.geneSetInfo[e.activeGeneSetId].leadingEdgeNum))])]),e._v(" "),n("div",{staticClass:"column is-3 has-text-centered"},[n("p",{staticClass:"subtitle is-6"},[e._v("Enrichment Score")]),e._v(" "),n("p",{staticClass:"title is-5"},[e._v(e._s(e._f("number")(e.geneSetInfo[e.activeGeneSetId].enrichmentScore)))])]),e._v(" "),n("div",{staticClass:"column is-3 has-text-centered"},[n("p",{staticClass:"subtitle is-6"},[e._v("Normalized Enrichment Score")]),e._v(" "),n("p",{staticClass:"title is-5"},[e._v(e._s(e._f("number")(e.geneSetInfo[e.activeGeneSetId].normalizedEnrichmentScore)))])])])]):e._e()]:e._e()],2),e._v(" "),0<e.currentData.length&&"ora"==e.method.toLowerCase()?[n("div",{staticClass:"column"},[n("wg-venn",{attrs:{input:e.mappedInputSize,reference:e.vennReferenceNum,overlap:e.vennOverlapNum}})],1)]:e._e(),e._v(" "),0<e.currentData.length&&"gsea"==e.method.toLowerCase()?[n("div",{staticClass:"column"},[n("img",{staticClass:"gsea-plot",attrs:{src:e.geneSetInfo[e.activeGeneSetId].plotPath,alt:"GSEA enrichment plot"},on:{contextmenu:function(t){return t.preventDefault(),e.showContextMenu(t)}}})]),e._v(" "),n("div",{staticClass:"dropdown context-menu-wrapper",class:{"is-active":e.contextMenuShown},style:e.contextMenuStyle,attrs:{id:"gsea-plot-contextmenu"}},[n("div",{staticClass:"dropdown-menu",class:{"is-active":e.contextMenuShown},attrs:{role:"menu"}},[n("div",{staticClass:"dropdown-content"},[n("a",{staticClass:"dropdown-item",attrs:{role:"menuitem"},on:{click:e.downloadGseaPlot}},[e._v("Download")]),e._v(" "),n("div",{staticClass:"dropdown-item",attrs:{role:"menuitem"},on:{click:function(t){t.stopPropagation()}}},[n("label",{staticClass:"radio"},[n("input",{directives:[{name:"model",rawName:"v-model",value:e.downloadType,expression:"downloadType"}],attrs:{type:"radio",name:"gsea-plot-downloadType",value:"png"},domProps:{checked:e._q(e.downloadType,"png")},on:{change:function(t){e.downloadType="png"}}}),e._v(" PNG\n          ")]),e._v(" "),n("label",{staticClass:"radio"},[n("input",{directives:[{name:"model",rawName:"v-model",value:e.downloadType,expression:"downloadType"}],attrs:{type:"radio",name:"gsea-plot-downloadType",value:"svg"},domProps:{checked:e._q(e.downloadType,"svg")},on:{change:function(t){e.downloadType="svg"}}}),e._v(" SVG\n          ")])])])])])]:e._e()],2),e._v(" "),0<e.currentData.length?[n("b-table",{attrs:{data:e.currentData,"per-page":e.perPage,"default-sort":"score"in e.currentData[0]?["score","desc","userId","asc"]:["userId","asc"],paginated:e.isPaginated,striped:"",hoverable:"","mobile-cards":""},scopedSlots:e._u([{key:"default",fn:function(t){return[n("b-table-column",{attrs:{field:"userId",label:"User ID",sortable:""}},[e._v("\n          "+e._s(t.row.userId)+"\n        ")]),e._v(" "),void 0!==t.row.score?[n("b-table-column",{attrs:{field:"score",label:"Score",sortable:"",numeric:"","custom-sort":e.sortByScore}},[e._v("\n          "+e._s(t.row.score)+"\n        ")])]:e._e(),e._v(" "),t.row.geneSymbol?[n("b-table-column",{attrs:{field:"geneSymbol",label:"Gene Symbol",sortable:""}},[e._v("\n          "+e._s(t.row.geneSymbol)+"\n        ")])]:e._e(),e._v(" "),t.row.geneName?[n("b-table-column",{attrs:{field:"geneName",label:"Gene Name",sortable:""}},[e._v("\n          "+e._s(t.row.geneName)+"\n        ")])]:e._e(),e._v(" "),t.row[e.standardId]?[n("b-table-column",{attrs:{field:"standardId",label:"entrezgene"==e.standardId?"Entrez Gene ID":e.standardId}},[n("a",{attrs:{href:t.row.gLink,target:"_blank"}},[e._v(e._s(t.row[e.standardId]))])])]:e._e()]}}],null,!1,1578353090)}),e._v(" "),n("b-select",{class:{"shift-page-select":e.isPaginated,"page-shift":!e.isPaginated},model:{value:e.perPage,callback:function(t){e.perPage=t},expression:"perPage"}},[n("option",{attrs:{value:"10"}},[e._v("10 per page")]),e._v(" "),n("option",{attrs:{value:"20"}},[e._v("20 per page")]),e._v(" "),n("option",{attrs:{value:"50"}},[e._v("50 per page")]),e._v(" "),n("option",{attrs:{value:"1000"}},[e._v("All")])])]:e._e()],2)},[],!1,null,"3388ecd6",null).exports),qn=n(11),Gn=n(24),Vn=function(t){return function(){return t}},Yn=function(){return 1e-6*(Math.random()-.5)};function Bn(t,e,n,r){if(isNaN(e)||isNaN(n))return t;var i,o,a,s,u,c,l,f,h,d=t._root,p={data:r},v=t._x0,g=t._y0,m=t._x1,y=t._y1;if(!d)return t._root=p,t;for(;d.length;)if((c=e>=(o=(v+m)/2))?v=o:m=o,(l=n>=(a=(g+y)/2))?g=a:y=a,!(d=(i=d)[f=l<<1|c]))return i[f]=p,t;if(s=+t._x.call(null,d.data),u=+t._y.call(null,d.data),e===s&&n===u)return p.next=d,i?i[f]=p:t._root=p,t;for(;i=i?i[f]=new Array(4):t._root=new Array(4),(c=e>=(o=(v+m)/2))?v=o:m=o,(l=n>=(a=(g+y)/2))?g=a:y=a,(f=l<<1|c)==(h=(a<=u)<<1|o<=s););return i[h]=d,i[f]=p,t}var Hn=function(t,e,n,r,i){this.node=t,this.x0=e,this.y0=n,this.x1=r,this.y1=i};function Wn(t){return t[0]}function $n(t){return t[1]}function Xn(t,e,n){var r=new Kn(null==e?Wn:e,null==n?$n:n,NaN,NaN,NaN,NaN);return null==t?r:r.addAll(t)}function Kn(t,e,n,r,i,o){this._x=t,this._y=e,this._x0=n,this._y0=r,this._x1=i,this._y1=o,this._root=void 0}function Zn(t){for(var e={data:t.data},n=e;t=t.next;)n=n.next={data:t.data};return e}var Jn=Xn.prototype=Kn.prototype;function Qn(t){return t.x+t.vx}function tr(t){return t.y+t.vy}Jn.copy=function(){var t,e,n=new Kn(this._x,this._y,this._x0,this._y0,this._x1,this._y1),r=this._root;if(!r)return n;if(!r.length)return n._root=Zn(r),n;for(t=[{source:r,target:n._root=new Array(4)}];r=t.pop();)for(var i=0;i<4;++i)(e=r.source[i])&&(e.length?t.push({source:e,target:r.target[i]=new Array(4)}):r.target[i]=Zn(e));return n},Jn.add=function(t){var e=+this._x.call(null,t),n=+this._y.call(null,t);return Bn(this.cover(e,n),e,n,t)},Jn.addAll=function(t){var e,n,r,i,o=t.length,a=new Array(o),s=new Array(o),u=1/0,c=1/0,l=-1/0,f=-1/0;for(n=0;n<o;++n)isNaN(r=+this._x.call(null,e=t[n]))||isNaN(i=+this._y.call(null,e))||((a[n]=r)<u&&(u=r),l<r&&(l=r),(s[n]=i)<c&&(c=i),f<i&&(f=i));for(l<u&&(u=this._x0,l=this._x1),f<c&&(c=this._y0,f=this._y1),this.cover(u,c).cover(l,f),n=0;n<o;++n)Bn(this,a[n],s[n],t[n]);return this},Jn.cover=function(t,e){if(isNaN(t=+t)||isNaN(e=+e))return this;var n=this._x0,r=this._y0,i=this._x1,o=this._y1;if(isNaN(n))i=(n=Math.floor(t))+1,o=(r=Math.floor(e))+1;else{if(!(t<n||i<t||e<r||o<e))return this;var a,s,u=i-n,c=this._root;switch(s=(e<(r+o)/2)<<1|t<(n+i)/2){case 0:for(;(a=new Array(4))[s]=c,c=a,o=r+(u*=2),(i=n+u)<t||o<e;);break;case 1:for(;(a=new Array(4))[s]=c,c=a,o=r+(u*=2),t<(n=i-u)||o<e;);break;case 2:for(;(a=new Array(4))[s]=c,c=a,r=o-(u*=2),(i=n+u)<t||e<r;);break;case 3:for(;(a=new Array(4))[s]=c,c=a,r=o-(u*=2),t<(n=i-u)||e<r;);}this._root&&this._root.length&&(this._root=c)}return this._x0=n,this._y0=r,this._x1=i,this._y1=o,this},Jn.data=function(){var e=[];return this.visit(function(t){if(!t.length)for(;e.push(t.data),t=t.next;);}),e},Jn.extent=function(t){return arguments.length?this.cover(+t[0][0],+t[0][1]).cover(+t[1][0],+t[1][1]):isNaN(this._x0)?void 0:[[this._x0,this._y0],[this._x1,this._y1]]},Jn.find=function(t,e,n){var r,i,o,a,s,u,c,l=this._x0,f=this._y0,h=this._x1,d=this._y1,p=[],v=this._root;for(v&&p.push(new Hn(v,l,f,h,d)),null==n?n=1/0:(l=t-n,f=e-n,h=t+n,d=e+n,n*=n);u=p.pop();)if(!(!(v=u.node)||(i=u.x0)>h||(o=u.y0)>d||(a=u.x1)<l||(s=u.y1)<f))if(v.length){var g=(i+a)/2,m=(o+s)/2;p.push(new Hn(v[3],g,m,a,s),new Hn(v[2],i,m,g,s),new Hn(v[1],g,o,a,m),new Hn(v[0],i,o,g,m)),(c=(m<=e)<<1|g<=t)&&(u=p[p.length-1],p[p.length-1]=p[p.length-1-c],p[p.length-1-c]=u)}else{var y=t-+this._x.call(null,v.data),x=e-+this._y.call(null,v.data),w=y*y+x*x;if(w<n){var b=Math.sqrt(n=w);l=t-b,f=e-b,h=t+b,d=e+b,r=v.data}}return r},Jn.remove=function(t){if(isNaN(o=+this._x.call(null,t))||isNaN(a=+this._y.call(null,t)))return this;var e,n,r,i,o,a,s,u,c,l,f,h,d=this._root,p=this._x0,v=this._y0,g=this._x1,m=this._y1;if(!d)return this;if(d.length)for(;;){if((c=o>=(s=(p+g)/2))?p=s:g=s,(l=a>=(u=(v+m)/2))?v=u:m=u,!(d=(e=d)[f=l<<1|c]))return this;if(!d.length)break;(e[f+1&3]||e[f+2&3]||e[f+3&3])&&(n=e,h=f)}for(;d.data!==t;)if(!(d=(r=d).next))return this;return(i=d.next)&&delete d.next,r?i?r.next=i:delete r.next:e?(i?e[f]=i:delete e[f],(d=e[0]||e[1]||e[2]||e[3])&&d===(e[3]||e[2]||e[1]||e[0])&&!d.length&&(n?n[h]=d:this._root=d)):this._root=i,this},Jn.removeAll=function(t){for(var e=0,n=t.length;e<n;++e)this.remove(t[e]);return this},Jn.root=function(){return this._root},Jn.size=function(){var e=0;return this.visit(function(t){if(!t.length)for(;++e,t=t.next;);}),e},Jn.visit=function(t){var e,n,r,i,o,a,s=[],u=this._root;for(u&&s.push(new Hn(u,this._x0,this._y0,this._x1,this._y1));e=s.pop();)if(!t(u=e.node,r=e.x0,i=e.y0,o=e.x1,a=e.y1)&&u.length){var c=(r+o)/2,l=(i+a)/2;(n=u[3])&&s.push(new Hn(n,c,l,o,a)),(n=u[2])&&s.push(new Hn(n,r,l,c,a)),(n=u[1])&&s.push(new Hn(n,c,i,o,l)),(n=u[0])&&s.push(new Hn(n,r,i,c,l))}return this},Jn.visitAfter=function(t){var e,n=[],r=[];for(this._root&&n.push(new Hn(this._root,this._x0,this._y0,this._x1,this._y1));e=n.pop();){var i=e.node;if(i.length){var o,a=e.x0,s=e.y0,u=e.x1,c=e.y1,l=(a+u)/2,f=(s+c)/2;(o=i[0])&&n.push(new Hn(o,a,s,l,f)),(o=i[1])&&n.push(new Hn(o,l,s,u,f)),(o=i[2])&&n.push(new Hn(o,a,f,l,c)),(o=i[3])&&n.push(new Hn(o,l,f,u,c))}r.push(e)}for(;e=r.pop();)t(e.node,e.x0,e.y0,e.x1,e.y1);return this},Jn.x=function(t){return arguments.length?(this._x=t,this):this._x},Jn.y=function(t){return arguments.length?(this._y=t,this):this._y};function er(t){return t.index}function nr(t,e){var n=t.get(e);if(!n)throw new Error("missing: "+e);return n}var rr=n(9),ir=n(8);function or(t){return t.x}function ar(t){return t.y}var sr=Math.PI*(3-Math.sqrt(5)),ur=n(10);function cr(){Cn.event.stopImmediatePropagation()}var lr=function(){Cn.event.preventDefault(),Cn.event.stopImmediatePropagation()},fr=function(t){var e=t.document.documentElement,n=Object(Cn.select)(t).on("dragstart.drag",lr,!0);"onselectstart"in e?n.on("selectstart.drag",lr,!0):(e.__noselect=e.style.MozUserSelect,e.style.MozUserSelect="none")};function hr(t,e){var n=t.document.documentElement,r=Object(Cn.select)(t).on("dragstart.drag",null);e&&(r.on("click.drag",lr,!0),setTimeout(function(){r.on("click.drag",null)},0)),"onselectstart"in n?r.on("selectstart.drag",null):(n.style.MozUserSelect=n.__noselect,delete n.__noselect)}var dr=function(t){return function(){return t}};function pr(t,e,n,r,i,o,a,s,u,c){this.target=t,this.type=e,this.subject=n,this.identifier=r,this.active=i,this.x=o,this.y=a,this.dx=s,this.dy=u,this._=c}function vr(){return!Cn.event.button}function gr(){return this.parentNode}function mr(t){return null==t?{x:Cn.event.x,y:Cn.event.y}:t}function yr(){return"ontouchstart"in this}pr.prototype.on=function(){var t=this._.on.apply(this._,arguments);return t===this._?this:t};var xr=function(t){return function(){return t}};function wr(t,e,n){this.target=t,this.type=e,this.transform=n}function br(t,e,n){this.k=t,this.x=e,this.y=n}br.prototype={constructor:br,scale:function(t){return 1===t?this:new br(this.k*t,this.x,this.y)},translate:function(t,e){return 0===t&0===e?this:new br(this.k,this.x+this.k*t,this.y+this.k*e)},apply:function(t){return[t[0]*this.k+this.x,t[1]*this.k+this.y]},applyX:function(t){return t*this.k+this.x},applyY:function(t){return t*this.k+this.y},invert:function(t){return[(t[0]-this.x)/this.k,(t[1]-this.y)/this.k]},invertX:function(t){return(t-this.x)/this.k},invertY:function(t){return(t-this.y)/this.k},rescaleX:function(t){return t.copy().domain(t.range().map(this.invertX,this).map(t.invert,t))},rescaleY:function(t){return t.copy().domain(t.range().map(this.invertY,this).map(t.invert,t))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};var _r=new br(1,0,0);function Mr(t){return t.__zoom||_r}function Sr(){Cn.event.stopImmediatePropagation()}Mr.prototype=br.prototype;var Cr=function(){Cn.event.preventDefault(),Cn.event.stopImmediatePropagation()};function kr(){return!Cn.event.button}function Tr(){var t,e,n=this;return e=n instanceof SVGElement?(t=(n=n.ownerSVGElement||n).width.baseVal.value,n.height.baseVal.value):(t=n.clientWidth,n.clientHeight),[[0,0],[t,e]]}function Ar(){return this.__zoom||_r}function Nr(){return-Cn.event.deltaY*(Cn.event.deltaMode?120:1)/500}function Dr(){return"ontouchstart"in this}function Or(t,e,n){var r=t.invertX(e[0][0])-n[0][0],i=t.invertX(e[1][0])-n[1][0],o=t.invertY(e[0][1])-n[0][1],a=t.invertY(e[1][1])-n[1][1];return t.translate(r<i?(r+i)/2:Math.min(0,r)||Math.max(0,i),o<a?(o+a)/2:Math.min(0,o)||Math.max(0,a))}function Ir(t){return(Ir="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var zr={props:{domId:{type:String,default:"wg-volcano-container"},dimensions:{type:Object,default:function(){return{width:960,height:500}}},margins:{type:Object,default:function(){return{top:60,right:30,bottom:40,left:30}}},data:{type:Array,required:!0},labelTypes:{type:[Array,String],default:null},x:{type:String,required:!0},y:{type:[String,Array],required:!0},xLabel:{type:String},yLabel:{type:String},xTransform:{type:Function,default:function(t){return 0===t?1:Math.log2(t)}},yTransform:{type:Function},radius:{type:[Number,String],default:4},color:{type:String,default:"black"},showAllTooltips:{type:Boolean,default:!1},tooltipContent:{type:Array},showAllLabels:{type:Boolean,default:!1},autoPlaceLabels:{type:Boolean,default:!1},showToolbox:{type:Boolean,default:!0}},data:function(){return{labelType:null,linkShown:!1,zoomEnabled:!1,downloadType:"png",yKey:""}},computed:{processedData:function(){var e,n=this,r=[];return null===this.yTransform&&(e=function(t){return t}),void 0===this.yTransform&&(e=function(t){return-Math.log10(0===t?Number.EPSILON:t)}),this.data.forEach(function(t){r.push(Object.assign({},t,{y:e(t[n.y]),x:null!==n.xTransform?n.xTransform(t[n.x]):t[n.x],r:function(t){if("string"==typeof n.radius&&t.hasOwnProperty(n.radius)){var e=Number(t[n.radius]);return Math.min(Math.max(Math.log2(isNaN(e)?0:e),1)+1,15)}return n.radius}(t)}))}),r},xAxisLabel:function(){return this.xLabel||"Log2 of "+this.x},yAxisLabel:function(){return this.yLabel||"-Log10 of "+this.y},canvasWidth:function(){return this.dimensions.width-this.margins.left-this.margins.right},canvasHeight:function(){return this.dimensions.height-this.margins.top-this.margins.bottom}},methods:{plotVolcano:function(){var o=this;if(this.processedData&&0!=this.processedData.length){var t=Object(Cn.select)("#"+this.domId).html(null).append("svg").attr("width",this.dimensions.width).attr("height",this.dimensions.height),e=t.append("g").attr("class","canvas").attr("transform","translate("+this.margins.left+","+this.margins.top+")"),n=e.append("g").attr("class","content");this.content=n,this.svg=t,this.canvas=e;var r=ut().range([0,this.canvasWidth]).domain(m(this.processedData,function(t){return t.x})).nice();this.xScale=r;var i=ut().range([this.canvasHeight,0]).domain(m(this.processedData,function(t){return t.y})).nice();this.yScale=i,this.xAxis=Mn(r),this.yAxis=Sn(i),e.select("g.x-axis").remove(),e.append("g").attr("class","x-axis").attr("transform","translate(0,"+this.canvasHeight+")").call(this.xAxis).append("text").attr("class","x-label").attr("x",this.canvasWidth).attr("y",-6).style("text-anchor","end").attr("fill","#000").text(this.xAxisLabel);var a=0<r(0)?r(0):0;a=a<this.canvasWidth?a:this.canvasWidth,e.select("g.y-axis").remove();var s=e.append("g").attr("class","y-axis").attr("transform","translate("+a+",0)").call(this.yAxis);if(s.select(".tick:first-of-type").remove(),s.append("text").attr("class","y-label").attr("transform","rotate(-90)").attr("y",6).attr("dy",".71em").style("text-anchor","end").text(this.yAxisLabel).attr("fill","#000"),this.processedData[0].hasOwnProperty(this.color)){var u=m(this.processedData,function(t){return t[o.color]});this.colorScale=function t(){var e=st(ln()(F));return e.copy=function(){return fn(e,t())},M.apply(e,arguments)}(Object(E.d)(["#dadaeb","#bcbddc","#9e9ac8","#807dba","#6a51a3","#54278f","#3f007d"])).domain(u),t.select(".legend").remove();var c=t.append("g").attr("class","legend"),l=c.append("defs").append("svg:linearGradient").attr("id","gradient").attr("x1","0%").attr("y1","100%").attr("x2","100%").attr("y2","100%").attr("spreadMethod","pad");l.append("stop").attr("offset","0%").attr("stop-color","#dadaeb").attr("stop-opacity",1),l.append("stop").attr("offset","16.67%").attr("stop-color","#bcbddc").attr("stop-opacity",1),l.append("stop").attr("offset","33.33%").attr("stop-color","#9e9ac8").attr("stop-opacity",1),l.append("stop").attr("offset","50%").attr("stop-color","#807dba").attr("stop-opacity",1),l.append("stop").attr("offset","66.67%").attr("stop-color","#6a51a3").attr("stop-opacity",1),l.append("stop").attr("offset","83.33%").attr("stop-color","#54278f").attr("stop-opacity",1),l.append("stop").attr("offset","100%").attr("stop-color","#3f007d").attr("stop-opacity",1),c.append("rect").attr("width",100).attr("height",20).style("fill","url(#gradient)").attr("transform","translate(10,0)");var f=Mn(ut().range([0,100]).domain(u)).ticks(5);c.append("g").attr("class","y-axis").attr("transform","translate(10,20)").call(f)}this.drawLabel();var h=n.selectAll(".wg-volcano-dot").data(this.processedData,function(t,e){return void 0!==t.id?t.id:e});h.enter().append("circle").attr("class","wg-volcano-dot").attr("r",function(t){return t.r}).attr("cx",function(t){return r(t.x)}).attr("cy",function(t){return i(t.y)}).attr("fill",function(t){return o.getColor(t)}).each(function(t,e,n){if(t.hasOwnProperty("attributes")&&"object"===Ir(t.attributes)&&t.attributes.constructor===Object)for(var r in t.attributes)n[e].setAttribute(r,t.attributes[r]);var i=Object(Cn.select)(n[e]);o.showAllTooltips&&(i.on("mouseenter",v),i.on("mouseleave",g)),t.hasOwnProperty("options")&&"object"===Ir(t.options)&&t.options.constructor===Object&&(!o.showAllTooltips&&t.options.hasOwnProperty("showTooltip")&&t.options.showTooltip&&(i.on("mouseenter",v),i.on("mouseleave",g)),t.options.hasOwnProperty("callback")&&"function"==typeof t.options.callback&&(i.on("click",t.options.callback),i.classed("has-pointer",!0)))}),h.exit().remove();var d=function(e){var n="";if(o.tooltipContent)return o.tooltipContent.forEach(function(t){return n+="".concat(t,": ").concat(o.formatNumber(e[t]),"<br>")}),n;o.labelTypes&&o.labelTypes.forEach(function(t){e.hasOwnProperty(t)&&(n+="".concat(t,": ").concat(e[t],"<br>"))}),n+="".concat(o.x,": ").concat(formatNumber(e[o.x]),"<br>"),n+="".concat(o.y,": ").concat(formatNumber(e[o.y]),"<br>");var t=[o.x,o.y,"x","y","options","attributes","r"].concat(o.labelTypes);for(var r in e)-1===t.indexOf(r)&&(n+="".concat(r,": ").concat(formatNumber(e[r]),"<br>"));return n},p=Object(Cn.select)("#wg-volcano-tooltip")}function v(t){p.interrupt().html(d(t)).style("left",Cn.event.x+20+"px").style("top",Cn.event.y-60+"px").transition().duration(100).ease(Gn.b).style("opacity",.8).on("end",function(){Object(Cn.select)(this).style("visibility","visible")})}function g(){p.interrupt().transition().duration(500).style("opacity",0).on("end",function(){Object(Cn.select)(this).style("visibility","hidden")})}},getColor:function(t){if(t.hasOwnProperty(this.color)&&null!==this.colorScale){var e=Number(t[this.color]);return this.colorScale(isNaN(e)?0:e)}return this.color},drawLabel:function(){var e=this;if(null!==this.labelType){this.canvas.selectAll(".link-line").remove();var t=this.placeLabel(),o=this,n=function(){var n,r,i,o,a=vr,s=gr,e=mr,u=yr,p={},v=Object(rr.a)("start","drag","end"),g=0,c=0;function m(t){t.on("mousedown.drag",l).filter(u).on("touchstart.drag",d).on("touchmove.drag",y).on("touchend.drag touchcancel.drag",x).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function l(){if(!o&&a.apply(this,arguments)){var t=w("mouse",s.apply(this,arguments),Cn.mouse,this,arguments);t&&(Object(Cn.select)(Cn.event.view).on("mousemove.drag",f,!0).on("mouseup.drag",h,!0),fr(Cn.event.view),cr(),i=!1,n=Cn.event.clientX,r=Cn.event.clientY,t("start"))}}function f(){if(lr(),!i){var t=Cn.event.clientX-n,e=Cn.event.clientY-r;i=c<t*t+e*e}p.mouse("drag")}function h(){Object(Cn.select)(Cn.event.view).on("mousemove.drag mouseup.drag",null),hr(Cn.event.view,i),lr(),p.mouse("end")}function d(){if(a.apply(this,arguments)){var t,e,n=Cn.event.changedTouches,r=s.apply(this,arguments),i=n.length;for(t=0;t<i;++t)(e=w(n[t].identifier,r,Cn.touch,this,arguments))&&(cr(),e("start"))}}function y(){var t,e,n=Cn.event.changedTouches,r=n.length;for(t=0;t<r;++t)(e=p[n[t].identifier])&&(lr(),e("drag"))}function x(){var t,e,n=Cn.event.changedTouches,r=n.length;for(o&&clearTimeout(o),o=setTimeout(function(){o=null},500),t=0;t<r;++t)(e=p[n[t].identifier])&&(cr(),e("end"))}function w(i,o,a,s,u){var c,l,f,h=a(o,i),d=v.copy();if(Object(Cn.customEvent)(new pr(m,"beforestart",c,i,g,h[0],h[1],0,0,d),function(){return null!=(Cn.event.subject=c=e.apply(s,u))&&(l=c.x-h[0]||0,f=c.y-h[1]||0,!0)}))return function t(e){var n,r=h;switch(e){case"start":p[i]=t,n=g++;break;case"end":delete p[i],--g;case"drag":h=a(o,i),n=g}Object(Cn.customEvent)(new pr(m,e,c,i,n,h[0]+l,h[1]+f,h[0]-r[0],h[1]-r[1],d),d.apply,d,[e,s,u])}}return m.filter=function(t){return arguments.length?(a="function"==typeof t?t:dr(!!t),m):a},m.container=function(t){return arguments.length?(s="function"==typeof t?t:dr(t),m):s},m.subject=function(t){return arguments.length?(e="function"==typeof t?t:dr(t),m):e},m.touchable=function(t){return arguments.length?(u="function"==typeof t?t:dr(!!t),m):u},m.on=function(){var t=v.on.apply(v,arguments);return t===v?m:t},m.clickDistance=function(t){return arguments.length?(c=(t=+t)*t,m):Math.sqrt(c)},m}().on("drag",function(t,e,n){t.x=Cn.event.x,t.y=Cn.event.y;Object(Cn.select)(this).attr("x",Cn.event.x).attr("y",Cn.event.y).selectAll("tspan").attr("x",Cn.event.x);var r=document.querySelector("#".concat(o.domId," .").concat(t.id,"_line"));if(r){var i=o.getLinkCoordinates(this,t);r.setAttribute("x1",i.anchor.x),r.setAttribute("y1",i.anchor.y),r.setAttribute("x2",i.label.x),r.setAttribute("y2",i.label.y)}}),r=this.content.selectAll(".dot-label").data(t.labels,function(t){return t.id}).call(n);r.enter().append("text").attr("class","dot-label has-pointer").attr("text-anchor","middle").attr("font-size","0.7rem").text(function(t){return t[e.labelType]}).attr("fill","#000").call(n),r.exit().remove(),this.content.selectAll(".dot-label").attr("x",function(t){return t.x}).attr("y",function(t){return t.y}).sort(function(t,e){return t.id<e.id}).each(function(t,e,n){Object(Cn.select)(n[e]).selectAll("tspan").attr("x",t.x)}),this.linkShown&&this.drawLinkLine()}},placeLabel:function(){var r=this,i=this.nodes.anchors,o=this.nodes.labels,a=this.nodes.links;if(0==i.length&&0==o.length&&0==a.length)for(var s,t=function(e,n){if(r.showAllLabels||r.processedData[e].hasOwnProperty("options")&&r.processedData[e].options&&r.processedData[e].options.hasOwnProperty("showLabel")&&r.processedData[e].options.showLabel){var t=void 0!==r.processedData[e].id?r.processedData[e].id:e;i.push({id:"label_".concat(t,"_anchor"),fx:r.xScale(r.processedData[e].x),fy:r.yScale(r.processedData[e].y),x:r.xScale(r.processedData[e].x),y:r.yScale(r.processedData[e].y),r:r.processedData[e].r}),n={id:"label_".concat(t)},Array.isArray(r.labelTypes)?r.labelTypes.forEach(function(t){return n[t]=r.processedData[e][t]}):null!==r.labelType&&(n[r.labelType]=r.processedData[e][r.labelType]),n.x=r.xScale(r.processedData[e].x),n.y=r.yScale(r.processedData[e].y),o.push(n),a.push({source:"label_".concat(t,"_anchor"),target:"label_".concat(t)})}s=n},e=0;e<this.processedData.length;e++)t(e,s);if(this.autoPlaceLabels)for(var n=function(l){var o,a=1,e=.001,s=1-Math.pow(e,1/300),u=0,c=.6,f=T(),t=Object(ir.c)(r),n=Object(rr.a)("tick","end");function r(){i(),n.call("tick",o),a<e&&(t.stop(),n.call("end",o))}function i(t){var e,n,r=l.length;void 0===t&&(t=1);for(var i=0;i<t;++i)for(a+=(u-a)*s,f.each(function(t){t(a)}),e=0;e<r;++e)null==(n=l[e]).fx?n.x+=n.vx*=c:(n.x=n.fx,n.vx=0),null==n.fy?n.y+=n.vy*=c:(n.y=n.fy,n.vy=0);return o}function h(){for(var t,e=0,n=l.length;e<n;++e){if((t=l[e]).index=e,isNaN(t.fx)||(t.x=t.fx),isNaN(t.fy)||(t.y=t.fy),isNaN(t.x)||isNaN(t.y)){var r=10*Math.sqrt(e),i=e*sr;t.x=r*Math.cos(i),t.y=r*Math.sin(i)}(isNaN(t.vx)||isNaN(t.vy))&&(t.vx=t.vy=0)}}function d(t){return t.initialize&&t.initialize(l),t}return null==l&&(l=[]),h(),o={tick:i,restart:function(){return t.restart(r),o},stop:function(){return t.stop(),o},nodes:function(t){return arguments.length?(l=t,h(),f.each(d),o):l},alpha:function(t){return arguments.length?(a=+t,o):a},alphaMin:function(t){return arguments.length?(e=+t,o):e},alphaDecay:function(t){return arguments.length?(s=+t,o):+s},alphaTarget:function(t){return arguments.length?(u=+t,o):u},velocityDecay:function(t){return arguments.length?(c=1-t,o):1-c},force:function(t,e){return 1<arguments.length?(null==e?f.remove(t):f.set(t,d(e)),o):f.get(t)},find:function(t,e,n){var r,i,o,a,s,u=0,c=l.length;for(null==n?n=1/0:n*=n,u=0;u<c;++u)(o=(r=t-(a=l[u]).x)*r+(i=e-a.y)*i)<n&&(s=a,n=o);return s},on:function(t,e){return 1<arguments.length?(n.on(t,e),o):n.on(t)}}}(i.concat(o)).force("charge",function(){var i,u,c,l,r=Vn(-30),f=1,h=1/0,d=.81;function e(t){var e,n=i.length,r=Xn(i,or,ar).visitAfter(o);for(c=t,e=0;e<n;++e)u=i[e],r.visit(a)}function n(){if(i){var t,e,n=i.length;for(l=new Array(n),t=0;t<n;++t)e=i[t],l[e.index]=+r(e,t,i)}}function o(t){var e,n,r,i,o,a=0,s=0;if(t.length){for(r=i=o=0;o<4;++o)(e=t[o])&&(n=Math.abs(e.value))&&(a+=e.value,s+=n,r+=n*e.x,i+=n*e.y);t.x=r/s,t.y=i/s}else for((e=t).x=e.data.x,e.y=e.data.y;a+=l[e.data.index],e=e.next;);t.value=a}function a(t,e,n,r){if(!t.value)return!0;var i=t.x-u.x,o=t.y-u.y,a=r-e,s=i*i+o*o;if(a*a/d<s)return s<h&&(0===i&&(s+=(i=Yn())*i),0===o&&(s+=(o=Yn())*o),s<f&&(s=Math.sqrt(f*s)),u.vx+=i*t.value*c/s,u.vy+=o*t.value*c/s),!0;if(!(t.length||h<=s))for((t.data!==u||t.next)&&(0===i&&(s+=(i=Yn())*i),0===o&&(s+=(o=Yn())*o),s<f&&(s=Math.sqrt(f*s)));t.data!==u&&(a=l[t.data.index]*c/s,u.vx+=i*a,u.vy+=o*a),t=t.next;);}return e.initialize=function(t){i=t,n()},e.strength=function(t){return arguments.length?(r="function"==typeof t?t:Vn(+t),n(),e):r},e.distanceMin=function(t){return arguments.length?(f=t*t,e):Math.sqrt(f)},e.distanceMax=function(t){return arguments.length?(h=t*t,e):Math.sqrt(h)},e.theta=function(t){return arguments.length?(d=t*t,e):Math.sqrt(d)},e}().strength(-100)).force("radial",function(n,u,c){var l,f,h,r=Vn(.1);function e(t){for(var e=0,n=l.length;e<n;++e){var r=l[e],i=r.x-u||1e-6,o=r.y-c||1e-6,a=Math.sqrt(i*i+o*o),s=(h[e]-a)*f[e]*t/a;r.vx+=i*s,r.vy+=o*s}}function i(){if(l){var t,e=l.length;for(f=new Array(e),h=new Array(e),t=0;t<e;++t)h[t]=+n(l[t],t,l),f[t]=isNaN(h[t])?0:+r(l[t],t,l)}}return"function"!=typeof n&&(n=Vn(+n)),null==u&&(u=0),null==c&&(c=0),e.initialize=function(t){l=t,i()},e.strength=function(t){return arguments.length?(r="function"==typeof t?t:Vn(+t),i(),e):r},e.radius=function(t){return arguments.length?(n="function"==typeof t?t:Vn(+t),i(),e):n},e.x=function(t){return arguments.length?(u=+t,e):u},e.y=function(t){return arguments.length?(c=+t,e):c},e}(Math.min(this.canvasWidth,this.canvasHeight)/2,this.canvasWidth/2,this.canvasHeight/2)).force("collision",function(r){var o,a,g=1,s=1;function e(){for(var t,e,f,h,d,p,v,n=o.length,r=0;r<s;++r)for(e=Xn(o,Qn,tr).visitAfter(u),t=0;t<n;++t)f=o[t],p=a[f.index],v=p*p,h=f.x+f.vx,d=f.y+f.vy,e.visit(i);function i(t,e,n,r,i){var o=t.data,a=t.r,s=p+a;if(!o)return h+s<e||r<h-s||d+s<n||i<d-s;if(o.index>f.index){var u=h-o.x-o.vx,c=d-o.y-o.vy,l=u*u+c*c;l<s*s&&(0===u&&(l+=(u=Yn())*u),0===c&&(l+=(c=Yn())*c),l=(s-(l=Math.sqrt(l)))/l*g,f.vx+=(u*=l)*(s=(a*=a)/(v+a)),f.vy+=(c*=l)*s,o.vx-=u*(s=1-s),o.vy-=c*s)}}}function u(t){if(t.data)return t.r=a[t.data.index];for(var e=t.r=0;e<4;++e)t[e]&&t[e].r>t.r&&(t.r=t[e].r)}function n(){if(o){var t,e,n=o.length;for(a=new Array(n),t=0;t<n;++t)e=o[t],a[e.index]=+r(e,t,o)}}return"function"!=typeof r&&(r=Vn(null==r?1:+r)),e.initialize=function(t){o=t,n()},e.iterations=function(t){return arguments.length?(s=+t,e):s},e.strength=function(t){return arguments.length?(g=+t,e):g},e.radius=function(t){return arguments.length?(r="function"==typeof t?t:Vn(+t),n(),e):r},e}(function(t){return t.fx?t.r:10}).iterations(10)).force("link",function(f){var h,d,o,a,p,s=er,n=function(t){return 1/Math.min(a[t.source.index],a[t.target.index])},r=Vn(30),v=1;function e(t){for(var e=0,n=f.length;e<v;++e)for(var r,i,o,a,s,u,c,l=0;l<n;++l)i=(r=f[l]).source,a=(o=r.target).x+o.vx-i.x-i.vx||Yn(),s=o.y+o.vy-i.y-i.vy||Yn(),a*=u=((u=Math.sqrt(a*a+s*s))-d[l])/u*t*h[l],s*=u,o.vx-=a*(c=p[l]),o.vy-=s*c,i.vx+=a*(c=1-c),i.vy+=s*c}function i(){if(o){var t,e,n=o.length,r=f.length,i=T(o,s);for(t=0,a=new Array(n);t<r;++t)(e=f[t]).index=t,"object"!=typeof e.source&&(e.source=nr(i,e.source)),"object"!=typeof e.target&&(e.target=nr(i,e.target)),a[e.source.index]=(a[e.source.index]||0)+1,a[e.target.index]=(a[e.target.index]||0)+1;for(t=0,p=new Array(r);t<r;++t)e=f[t],p[t]=a[e.source.index]/(a[e.source.index]+a[e.target.index]);h=new Array(r),u(),d=new Array(r),c()}}function u(){if(o)for(var t=0,e=f.length;t<e;++t)h[t]=+n(f[t],t,f)}function c(){if(o)for(var t=0,e=f.length;t<e;++t)d[t]=+r(f[t],t,f)}return null==f&&(f=[]),e.initialize=function(t){o=t,i()},e.links=function(t){return arguments.length?(f=t,i(),e):f},e.id=function(t){return arguments.length?(s=t,e):s},e.iterations=function(t){return arguments.length?(v=+t,e):v},e.strength=function(t){return arguments.length?(n="function"==typeof t?t:Vn(+t),u(),e):n},e.distance=function(t){return arguments.length?(r="function"==typeof t?t:Vn(+t),c(),e):r},e}(a).id(function(t){return t.id}).distance(8)).stop(),u=(e=0,1e3/(1+Math.sqrt(i.length+o.length)));e<u;++e)n.tick();else for(var c=0;c<o.length;c++)o[c].x+=25,o[c].y+=25;return this.nodes},getLinkCoordinates:function(t,e){var n=this.nodes.labels.map(function(t){return t.id}),r=n.indexOf(e.id),i=this.nodes.labels[r];r=(n=this.nodes.anchors.map(function(t){return t.id})).indexOf(e.id+"_anchor");var o=this.nodes.anchors[r],a=Math.atan((i.y-o.y)/(i.x-o.x));a=i.x>o.x?a:Math.PI+a;var s,u,c=o.x+o.r*Math.cos(a),l=o.y+o.r*Math.sin(a),f=t.getBBox().width/2,h=t.getBBox().height/2,d=i.x,p=t.getBBox().y+h,v=d+f*(d>o.x?-1:1),g=p+f*Math.abs(Math.tan(a))*(p>o.y?-1:1);return g<p+h&&p-h<g?(s=v,u=g):(u=p+h*(p>o.y?-1:1),s=d+h/Math.abs(Math.tan(a))*(d>o.x?-1:1)),{anchor:{x:c,y:l},label:{x:s,y:u}}},drawLinkLine:function(){var o=this;this.svg.selectAll(".dot-label").each(function(t,e,n){var r=o.getLinkCoordinates(this,t),i=t.id+"_line";Object(Cn.select)(this.parentNode).append("line").attr("class","link-line "+i).attr("stroke","gray").attr("stroke-width",1/Mr(o.svg.node()).k).attr("x1",r.anchor.x).attr("y1",r.anchor.y).attr("x2",r.label.x).attr("y2",r.label.y)}),this.linkShown||(this.linkShown=!0)},removeLinkLine:function(){this.svg.selectAll(".link-line").remove(),this.linkShown&&(this.linkShown=!1)},wrap:function(t,a){t.each(function(){for(var t,e=Object(Cn.select)(this),n=e.text().split(/\s+/).reverse(),r=[],i=e.attr("x"),o=e.text(null).append("tspan").attr("dy",0).attr("x",i);t=n.pop();)r.push(t),o.text(r.join(" ")),o.node().getComputedTextLength()>a&&(r.pop(),o.text(r.join(" ")),r=[t],o=e.append("tspan").attr("dy",14).attr("x",i).text(t))})},changeLabel:function(){var e=this;null!==this.labelType&&(this.svg.selectAll(".dot-label").text(function(t){return t[e.labelType]}).call(this.wrap,120),this.linkShown&&(this.removeLinkLine(),this.drawLinkLine()))},handleZoom:function(t){var n=this;if(t){var r=this.canvasWidth,e=function(){var d,o,s=kr,l=Tr,p=Or,i=Nr,e=Dr,a=[0,1/0],v=[[-1/0,-1/0],[1/0,1/0]],u=250,f=E.i,c=[],n=Object(rr.a)("start","zoom","end"),h=500,g=150,m=0;function y(t){t.property("__zoom",Ar).on("wheel.zoom",r).on("mousedown.zoom",C).on("dblclick.zoom",k).filter(e).on("touchstart.zoom",T).on("touchmove.zoom",A).on("touchend.zoom touchcancel.zoom",N).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function x(t,e){return(e=Math.max(a[0],Math.min(a[1],e)))===t.k?t:new br(e,t.x,t.y)}function w(t,e,n){var r=e[0]-n[0]*t.k,i=e[1]-n[1]*t.k;return r===t.x&&i===t.y?t:new br(t.k,r,i)}function b(t){return[(+t[0][0]+ +t[1][0])/2,(+t[0][1]+ +t[1][1])/2]}function _(t,u,c){t.on("start.zoom",function(){M(this,arguments).start()}).on("interrupt.zoom end.zoom",function(){M(this,arguments).end()}).tween("zoom",function(){var t=arguments,r=M(this,t),e=l.apply(this,t),i=c||b(e),o=Math.max(e[1][0]-e[0][0],e[1][1]-e[0][1]),n=this.__zoom,a="function"==typeof u?u.apply(this,t):u,s=f(n.invert(i).concat(o/n.k),a.invert(i).concat(o/a.k));return function(t){if(1===t)t=a;else{var e=s(t),n=o/e[2];t=new br(n,i[0]-e[0]*n,i[1]-e[1]*n)}r.zoom(null,t)}})}function M(t,e){for(var n,r=0,i=c.length;r<i;++r)if((n=c[r]).that===t)return n;return new S(t,e)}function S(t,e){this.that=t,this.args=e,this.index=-1,this.active=0,this.extent=l.apply(t,e)}function r(){if(s.apply(this,arguments)){var t=M(this,arguments),e=this.__zoom,n=Math.max(a[0],Math.min(a[1],e.k*Math.pow(2,i.apply(this,arguments)))),r=Object(Cn.mouse)(this);if(t.wheel)t.mouse[0][0]===r[0]&&t.mouse[0][1]===r[1]||(t.mouse[1]=e.invert(t.mouse[0]=r)),clearTimeout(t.wheel);else{if(e.k===n)return;t.mouse=[r,e.invert(r)],Object(ur.interrupt)(this),t.start()}Cr(),t.wheel=setTimeout(function(){t.wheel=null,t.end()},g),t.zoom("mouse",p(w(x(e,n),t.mouse[0],t.mouse[1]),t.extent,v))}}function C(){if(!o&&s.apply(this,arguments)){var n=M(this,arguments),t=Object(Cn.select)(Cn.event.view).on("mousemove.zoom",function(){if(Cr(),!n.moved){var t=Cn.event.clientX-r,e=Cn.event.clientY-i;n.moved=m<t*t+e*e}n.zoom("mouse",p(w(n.that.__zoom,n.mouse[0]=Object(Cn.mouse)(n.that),n.mouse[1]),n.extent,v))},!0).on("mouseup.zoom",function(){t.on("mousemove.zoom mouseup.zoom",null),hr(Cn.event.view,n.moved),Cr(),n.end()},!0),e=Object(Cn.mouse)(this),r=Cn.event.clientX,i=Cn.event.clientY;fr(Cn.event.view),Sr(),n.mouse=[e,this.__zoom.invert(e)],Object(ur.interrupt)(this),n.start()}}function k(){if(s.apply(this,arguments)){var t=this.__zoom,e=Object(Cn.mouse)(this),n=t.invert(e),r=t.k*(Cn.event.shiftKey?.5:2),i=p(w(x(t,r),e,n),l.apply(this,arguments),v);Cr(),0<u?Object(Cn.select)(this).transition().duration(u).call(_,i,e):Object(Cn.select)(this).call(y.transform,i)}}function T(){if(s.apply(this,arguments)){var t,e,n,r,i=M(this,arguments),o=Cn.event.changedTouches,a=o.length;for(Sr(),e=0;e<a;++e)n=o[e],r=[r=Object(Cn.touch)(this,o,n.identifier),this.__zoom.invert(r),n.identifier],i.touch0?i.touch1||(i.touch1=r):(i.touch0=r,t=!0);if(d&&(d=clearTimeout(d),!i.touch1))return i.end(),void((r=Object(Cn.select)(this).on("dblclick.zoom"))&&r.apply(this,arguments));t&&(d=setTimeout(function(){d=null},h),Object(ur.interrupt)(this),i.start())}}function A(){var t,e,n,r,i=M(this,arguments),o=Cn.event.changedTouches,a=o.length;for(Cr(),d&&(d=clearTimeout(d)),t=0;t<a;++t)e=o[t],n=Object(Cn.touch)(this,o,e.identifier),i.touch0&&i.touch0[2]===e.identifier?i.touch0[0]=n:i.touch1&&i.touch1[2]===e.identifier&&(i.touch1[0]=n);if(e=i.that.__zoom,i.touch1){var s=i.touch0[0],u=i.touch0[1],c=i.touch1[0],l=i.touch1[1],f=(f=c[0]-s[0])*f+(f=c[1]-s[1])*f,h=(h=l[0]-u[0])*h+(h=l[1]-u[1])*h;e=x(e,Math.sqrt(f/h)),n=[(s[0]+c[0])/2,(s[1]+c[1])/2],r=[(u[0]+l[0])/2,(u[1]+l[1])/2]}else{if(!i.touch0)return;n=i.touch0[0],r=i.touch0[1]}i.zoom("touch",p(w(e,n,r),i.extent,v))}function N(){var t,e,n=M(this,arguments),r=Cn.event.changedTouches,i=r.length;for(Sr(),o&&clearTimeout(o),o=setTimeout(function(){o=null},h),t=0;t<i;++t)e=r[t],n.touch0&&n.touch0[2]===e.identifier?delete n.touch0:n.touch1&&n.touch1[2]===e.identifier&&delete n.touch1;n.touch1&&!n.touch0&&(n.touch0=n.touch1,delete n.touch1),n.touch0?n.touch0[1]=this.__zoom.invert(n.touch0[0]):n.end()}return y.transform=function(t,e){var n=t.selection?t.selection():t;n.property("__zoom",Ar),t!==n?_(t,e):n.interrupt().each(function(){M(this,arguments).start().zoom(null,"function"==typeof e?e.apply(this,arguments):e).end()})},y.scaleBy=function(t,e){y.scaleTo(t,function(){return this.__zoom.k*("function"==typeof e?e.apply(this,arguments):e)})},y.scaleTo=function(t,o){y.transform(t,function(){var t=l.apply(this,arguments),e=this.__zoom,n=b(t),r=e.invert(n),i="function"==typeof o?o.apply(this,arguments):o;return p(w(x(e,i),n,r),t,v)})},y.translateBy=function(t,e,n){y.transform(t,function(){return p(this.__zoom.translate("function"==typeof e?e.apply(this,arguments):e,"function"==typeof n?n.apply(this,arguments):n),l.apply(this,arguments),v)})},y.translateTo=function(t,r,i){y.transform(t,function(){var t=l.apply(this,arguments),e=this.__zoom,n=b(t);return p(_r.translate(n[0],n[1]).scale(e.k).translate("function"==typeof r?-r.apply(this,arguments):-r,"function"==typeof i?-i.apply(this,arguments):-i),t,v)})},S.prototype={start:function(){return 1==++this.active&&(this.index=c.push(this)-1,this.emit("start")),this},zoom:function(t,e){return this.mouse&&"mouse"!==t&&(this.mouse[1]=e.invert(this.mouse[0])),this.touch0&&"touch"!==t&&(this.touch0[1]=e.invert(this.touch0[0])),this.touch1&&"touch"!==t&&(this.touch1[1]=e.invert(this.touch1[0])),this.that.__zoom=e,this.emit("zoom"),this},end:function(){return 0==--this.active&&(c.splice(this.index,1),this.index=-1,this.emit("end")),this},emit:function(t){Object(Cn.customEvent)(new wr(y,t,this.that.__zoom),n.apply,n,[t,this.that,this.args])}},y.wheelDelta=function(t){return arguments.length?(i="function"==typeof t?t:xr(+t),y):i},y.filter=function(t){return arguments.length?(s="function"==typeof t?t:xr(!!t),y):s},y.touchable=function(t){return arguments.length?(e="function"==typeof t?t:xr(!!t),y):e},y.extent=function(t){return arguments.length?(l="function"==typeof t?t:xr([[+t[0][0],+t[0][1]],[+t[1][0],+t[1][1]]]),y):l},y.scaleExtent=function(t){return arguments.length?(a[0]=+t[0],a[1]=+t[1],y):[a[0],a[1]]},y.translateExtent=function(t){return arguments.length?(v[0][0]=+t[0][0],v[1][0]=+t[1][0],v[0][1]=+t[0][1],v[1][1]=+t[1][1],y):[[v[0][0],v[0][1]],[v[1][0],v[1][1]]]},y.constrain=function(t){return arguments.length?(p=t,y):p},y.duration=function(t){return arguments.length?(u=+t,y):u},y.interpolate=function(t){return arguments.length?(f=t,y):f},y.on=function(){var t=n.on.apply(n,arguments);return t===n?y:t},y.clickDistance=function(t){return arguments.length?(m=(t=+t)*t,y):Math.sqrt(m)},y}().scaleExtent([1,20]).on("zoom",function(){n.content.attr("transform",Cn.event.transform),n.content.selectAll(".dot-label").attr("font-size",.7/Cn.event.transform.k+"rem"),n.content.selectAll(".link-line").attr("stroke-width",1/Cn.event.transform.k);var t=Cn.event.transform.applyX(n.xScale(0)),e=0<t?t:0;e=e<r?e:r,n.canvas.select("g.y-axis").call(n.yAxis.scale(Cn.event.transform.rescaleY(n.yScale))).attr("transform","translate("+e+",0)"),n.canvas.select("g.x-axis").call(n.xAxis.scale(Cn.event.transform.rescaleX(n.xScale)))});this.svg.call(e)}else this.svg.on(".zoom",null)},formatNumber:function(t){return"number"!=typeof t?t:5<t.toString().length?t.toPrecision(5):t},download:function(){var n=this.dimensions.width,r=this.dimensions.height,t="data:image/svg+xml;base64,"+btoa('<svg xmlns="http://www.w3.org/2000/svg" version="1.1" viewBox="0 0 '.concat(n," ").concat(r,'" width="').concat(2*n,'" height="').concat(2*r,'">')+this.svg.html()+"</svg>");if("svg"==this.downloadType)Tn()(t,"volcanoplot.svg");else if("png"==this.downloadType){var i=new Image;i.src=t,i.onload=function(){var t=document.createElement("canvas"),e=t.getContext("2d");t.width=2*n,t.height=2*r,e.drawImage(i,0,0),Tn()(t.toDataURL("image/png"),"volcanoplot.png")}}}},watch:{data:function(){document.getElementById(this.domId)&&(this.nodes={anchors:[],labels:[],links:[]},this.plotVolcano())},labelType:function(t,e){null!==e&&this.changeLabel()},dimensions:function(){this.nodes={anchors:[],labels:[],links:[]},this.plotVolcano()}},created:function(){this.labelType=Array.isArray(this.labelTypes)?this.labelTypes[0]:this.labelTypes,this.yKey=Array.isArray(this.y)?this.y[0]:this.y,this.svg=null,this.canvas=null,this.content=null,this.xScale=null,this.yScale=null,this.xAxis=null,this.yAxis=null,this.colorScale=null,this.nodes={anchors:[],labels:[],links:[]}},mounted:function(){}},jr=(n(33),n(34),Object(a.a)(zr,function(){var n=this,t=n.$createElement,e=n._self._c||t;return e("div",{staticClass:"wg-volcano"},[e("div",{staticClass:"wg-volcano-container",attrs:{id:n.domId}}),n._v(" "),n.showToolbox?e("div",{staticClass:"wg-volcano-toolbox"},[Array.isArray(n.labelTypes)&&1<n.labelTypes.length?e("div",{staticClass:"wg-volcano-tool wg-volcano-label"},[e("div",{staticClass:"field"},[e("label",{attrs:{for:n.domId+"-label"}},[n._v("Label:")]),n._v(" "),e("div",{staticClass:"select is-primary"},[e("select",{directives:[{name:"model",rawName:"v-model",value:n.labelType,expression:"labelType"}],attrs:{id:n.domId+"-label"},on:{change:function(t){var e=Array.prototype.filter.call(t.target.options,function(t){return t.selected}).map(function(t){return"_value"in t?t._value:t.value});n.labelType=t.target.multiple?e:e[0]}}},n._l(n.labelTypes,function(t){return e("option",{domProps:{value:t}},[n._v(n._s(t))])}),0)])])]):n._e(),n._v(" "),e("div",{staticClass:"wg-volcano-tool wg-volcano-download"},[e("div",{staticClass:"field has-addons"},[e("div",{staticClass:"control"},[e("div",{staticClass:"select is-primary"},[e("select",{directives:[{name:"model",rawName:"v-model",value:n.downloadType,expression:"downloadType"}],staticClass:"select",on:{change:function(t){var e=Array.prototype.filter.call(t.target.options,function(t){return t.selected}).map(function(t){return"_value"in t?t._value:t.value});n.downloadType=t.target.multiple?e:e[0]}}},[e("option",{attrs:{value:"png"}},[n._v("PNG")]),n._v(" "),e("option",{attrs:{value:"svg"}},[n._v("SVG")])])])]),n._v(" "),e("div",{staticClass:"control"},[e("button",{staticClass:"button is-outlined is-primary",on:{click:function(t){return n.download()}}},[n._v("Download")])])])]),n._v(" "),Array.isArray(n.y)?[e("div",{staticClass:"wg-volcano-tool wg-volcano-select-y"},[e("div",{staticClass:"control"},[e("div",{staticClass:"select is-primary"},[e("select",{directives:[{name:"model",rawName:"v-model",value:n.yKey,expression:"yKey"}],staticClass:"select",on:{change:function(t){var e=Array.prototype.filter.call(t.target.options,function(t){return t.selected}).map(function(t){return"_value"in t?t._value:t.value});n.yKey=t.target.multiple?e:e[0]}}},n._l(n.y,function(t){return e("option",{domProps:{value:t.value}},[n._v(n._s(t.name))])}),0)])])])]:n._e(),n._v(" "),null!==n.labelTypes?[e("div",{staticClass:"wg-volcano-tool wg-volcano-link"},[n.linkShown?n._e():e("button",{staticClass:"button is-outlined is-primary",on:{click:function(t){return n.drawLinkLine()}}},[n._v("Draw Link")]),n._v(" "),n.linkShown?e("button",{staticClass:"button is-outlined is-primary",on:{click:function(t){return n.removeLinkLine()}}},[n._v("Remove Link")]):n._e()])]:n._e(),n._v(" "),e("div",{staticClass:"wg-volcano-tool wg-volcano-zoom"},[e("b-field",[e("b-switch",{attrs:{id:"zoom-switch"},on:{input:n.handleZoom},model:{value:n.zoomEnabled,callback:function(t){n.zoomEnabled=t},expression:"zoomEnabled"}},[n._v("Pan & Zoom")])],1)],1)],2):n._e(),n._v(" "),e("div",{staticStyle:{visibility:"hidden"},attrs:{id:"wg-volcano-tooltip"}})])},[],!1,null,"012a5a88",null).exports),Er=n(27),Lr=n.n(Er);function Pr(t){return(Pr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var Rr=function t(e){var n={};for(var r in e)null!=e[r]&&"object"==Pr(e[r])?n[r]=t(e[r]):n[r]=e[r];return n};n(35);function Fr(t){return(Fr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}i.a.use(Lr.a);var Ur=new i.a;Object.defineProperties(i.a.prototype,{$bus:{get:function(){return Ur}}});e.default=function(t){new i.a({el:"#app",mixins:[{data:t}],data:function(){return{goShown:!1,summaryShown:!1,activeTab:1,redundancy:"all",serial:0,activeDagDatabase:null,activeDatabase:"all",bar:{dimensions:{width:960,height:300},labelWidth:200},volcano:{dimensions:{width:960,height:500}}}},computed:{enrichmentData:function(){var e=this,t="all"==this.activeDatabase?this.enrichment:this.enrichment.filter(function(t){return!1 in t||t.database==e.activeDatabase});if("all"==this.redundancy)return t;if(this.redundancy in this.clusters&&"representatives"in this.clusters[this.redundancy]){var n=this.clusters[this.redundancy].representatives;return t.filter(function(t){return-1!==n.indexOf(t.geneSet)})}return[]},volcanoData:function(){var i=this;if("all"==this.redundancy&&"all"==this.activeDatabase)return this.enrichment.concat(this.background);var o="all"==this.redundancy?null:this.clusters[this.redundancy].representatives;return this.enrichment.map(function(t,e){var n,r;return n=null===o||-1!==o.indexOf(t.geneSet),r="all"==i.activeDatabase||"database"in t&&t.database==i.activeDatabase,n&&r?Object.assign({},t):(i.serial=i.serial+1,Object.assign({},t,{options:void 0,id:i.serial}))}).concat(this.background)},dagData:function(){if("all"==this.redundancy)return this.dag[this.activeDagDatabase];if(this.redundancy in this.clusters&&"representatives"in this.clusters[this.redundancy]){var n=this.clusters[this.redundancy].representatives;return this.dag[this.activeDagDatabase].map(function(t){var e=Rr(t);return void 0===t.data.source&&(-1!==n.indexOf(t.data.id)?(e.scratch._leavesKept=!0,e.scratch._isResult=!0):(e.data.color="#FFFFFF",e.scratch._isResult=!1)),e})}return[]}},components:{WgResultTable:s,WgBarPlot:On,WgVolcanoPlot:jr,WgGeneTable:Un,WgDag:qn.a},methods:{updateHeight:function(){this.bar.dimensions=Object.assign({},this.bar.dimensions,{height:300+15*Math.max(0,this.enrichmentData.length-5)})},updateWidth:function(){var e=this,t=document.querySelector("main"),n=window.getComputedStyle(t),r=window.innerWidth-n.marginLeft.substring(0,n.marginLeft.indexOf("px"))-n.marginRight.substring(0,n.marginRight.indexOf("px"));m(this.enrichmentData.map(function(t){return t[e.bar.valueKey]}))[0]<0?this.bar.dimensions=Object.assign({},this.bar.dimensions,{width:r<=this.preferBarWidth?r:this.preferBarWidth}):this.bar.dimensions=Object.assign({},this.bar.dimensions,{width:r}),r<=this.preferBarWidth?this.bar.labelWidth=200:this.bar.labelWidth=r-this.preferBarWidth,this.volcano.dimensions=Object.assign({},this.volcano.dimensions,{width:r<=this.preferVolcanoWidth?r:this.preferVolcanoWidth})}},watch:{enrichmentData:function(){this.updateHeight()}},created:function(){var r=this;"object"===Fr(this.dag)&&this.dag.constructor===Object&&(this.activeDagDatabase=Object.keys(this.dag)[0]);var i=this.enrichment.map(function(t){return t.geneSet});if(this.enrichment.forEach(function(t,e){void 0===r.enrichment[e].id&&(r.enrichment[e].id=e),r.enrichment[e].options={showLabel:!0,showTooltip:!0},r.enrichment[e].options.callback=function(){r.$bus.$emit("select-gene-set",t.geneSet,t.description),r.$scrollTo("#wg-gene-table")}}),this.serial=this.enrichment.length,this.background.forEach(function(t,e){void 0===r.background[e].id&&(r.background[e].id=r.serial+e)}),this.serial=this.serial+this.background.length,this.dag){var t=function(n){r.dag[n].forEach(function(t,e){t.data.hasOwnProperty("id")&&!t.data.hasOwnProperty("source")&&(void 0===r.dag[n][e].scratch&&(r.dag[n][e].scratch={}),-1!==i.indexOf(t.data.id)&&(r.dag[n][e].scratch._isResult=!0,r.dag[n][e].scratch._callback=function(){r.$bus.$emit("select-gene-set",t.data.id,t.data.name),r.$scrollTo("#wg-gene-table")}))})};for(var e in this.dag)t(e)}0===this.enrichment.length&&(this.summaryShown=!0),this.updateHeight(),this.preferBarWidth=this.bar.dimensions.width?this.bar.dimensions.width:1080,this.preferVolcanoWidth=this.volcano.dimensions.width?this.volcano.dimensions.width:1080},mounted:function(){0<this.enrichment.length&&this.$bus.$emit("select-gene-set",this.enrichment[0].geneSet,this.enrichment[0].description),this.updateWidth(),window.addEventListener("resize",this.updateWidth)},beforeDestroy:function(){window.removeEventListener("resize",this.updateWidth)}})}}]).default;